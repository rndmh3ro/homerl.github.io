<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Homer&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-12-23T06:34:04.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Homer Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hotplug and disable hyper theading core in linux</title>
    <link href="http://yoursite.com/2017/12/23/Hotplug-and-disable-hyper-theading-core-in-linux/"/>
    <id>http://yoursite.com/2017/12/23/Hotplug-and-disable-hyper-theading-core-in-linux/</id>
    <published>2017-12-23T06:01:18.000Z</published>
    <updated>2017-12-23T06:34:04.000Z</updated>
    
    <content type="html">&lt;p&gt;###Found the half cores&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ((i=0;i&amp;lt;$(grep -c processor /proc/cpuinfo);i++)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cat /sys/devices/system/cpu/cpu&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/cache/index2/shared_cpu_list; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt; | awk -F, &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;a[$1]=$0&amp;#125; END&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  count=0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  for (i in a) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     if(count==0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       printf i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       printf &quot;,&quot;i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       count++ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17,4,18,5,19,6,7,8,9,10,11,12,13,0,14,1,15,2,16,3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Turn-off-the-core&quot;&gt;&lt;a href=&quot;#Turn-off-the-core&quot; class=&quot;headerlink&quot; title=&quot;Turn off the core&quot;&gt;&lt;/a&gt;Turn off the core&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 0 &amp;gt; /sys/devices/system/cpu/cpu17/online&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;###Found the half cores&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="cpu" scheme="http://yoursite.com/tags/cpu/"/>
    
  </entry>
  
  <entry>
    <title>issue</title>
    <link href="http://yoursite.com/2017/12/06/issue/"/>
    <id>http://yoursite.com/2017/12/06/issue/</id>
    <published>2017-12-06T12:30:15.000Z</published>
    <updated>2017-12-06T12:30:15.000Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mdadm</title>
    <link href="http://yoursite.com/2017/11/22/mdadm-1/"/>
    <id>http://yoursite.com/2017/11/22/mdadm-1/</id>
    <published>2017-11-22T13:18:12.000Z</published>
    <updated>2017-11-22T13:52:59.000Z</updated>
    
    <content type="html">&lt;p&gt;2xP3520 NVME raid1 md1_raid1 cpu 100%&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 7448 root      20   0       0      0      0 R 100.0  0.0   7:54.02 md1_raid1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 4057 root      20   0       0      0      0 R  87.5  0.0   1:27.26 kworker/u49:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 6417 root      20   0  547536   3312    360 D  12.5  0.0   0:00.31 fio&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 6436 root      20   0  547612   3324    352 D  12.5  0.0   0:00.23 fio&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;2xP3520 NVME raid1 md1_raid1 cpu 100%&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>linux_errno</title>
    <link href="http://yoursite.com/2017/11/21/linux-errno/"/>
    <id>http://yoursite.com/2017/11/21/linux-errno/</id>
    <published>2017-11-21T06:03:54.000Z</published>
    <updated>2017-11-21T09:11:37.000Z</updated>
    
    <content type="html">&lt;p&gt;Get it from&lt;br&gt;/usr/include/asm-generic/errno.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ifndef _ASM_GENERIC_ERRNO_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define _ASM_GENERIC_ERRNO_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#include &amp;lt;asm-generic/errno-base.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDEADLK		35	/* Resource deadlock would occur */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENAMETOOLONG	36	/* File name too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOLCK		37	/* No record locks available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSYS		38	/* Function not implemented */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTEMPTY	39	/* Directory not empty */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELOOP		40	/* Too many symbolic links encountered */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EWOULDBLOCK	EAGAIN	/* Operation would block */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMSG		42	/* No message of desired type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EIDRM		43	/* Identifier removed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECHRNG		44	/* Channel number out of range */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL2NSYNC	45	/* Level 2 not synchronized */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL3HLT		46	/* Level 3 halted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL3RST		47	/* Level 3 reset */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELNRNG		48	/* Link number out of range */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUNATCH		49	/* Protocol driver not attached */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOCSI		50	/* No CSI structure available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL2HLT		51	/* Level 2 halted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADE		52	/* Invalid exchange */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADR		53	/* Invalid request descriptor */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EXFULL		54	/* Exchange full */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOANO		55	/* No anode */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADRQC		56	/* Invalid request code */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADSLT		57	/* Invalid slot */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDEADLOCK	EDEADLK&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBFONT		59	/* Bad font file format */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSTR		60	/* Device not a stream */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENODATA		61	/* No data available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETIME		62	/* Timer expired */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSR		63	/* Out of streams resources */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENONET		64	/* Machine is not on the network */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOPKG		65	/* Package not installed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMOTE		66	/* Object is remote */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOLINK		67	/* Link has been severed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADV		68	/* Advertise error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESRMNT		69	/* Srmount error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECOMM		70	/* Communication error on send */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTO		71	/* Protocol error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMULTIHOP	72	/* Multihop attempted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDOTDOT		73	/* RFS specific error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADMSG		74	/* Not a data message */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOVERFLOW	75	/* Value too large for defined data type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTUNIQ	76	/* Name not unique on network */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADFD		77	/* File descriptor in bad state */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMCHG		78	/* Remote address changed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBACC		79	/* Can not access a needed shared library */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBBAD		80	/* Accessing a corrupted shared library */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBSCN		81	/* .lib section in a.out corrupted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBMAX		82	/* Attempting to link in too many shared libraries */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBEXEC	83	/* Cannot exec a shared library directly */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EILSEQ		84	/* Illegal byte sequence */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ERESTART	85	/* Interrupted system call should be restarted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESTRPIPE	86	/* Streams pipe error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUSERS		87	/* Too many users */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTSOCK	88	/* Socket operation on non-socket */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDESTADDRREQ	89	/* Destination address required */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMSGSIZE	90	/* Message too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTOTYPE	91	/* Protocol wrong type for socket */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOPROTOOPT	92	/* Protocol not available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTONOSUPPORT	93	/* Protocol not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESOCKTNOSUPPORT	94	/* Socket type not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOPNOTSUPP	95	/* Operation not supported on transport endpoint */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPFNOSUPPORT	96	/* Protocol family not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EAFNOSUPPORT	97	/* Address family not supported by protocol */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADDRINUSE	98	/* Address already in use */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADDRNOTAVAIL	99	/* Cannot assign requested address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETDOWN	100	/* Network is down */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETUNREACH	101	/* Network is unreachable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETRESET	102	/* Network dropped connection because of reset */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNABORTED	103	/* Software caused connection abort */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNRESET	104	/* Connection reset by peer */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOBUFS		105	/* No buffer space available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISCONN		106	/* Transport endpoint is already connected */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTCONN	107	/* Transport endpoint is not connected */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESHUTDOWN	108	/* Cannot send after transport endpoint shutdown */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETOOMANYREFS	109	/* Too many references: cannot splice */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETIMEDOUT	110	/* Connection timed out */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNREFUSED	111	/* Connection refused */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EHOSTDOWN	112	/* Host is down */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EHOSTUNREACH	113	/* No route to host */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EALREADY	114	/* Operation already in progress */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINPROGRESS	115	/* Operation now in progress */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESTALE		116	/* Stale file handle */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUCLEAN		117	/* Structure needs cleaning */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTNAM		118	/* Not a XENIX named type file */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENAVAIL		119	/* No XENIX semaphores available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISNAM		120	/* Is a named type file */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMOTEIO	121	/* Remote I/O error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDQUOT		122	/* Quota exceeded */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMEDIUM	123	/* No medium found */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMEDIUMTYPE	124	/* Wrong medium type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECANCELED	125	/* Operation Canceled */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOKEY		126	/* Required key not available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYEXPIRED	127	/* Key has expired */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYREVOKED	128	/* Key has been revoked */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYREJECTED	129	/* Key was rejected by service */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/* &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; robust mutexes */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOWNERDEAD	130	/* Owner died */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTRECOVERABLE	131	/* State not recoverable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define ERFKILL		132	/* Operation not possible due to RF-kill */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define EHWPOISON	133	/* Memory page has hardware error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;/usr/include/asm-generic/errno-base.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ifndef _ASM_GENERIC_ERRNO_BASE_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define _ASM_GENERIC_ERRNO_BASE_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPERM		 1	/* Operation not permitted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOENT		 2	/* No such file or directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESRCH		 3	/* No such process */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINTR		 4	/* Interrupted system call */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EIO		 5	/* I/O error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENXIO		 6	/* No such device or address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	E2BIG		 7	/* Argument list too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOEXEC		 8	/* Exec format error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADF		 9	/* Bad file number */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECHILD		10	/* No child processes */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EAGAIN		11	/* Try again */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMEM		12	/* Out of memory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EACCES		13	/* Permission denied */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EFAULT		14	/* Bad address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTBLK		15	/* Block device required */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBUSY		16	/* Device or resource busy */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EEXIST		17	/* File exists */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EXDEV		18	/* Cross-device link */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENODEV		19	/* No such device */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTDIR		20	/* Not a directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISDIR		21	/* Is a directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINVAL		22	/* Invalid argument */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENFILE		23	/* File table overflow */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMFILE		24	/* Too many open files */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTTY		25	/* Not a typewriter */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETXTBSY		26	/* Text file busy */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EFBIG		27	/* File too large */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSPC		28	/* No space left on device */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESPIPE		29	/* Illegal seek */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EROFS		30	/* Read-only file system */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMLINK		31	/* Too many links */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPIPE		32	/* Broken pipe */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDOM		33	/* Math argument out of domain of func */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ERANGE		34	/* Math result not representable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Get it from&lt;br&gt;/usr/include/asm-generic/errno.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="unix" scheme="http://yoursite.com/tags/unix/"/>
    
      <category term="posix" scheme="http://yoursite.com/tags/posix/"/>
    
  </entry>
  
  <entry>
    <title>system call</title>
    <link href="http://yoursite.com/2017/11/09/mdadm/"/>
    <id>http://yoursite.com/2017/11/09/mdadm/</id>
    <published>2017-11-09T08:22:12.000Z</published>
    <updated>2017-11-22T02:44:30.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mdadm --create /dev/md/imsm0 -n2  &lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt; imsm /dev/nvme&amp;#123;0..1&amp;#125;n1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm -C /dev/md1 /dev/md/imsm0 -n 2 &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 2000000 &amp;gt; /proc/sys/dev/raid/speed_&lt;span class=&quot;built_in&quot;&gt;limit&lt;/span&gt;_max&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="unix" scheme="http://yoursite.com/tags/unix/"/>
    
      <category term="posix" scheme="http://yoursite.com/tags/posix/"/>
    
  </entry>
  
  <entry>
    <title>system call</title>
    <link href="http://yoursite.com/2017/11/09/system_call/"/>
    <id>http://yoursite.com/2017/11/09/system_call/</id>
    <published>2017-11-09T08:22:12.000Z</published>
    <updated>2017-11-09T08:25:13.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part2&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part3&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part4&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一、进程控制：&lt;br&gt;fork    创建一个新进程&lt;br&gt;clone    按指定条件创建子进程&lt;br&gt;execve    运行可执行文件&lt;br&gt;exit    中止进程&lt;br&gt;_exit    立即中止当前进程&lt;br&gt;getdtablesize    进程所能打开的最大文件数&lt;br&gt;getpgid    获取指定进程组标识号&lt;br&gt;setpgid    设置指定进程组标志号&lt;br&gt;getpgrp    获取当前进程组标识号&lt;br&gt;setpgrp    设置当前进程组标志号&lt;br&gt;getpid    获取进程标识号&lt;br&gt;getppid    获取父进程标识号&lt;br&gt;getpriority    获取调度优先级&lt;br&gt;setpriority    设置调度优先级&lt;br&gt;modify_ldt    读写进程的本地描述表&lt;br&gt;nanosleep    使进程睡眠指定的时间&lt;br&gt;nice    改变分时进程的优先级&lt;br&gt;pause    挂起进程，等待信号&lt;br&gt;personality    设置进程运行域&lt;br&gt;prctl    对进程进行特定操作&lt;br&gt;ptrace    进程跟踪&lt;br&gt;sched_get_priority_max    取得静态优先级的上限&lt;br&gt;sched_get_priority_min    取得静态优先级的下限&lt;br&gt;sched_getparam    取得进程的调度参数&lt;br&gt;sched_getscheduler    取得指定进程的调度策略&lt;br&gt;sched_rr_get_interval    取得按RR算法调度的实时进程的时间片长度&lt;br&gt;sched_setparam    设置进程的调度参数&lt;br&gt;sched_setscheduler    设置指定进程的调度策略和参数&lt;br&gt;sched_yield    进程主动让出处理器,并将自己等候调度队列队尾&lt;br&gt;vfork    创建一个子进程，以供执行新程序，常与execve等同时使用&lt;br&gt;wait    等待子进程终止&lt;br&gt;wait3    参见wait&lt;br&gt;waitpid    等待指定子进程终止&lt;br&gt;wait4    参见waitpid&lt;br&gt;capget    获取进程权限&lt;br&gt;capset    设置进程权限&lt;br&gt;getsid    获取会晤标识号&lt;br&gt;setsid    设置会晤标识号&lt;br&gt;二、文件系统控制&lt;br&gt;1、文件读写操作&lt;br&gt;fcntl    文件控制&lt;br&gt;open    打开文件&lt;br&gt;creat    创建新文件&lt;br&gt;close    关闭文件描述字&lt;br&gt;read    读文件&lt;br&gt;write    写文件&lt;br&gt;readv    从文件读入数据到缓冲数组中&lt;br&gt;writev    将缓冲数组里的数据写入文件&lt;br&gt;pread    对文件随机读&lt;br&gt;pwrite    对文件随机写&lt;br&gt;lseek    移动文件指针&lt;br&gt;_llseek    在64位地址空间里移动文件指针&lt;br&gt;dup    复制已打开的文件描述字&lt;br&gt;dup2    按指定条件复制文件描述字&lt;br&gt;flock    文件加/解锁&lt;br&gt;poll    I/O多路转换&lt;br&gt;truncate    截断文件&lt;br&gt;ftruncate    参见truncate&lt;br&gt;umask    设置文件权限掩码&lt;br&gt;fsync    把文件在内存中的部分写回磁盘&lt;br&gt;2、文件系统操作&lt;br&gt;access    确定文件的可存取性&lt;br&gt;chdir    改变当前工作目录&lt;br&gt;fchdir    参见chdir&lt;br&gt;chmod    改变文件方式&lt;br&gt;fchmod    参见chmod&lt;br&gt;chown    改变文件的属主或用户组&lt;br&gt;fchown    参见chown&lt;br&gt;lchown    参见chown&lt;br&gt;chroot    改变根目录&lt;br&gt;stat    取文件状态信息&lt;br&gt;lstat    参见stat&lt;br&gt;fstat    参见stat&lt;br&gt;statfs    取文件系统信息&lt;br&gt;fstatfs    参见statfs&lt;br&gt;readdir    读取目录项&lt;br&gt;getdents    读取目录项&lt;br&gt;mkdir    创建目录&lt;br&gt;mknod    创建索引节点&lt;br&gt;rmdir    删除目录&lt;br&gt;rename    文件改名&lt;br&gt;link    创建链接&lt;br&gt;symlink    创建符号链接&lt;br&gt;unlink    删除链接&lt;br&gt;readlink    读符号链接的值&lt;br&gt;mount    安装文件系统&lt;br&gt;umount    卸下文件系统&lt;br&gt;ustat    取文件系统信息&lt;br&gt;utime    改变文件的访问修改时间&lt;br&gt;utimes    参见utime&lt;br&gt;quotactl    控制磁盘配额&lt;br&gt;三、系统控制&lt;br&gt;ioctl    I/O总控制函数&lt;br&gt;_sysctl    读/写系统参数&lt;br&gt;acct    启用或禁止进程记账&lt;br&gt;getrlimit    获取系统资源上限&lt;br&gt;setrlimit    设置系统资源上限&lt;br&gt;getrusage    获取系统资源使用情况&lt;br&gt;uselib    选择要使用的二进制函数库&lt;br&gt;ioperm    设置端口I/O权限&lt;br&gt;iopl    改变进程I/O权限级别&lt;br&gt;outb    低级端口操作&lt;br&gt;reboot    重新启动&lt;br&gt;swapon    打开交换文件和设备&lt;br&gt;swapoff    关闭交换文件和设备&lt;br&gt;bdflush    控制bdflush守护进程&lt;br&gt;sysfs    取核心支持的文件系统类型&lt;br&gt;sysinfo    取得系统信息&lt;br&gt;adjtimex    调整系统时钟&lt;br&gt;alarm    设置进程的闹钟&lt;br&gt;getitimer    获取计时器值&lt;br&gt;setitimer    设置计时器值&lt;br&gt;gettimeofday    取时间和时区&lt;br&gt;settimeofday    设置时间和时区&lt;br&gt;stime    设置系统日期和时间&lt;br&gt;time    取得系统时间&lt;br&gt;times    取进程运行时间&lt;br&gt;uname    获取当前UNIX系统的名称、版本和主机等信息&lt;br&gt;vhangup    挂起当前终端&lt;br&gt;nfsservctl    对NFS守护进程进行控制&lt;br&gt;vm86    进入模拟8086模式&lt;br&gt;create_module    创建可装载的模块项&lt;br&gt;delete_module    删除可装载的模块项&lt;br&gt;init_module    初始化模块&lt;br&gt;query_module    查询模块信息&lt;br&gt;&lt;em&gt;get_kernel_syms    取得核心符号,已被query_module代替&lt;br&gt;四、内存管理&lt;br&gt;brk    改变数据段空间的分配&lt;br&gt;sbrk    参见brk&lt;br&gt;mlock    内存页面加锁&lt;br&gt;munlock    内存页面解锁&lt;br&gt;mlockall    调用进程所有内存页面加锁&lt;br&gt;munlockall    调用进程所有内存页面解锁&lt;br&gt;mmap    映射虚拟内存页&lt;br&gt;munmap    去除内存页映射&lt;br&gt;mremap    重新映射虚拟内存地址&lt;br&gt;msync    将映射内存中的数据写回磁盘&lt;br&gt;mprotect    设置内存映像保护&lt;br&gt;getpagesize    获取页面大小&lt;br&gt;sync    将内存缓冲区数据写回硬盘&lt;br&gt;cacheflush    将指定缓冲区中的内容写回磁盘&lt;br&gt;五、网络管理&lt;br&gt;getdomainname    取域名&lt;br&gt;setdomainname    设置域名&lt;br&gt;gethostid    获取主机标识号&lt;br&gt;sethostid    设置主机标识号&lt;br&gt;gethostname    获取本主机名称&lt;br&gt;sethostname    设置主机名称&lt;br&gt;六、socket控制&lt;br&gt;socketcall    socket系统调用&lt;br&gt;socket    建立socket&lt;br&gt;bind    绑定socket到端口&lt;br&gt;connect    连接远程主机&lt;br&gt;accept    响应socket连接请求&lt;br&gt;send    通过socket发送信息&lt;br&gt;sendto    发送UDP信息&lt;br&gt;sendmsg    参见send&lt;br&gt;recv    通过socket接收信息&lt;br&gt;recvfrom    接收UDP信息&lt;br&gt;recvmsg    参见recv&lt;br&gt;listen    监听socket端口&lt;br&gt;select    对多路同步I/O进行轮询&lt;br&gt;shutdown    关闭socket上的连接&lt;br&gt;getsockname    取得本地socket名字&lt;br&gt;getpeername    获取通信对方的socket名字&lt;br&gt;getsockopt    取端口设置&lt;br&gt;setsockopt    设置端口参数&lt;br&gt;sendfile    在文件或端口间传输数据&lt;br&gt;socketpair    创建一对已联接的无名socket&lt;br&gt;七、用户管理&lt;br&gt;getuid    获取用户标识号&lt;br&gt;setuid    设置用户标志号&lt;br&gt;getgid    获取组标识号&lt;br&gt;setgid    设置组标志号&lt;br&gt;getegid    获取有效组标识号&lt;br&gt;setegid    设置有效组标识号&lt;br&gt;geteuid    获取有效用户标识号&lt;br&gt;seteuid    设置有效用户标识号&lt;br&gt;setregid    分别设置真实和有效的的组标识号&lt;br&gt;setreuid    分别设置真实和有效的用户标识号&lt;br&gt;getresgid    分别获取真实的,有效的和保存过的组标识号&lt;br&gt;setresgid    分别设置真实的,有效的和保存过的组标识号&lt;br&gt;getresuid    分别获取真实的,有效的和保存过的用户标识号&lt;br&gt;setresuid    分别设置真实的,有效的和保存过的用户标识号&lt;br&gt;setfsgid    设置文件系统检查时使用的组标识号&lt;br&gt;setfsuid    设置文件系统检查时使用的用户标识号&lt;br&gt;getgroups    获取后补组标志清单&lt;br&gt;setgroups    设置后补组标志清单&lt;br&gt;八、进程间通信&lt;br&gt;ipc    进程间通信总控制调用&lt;br&gt;1、信号&lt;br&gt;sigaction    设置对指定信号的处理方法&lt;br&gt;sigprocmask    根据参数对信号集中的信号执行阻塞/解除阻塞等操作&lt;br&gt;sigpending    为指定的被阻塞信号设置队列&lt;br&gt;sigsuspend    挂起进程等待特定信号&lt;br&gt;signal    参见signal&lt;br&gt;kill    向进程或进程组发信号
&lt;/em&gt;sigblock    向被阻塞信号掩码中添加信号,已被sigprocmask代替&lt;br&gt;&lt;em&gt;siggetmask    取得现有阻塞信号掩码,已被sigprocmask代替
&lt;/em&gt;sigsetmask    用给定信号掩码替换现有阻塞信号掩码,已被sigprocmask代替&lt;br&gt;&lt;em&gt;sigmask    将给定的信号转化为掩码,已被sigprocmask代替
&lt;/em&gt;sigpause    作用同sigsuspend,已被sigsuspend代替&lt;br&gt;sigvec    为兼容BSD而设的信号处理函数,作用类似sigaction&lt;br&gt;ssetmask    ANSI C的信号处理函数,作用类似sigaction&lt;br&gt;2、消息&lt;br&gt;msgctl    消息控制操作&lt;br&gt;msgget    获取消息队列&lt;br&gt;msgsnd    发消息&lt;br&gt;msgrcv    取消息&lt;br&gt;3、管道&lt;br&gt;pipe    创建管道&lt;br&gt;4、信号量&lt;br&gt;semctl    信号量控制&lt;br&gt;semget    获取一组信号量&lt;br&gt;semop    信号量操作&lt;br&gt;5、共享内存&lt;br&gt;shmctl    控制共享内存&lt;br&gt;shmget    获取共享内存&lt;br&gt;shmat    连接共享内存&lt;br&gt;shmdt    拆卸共享内存&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.c
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="unix" scheme="http://yoursite.com/tags/unix/"/>
    
      <category term="posix" scheme="http://yoursite.com/tags/posix/"/>
    
  </entry>
  
  <entry>
    <title>scsi tips</title>
    <link href="http://yoursite.com/2017/10/26/scsi_tips/"/>
    <id>http://yoursite.com/2017/10/26/scsi_tips/</id>
    <published>2017-10-26T14:39:34.000Z</published>
    <updated>2017-12-05T08:46:55.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Enable-read-write-cache&quot;&gt;&lt;a href=&quot;#Enable-read-write-cache&quot; class=&quot;headerlink&quot; title=&quot;Enable read write cache&quot;&gt;&lt;/a&gt;Enable read write cache&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##SATA&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -W 0 /dev/sdX --&amp;gt; &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -W 1 /dev/sdX --&amp;gt; &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -i /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##SAS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WCE 0 [cha: y, def: 1, sav: 0] --&amp;gt; write caching is disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --inquiry /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --page=ca /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --set=WCE /dev/sdX --&amp;gt; this enables write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –g WCE /dev/sdX  --&amp;gt; get the WCE current value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –s WCE –S /dev/sdX --&amp;gt; To &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; the WCE current and saved values (WCE=1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –c WCE /dev/sdX --&amp;gt; To clear (&lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt;) the WCE current value (WCE=0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –c WCE –S /dev/sdX --&amp;gt; To clear (&lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt;) the WCE current and saved values (WCE=0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;smart&quot;&gt;&lt;a href=&quot;#smart&quot; class=&quot;headerlink&quot; title=&quot;smart&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.computerworld.com/article/2846009/the-5-smart-stats-that-actually-predict-hard-drive-failure.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;smart&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;SMART 5 - Reallocated_Sector_Count.&lt;br&gt;SMART 187 - Reported_Uncorrectable_Errors.&lt;br&gt;SMART 188 - Command_Timeout.&lt;br&gt;SMART 197 - Current_Pending_Sector_Count.&lt;br&gt;SMART 198 - Offline_Uncorrectable&lt;/p&gt;
&lt;h3 id=&quot;sg3-utils&quot;&gt;&lt;a href=&quot;#sg3-utils&quot; class=&quot;headerlink&quot; title=&quot;sg3_utils&quot;&gt;&lt;/a&gt;sg3_utils&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sg_ses /dev/sg129 -p0x2 -I2,1 -j&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;这个命令的I后面是2就是风扇，1是电源，3是温度&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;然后命令的倒数第2个参数，例如上面命令的1， 就代表第1个风扇，是0，就代表第0个风扇，3就代表第3个风扇&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Smart-check&quot;&gt;&lt;a href=&quot;#Smart-check&quot; class=&quot;headerlink&quot; title=&quot;Smart check&quot;&gt;&lt;/a&gt;Smart check&lt;/h4&gt;&lt;p&gt;Phy reset problem&lt;/p&gt;
&lt;p&gt;Running disparity error count&lt;br&gt;A binary value indicating the cumulative encoded signal imbalance between the one and zero signal state of all characters since dword synchronization has been achieved.&lt;br&gt;&lt;a href=&quot;https://www.seagate.com/staticfiles/support/disc/manuals/Interface%20manuals/100293071c.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;for more scsi info&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;loss of DWORD synchroization&lt;br&gt;These errors mean that there is a problem in the link between the drive and the upstream port, if you have a cable in there the cable may be bad, if not it means one of the port is bad. Ofcourse even if you have a cable it can still mean one of the ports is bad.&lt;br&gt;The way to diagnose it is to use a different disk in the same slot and see if the error goes away or not, if it went away the disk is bad. If the error stayed the original disk is fine but the port on the server/chassis is bad and the server/chassis needs to be replaced.&lt;br&gt;The issue with loss of dword synchronization is that it means additional retries for some sent IOs and it will increase the latency of IOs by way of waiting more for data transmission due to these retransmits.&lt;/p&gt;
&lt;p&gt;SCSI errors in messages&lt;br&gt;“scsi data underrun”&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   handle(0x002d), ioc_status(scsi data underrun)(0x0045), smid(222)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   scsi_status(check condition)(0x02), scsi_state(autosense valid )(0x01)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   [sense_key,asc,ascq]: [0x06,0x2a,0x01], count(96)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;“REPORT_LUNS handle retries”&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpt2sas0: REPORT_LUNS: handle(0x000a), retries(0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/jaseywang/3786679&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Replace HDDs&lt;/a&gt;&lt;br&gt;(SAS Serial SCSI Protocol) SSP handle&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:03:03 wtf kernel: [5640834.981956] mpt2sas0: removing handle(0x000c), sas_addr(0x50014ee30011c706)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604300] scsi 0:0:13:0: Direct-Access     SEAGATE  ST2000NM0001     PS06 PQ: 0 ANSI: 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604308] scsi 0:0:13:0: SSP: handle(0x0018), sas_addr(0x5000c50041f753c5), device_name(0x0000000000000000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604312] scsi 0:0:13:0: SSP: enclosure_logical_id(0x500065b37689abff), slot(4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604316] scsi 0:0:13:0: qdepth(254), tagged(1), simple(1), ordered(0), scsi_level(7), cmd_que(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604766] sd 0:0:13:0: Attached scsi generic sg1 &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.605237] sd 0:0:13:0: [sdb] 3907029168 512-byte logical blocks: (2.00 TB/1.81 TiB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.606128] sd 0:0:13:0: [sdb] Write Protect is off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.606567] sd 0:0:13:0: [sdb] Write cache: enabled, &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; cache: enabled, supports DPO and FUA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.607915]  sdb: unknown partition table&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.635779] sd 0:0:13:0: [sdb] Attached SCSI disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:05:46 wtf kernel: [5640997.134363]  sdb: sdb1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;You can enable SCSI logging using echo 0x010401cd &amp;gt; /proc/sys/dev/scsi/logging_level&lt;/p&gt;
&lt;p&gt;显示当前级别：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-dev-scsi-logging-level&quot;&gt;&lt;a href=&quot;#sysctl-dev-scsi-logging-level&quot; class=&quot;headerlink&quot; title=&quot;sysctl dev.scsi.logging_level&quot;&gt;&lt;/a&gt;sysctl dev.scsi.logging_level&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = 0&lt;br&gt;如果不是级别 128，请启用级别 128：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-w-dev-scsi-logging-level-128&quot;&gt;&lt;a href=&quot;#sysctl-w-dev-scsi-logging-level-128&quot; class=&quot;headerlink&quot; title=&quot;sysctl -w dev.scsi.logging_level=128&quot;&gt;&lt;/a&gt;sysctl -w dev.scsi.logging_level=128&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = 128&lt;br&gt;要获取短时间内的非常详细的 scsi 日志记录，请启用级别 -1：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-w-dev-scsi-logging-level-1&quot;&gt;&lt;a href=&quot;#sysctl-w-dev-scsi-logging-level-1&quot; class=&quot;headerlink&quot; title=&quot;sysctl -w dev.scsi.logging_level=-1&quot;&gt;&lt;/a&gt;sysctl -w dev.scsi.logging_level=-1&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = -1&lt;br&gt;日志输出将位于 /var/log/messages 中。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi debug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level syntax&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read syntax diagramSkip visual syntax diagram&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       .- ---------------------------.             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       V                             |             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;-scsi_logging_level----+-------------------------+-+--+- -s -+-&amp;gt;&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -a-- &amp;lt;level&amp;gt;-----------+    +- -g -+   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -E-- &amp;lt;level&amp;gt;-----------+    &amp;apos;- -c -&amp;apos;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -T-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -S-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -M-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --mlqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --mlcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -L-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --llqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --llcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -H-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --hlqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --hlcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         &amp;apos;- -I-- &amp;lt;level&amp;gt;-----------&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current scsi logging level:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dev.scsi.logging_level = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_ERROR=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_TIMEOUT=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_SCAN=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_IOCTL=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level --hlqueue 3 --highlevel 2 --all 1 -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;New scsi logging level:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dev.scsi.logging_level = 174363209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_ERROR=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_TIMEOUT=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_SCAN=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLQUEUE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLCOMPLETE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLQUEUE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLCOMPLETE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLQUEUE=3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLCOMPLETE=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_IOCTL=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://www.ibm.com/support/knowledgecenter/en/linuxonibm/com.ibm.linux.z.lgdd/lgdd_r_scsilog_cmd.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The definitions can be found in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://en.opensuse.org/SDB:SCSI_debugging_hints&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drivers/scsi/scsi_logging.h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The possible areas are:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used by any command which has to be retried/recovered via the SCSI error handling mechanism&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TIMEOUT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used by drivers/scsi/sg.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCAN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used during device scan, ie whenever a new device / HBA is initialized&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mid-layer queue; requests are being pulled from the block-layer queue and submitted to the HBA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mid-layer queue; requests are being completed by the HBA and results are being pushed back to the block-layer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Low-layer queue; Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Low-layer queue; Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;High-layer queue; command preparation in drivers/scsi/sd.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;High-layer queue; command completion in drivers/scsi/sd.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IOCTL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI IOCTL logging&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The detailed error level description:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error logging when a command is recovered via the SCSI error handling mechanism. The following levels are uses:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler thread statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command logging&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command details&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCAN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging during HBA / target scanning. The following levels are used:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of unusual devices where LUN 0 has a pqual of 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of devices with pqual 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of SCSI commands sent during scanning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The MLQUEUE area is used when a command is being pulled from the block-layer queue and send to the HBA. It has the following levels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nothing (match completion)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log opcode + command of all commands&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 2 plus dump cmd address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 3 plus dump extra junk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of command completion from the HBA, before the completion is being called for the block-layer request. It has the following levels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log disposition, result, opcode + command, and conditionally sense data for failures or non SUCCESS dispositions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 1 but for all command completions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 2 plus dump cmd address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 3 plus dump extra junk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Starting with SLES10 SP2 there is a command &amp;apos;scsi_logging_level&amp;apos; which allows you to set the areas and levels without having to calculate the bit offsets by hand, very convenient if you want to enable a logging level other than 0xffffffff.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A useful setting of the logging level without being buried in logging details is ERROR=3, SCAN=3, MLQUEUE=2, MLCOMPLETE=2, which evaluates to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo 9411 &amp;gt; /proc/sys/dev/scsi/logging_level&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense Data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x00 00 Log Sense Pages Supported&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x02 00 Write Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x03 00 Read Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x05 00 Verify Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x06 00 Non-medium Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0D 00 Current temperature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0E 00 Mfg Date, Start/Stop,Load/Unload Counters&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0F 00 Application Client Log (64 entries)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x10 00 Self-Test Results&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x15 00 Background Media Scan Results&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x18 00 Protocol Specific Log Parameters&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x1A 00 Power State Transitiions&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x2F 00 SMART Status and Temperature Reading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x30 00 Performance Counter Information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x37 00 Performance Statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x38 00 Voltage Monitoring Log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x3C 00 Helium Status Log (0 entries)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;From the SBC-4 document, here is a list of Log Pages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Table 180 — Log page codes and subpage codes for direct access block devices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Log page name Page code a Subpage code a Reference&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Application Client 0Fh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ATA PASS-THROUGH Results 16h 00h SAT-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Background Scan Results 15h 00h 6.4.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Background Operation 15h 02h 6.4.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Buffer Over-Run/Under-Run 01h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cache Memory Statistics 19h 20h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Environmental Limits 0Dh 02h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Environmental Reporting 0Dh 01h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Format Status 08h 00h 6.4.4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;General Statistics and Performance 19h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Group Statistics and Performance (1 to 31) 19h 01h to 1Fh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Informational Exceptions 2Fh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last n Deferred Errors Or Asynchronous Events 0Bh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last n Error Events 07h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical Block Provisioning 0Ch 00h 6.4.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LPS Misalignment 15h 03h 6.4.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non-Medium Error 06h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non-volatile Cache 17h 00h 6.4.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pending Defects 15h 01h 6.4.8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Power Condition Transitions 1Ah 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Protocol-Specific Ports 18h 00h to FEh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read Error Counters 03h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Self-Test Results 10h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Solid State Media 11h 00h 6.4.9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Start-Stop Cycle Counter 0Eh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Log Pages 00h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Log Pages and Subpages 00h FFh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Subpages 01h to 3Fh FFh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Temperature 0Dh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Utilization 0Eh 01h 6.4.10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Verify Error Counters 05h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Write Error Counters 02h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor specific 30h to 3Eh 00h to FEh n/a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;### [scsi errors](https://www.ibm.com/support/knowledgecenter/en/linuxonibm/com.ibm.linux.z.lgdd/lgdd_t_fcp_wrk_actinfo.html)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/class/scsi_device/&amp;lt;device_name&amp;gt;/device/&amp;lt;attribute&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_denied	Flag that indicates whether access to the device is restricted by the FCP channel.The value is 1 if access is denied and 0 if access is permitted.If access is denied to your Linux instance, confirm that your SCSI devices are configured as intended. Also, be sure that you really want to share a SCSI device. For shared access to a SCSI device, preferably use NPIV). You might also use different FCP channels or target ports.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_shared	This attribute is obsolete. The value is always 0.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_readonly	This attribute is obsolete. The value is always 0.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ked	Flag that indicates whether the device is in blocked state (0 or 1).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iocounterbits	The number of bits used for I/O counters.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iodone_cnt	The number of completed or rejected SCSI commands.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioerr_cnt	The number of SCSI commands that completed with an error.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iorequest_cnt	The number of issued SCSI commands.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;queue_type	The type of queue for the SCSI device. The value can be one of the following:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                simple&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ordered&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;model	The model of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rev	The revision of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_level	The SCSI revision level, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type	The type of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vendor	The vendor of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fcp_lun	The LUN of the SCSI device in 64-bit format.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hba_id	The bus ID of the SCSI device.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wwpn	The WWPN of the remote port.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zfcp_access_denied	Flag that indicates whether access to the device is restricted by the FCP channel.The value is 1 if access is denied and 0 if access is permitted. If access is denied to your Linux instance, confirm that your SCSI devices are configured as intended. Also, be sure that you really want to share a SCSI device. For shared access to a SCSI device, preferably use NPIV). You might also use different FCP channels or target ports.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zfcp_in_recovery	Shows if unit is in recovery (0 or 1).Shows if unit is in recovery (2 or 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ lsscsi -dLsv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[14:0:93:0]  disk    HGST     HUH721010AL5200  A21D  /dev/sdi [8:128]  10.0TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  device_blocked=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iocounterbits=32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iodone_cnt=0xa066&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ioerr_cnt=0x3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iorequest_cnt=0xa066&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  queue_depth=254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  queue_type=none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  scsi_level=7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  state=running&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  timeout=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  type=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  dir: /sys/bus/scsi/devices/14:0:93:0  [/sys/devices/pci0000:80/0000:80:03.0/0000:85:00.0/host14/port-14:0/expander-14:0/port-14:0:15/end_device-14:0:15/target14:0:93/14:0:93:0]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Enable-read-write-cache&quot;&gt;&lt;a href=&quot;#Enable-read-write-cache&quot; class=&quot;headerlink&quot; title=&quot;Enable read write cache&quot;&gt;&lt;/a&gt;Enable read write
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="jbod" scheme="http://yoursite.com/tags/jbod/"/>
    
      <category term="scsi" scheme="http://yoursite.com/tags/scsi/"/>
    
      <category term="monitor" scheme="http://yoursite.com/tags/monitor/"/>
    
  </entry>
  
  <entry>
    <title>Bash tips</title>
    <link href="http://yoursite.com/2017/10/18/Bash-tips/"/>
    <id>http://yoursite.com/2017/10/18/Bash-tips/</id>
    <published>2017-10-18T02:33:38.000Z</published>
    <updated>2017-10-18T02:46:27.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot;&gt;&lt;a href=&quot;#Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot; class=&quot;headerlink&quot; title=&quot;[Termination Signals] (https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html)&quot;&gt;&lt;/a&gt;[Termination Signals] (&lt;a href=&quot;https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html&lt;/a&gt;)&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;1 SIGHUP The SIGHUP (“hang-up”) signal is used to report that the user’s terminal is disconnected, perhaps because a network or telephone connection was broken.&lt;/li&gt;
&lt;li&gt;2 SIGINT The SIGINT (program interrupt) signal is sent when the user types the INTR character (normally C-c).&lt;/li&gt;
&lt;li&gt;3 The SIGQUIT signal is similar to SIGINT, except that it’s controlled by a different key-the QUIT character, usually C--and produces a core dump when it terminates the process, just like a program error signal. You can think of this as a program error condition “detected” by the user&lt;/li&gt;
&lt;li&gt;9 The SIGKILL signal is used to cause immediate program termination. It cannot be handled or ignored, and is therefore always fatal. It is also not possible to block this signal&lt;/li&gt;
&lt;li&gt;15 The SIGTERM signal is a generic signal used to cause program termination. Unlike SIGKILL, this signal can be blocked, handled, and ignored. It is the normal way to politely ask a program to terminate.&lt;h3 id=&quot;Trap&quot;&gt;&lt;a href=&quot;#Trap&quot; class=&quot;headerlink&quot; title=&quot;Trap&quot;&gt;&lt;/a&gt;Trap&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;mytrap&lt;/span&gt;&lt;/span&gt; () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; hahahahaha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;trap&lt;/span&gt; mytrap SIGHUP SIGINT SIGQUIT SIGTERM ERR EXIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;myfunc&lt;/span&gt;&lt;/span&gt; () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;trap&lt;/span&gt;  mytrap RETURN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#trap  mytrap EXIT #no output&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;I&#39;ve got a bad feeling about this...&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myfunc | cat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sleep 10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot;&gt;&lt;a href=&quot;#Termination-Signals-https-w
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="bash" scheme="http://yoursite.com/tags/bash/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>About_nfs</title>
    <link href="http://yoursite.com/2017/08/25/About-nfs/"/>
    <id>http://yoursite.com/2017/08/25/About-nfs/</id>
    <published>2017-08-25T09:57:51.000Z</published>
    <updated>2017-08-28T01:27:55.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;nolock&quot;&gt;&lt;a href=&quot;#nolock&quot; class=&quot;headerlink&quot; title=&quot;nolock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://linux.die.net/man/5/nfs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;nolock&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;NLM locking is used for this mount point. When using the nolock option, applications can lock files, but such locks provide exclusion only against other applications running on the same client. Remote applications are not affected by these locks.&lt;/p&gt;
&lt;h3 id=&quot;file-lock&quot;&gt;&lt;a href=&quot;#file-lock&quot; class=&quot;headerlink&quot; title=&quot;file lock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://docstore.mik.ua/orelly/networking_2ndEd/nfs/ch11_02.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;file lock&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The NFS (Versions 2 and 3) protocol does not support file locking, but the NFS environment supports an ancillary protocol called NLM, which originally stood for “Network Lock Manager.” When an NFS filesystem on an NFS client gets a request to lock a file, instead of an NFS remote procedure call, it generates an NLM remote procedure call.&lt;/p&gt;
&lt;p&gt;The NLM protocol consists of remote procedure calls that pattern fcntl arguments and results. Because blocking locks are supported (a process blocks waiting for a lock that conflicts with another holder), the NLM protocol has the notion of callbacks, from the file server to the NLM client to notify that a lock is available. In this way, the NLM client sometimes acts as an RPC server in order to receive delayed results from lock calls.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;nolock&quot;&gt;&lt;a href=&quot;#nolock&quot; class=&quot;headerlink&quot; title=&quot;nolock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://linux.die.net/man/5/nfs&quot; target=&quot;_blank&quot; rel=&quot;exter
    
    </summary>
    
      <category term="nfs" scheme="http://yoursite.com/categories/nfs/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="nfs" scheme="http://yoursite.com/tags/nfs/"/>
    
  </entry>
  
  <entry>
    <title>NIC issues</title>
    <link href="http://yoursite.com/2017/08/14/NIC-issues/"/>
    <id>http://yoursite.com/2017/08/14/NIC-issues/</id>
    <published>2017-08-14T11:46:34.000Z</published>
    <updated>2017-12-21T07:48:35.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;Check-command&quot;&gt;&lt;a href=&quot;#Check-command&quot; class=&quot;headerlink&quot; title=&quot;Check command&quot;&gt;&lt;/a&gt;Check command&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ip &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; link/ifconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethttool -S dev | grep -Ei &lt;span class=&quot;string&quot;&gt;&#39;err|miss|dis|drop|crc&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -n DEV,ETCP 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# get firbe module detail&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethttool -m dev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Kernel-detail&quot;&gt;&lt;a href=&quot;#Kernel-detail&quot; class=&quot;headerlink&quot; title=&quot;Kernel detail&quot;&gt;&lt;/a&gt;Kernel detail&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/sys/class/net/em2/statistics/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/proc/net/dev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;RHEL-solutions&quot;&gt;&lt;a href=&quot;#RHEL-solutions&quot; class=&quot;headerlink&quot; title=&quot;RHEL solutions&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.com/solutions/21301&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RHEL solutions&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;System dropping network packets&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;High number of drop counters like drop, discard, err or error, fifo, buf or buffer, fail, miss, OOB, full counters in ethtool -S&lt;/li&gt;
&lt;li&gt;High number of dropped, error, overrun, or frame counters in ifconfig&lt;/li&gt;
&lt;li&gt;What is the first thing to try when I see my network interfaces dropping packets?&lt;br&gt;Root Cause&lt;br&gt;Counters like “discard” or “drop” in the output of ethtool -S ethX are caused by the exhaustion of the receive ring buffer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The ring buffer is a block of physical memory on the NIC.&lt;/p&gt;
&lt;p&gt;Each packet received by the NIC is stored in this memory while an interrupt is sent to the kernel to fetch the packet into kernel memory.&lt;/p&gt;
&lt;p&gt;If the available buffer is filling up faster than the kernel can take the packets, there will be discarded packets.&lt;/p&gt;
&lt;p&gt;Verify packet loss with:&lt;br&gt;[root@host]# ip -s -s link&lt;br&gt;Verify discards/drops/etc with:&lt;br&gt;[root@host]# ethtool -S ethX&lt;br&gt;Verify RX ring buffer current and maximum settings with:&lt;br&gt;[root@host]# ethtool -g ethX&lt;/p&gt;
&lt;h5 id=&quot;0-05-packet-drop-rate&quot;&gt;&lt;a href=&quot;#0-05-packet-drop-rate&quot; class=&quot;headerlink&quot; title=&quot;0.05% packet drop rate&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.com/solutions/742043&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;0.05% packet drop rate&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;One of TCP’s main functions is to preserve a reliable data stream for applications by identifying and retrying any lost packets. It is normal operation for an underlying network to lose packets, for many different reasons, and for TCP be used and to hide this fact from application layers. Applications using unreliable transports (the major one being UDP) are expected to not care about the unreliability of the network. Applications which do care should use a reliable transport, eg. TCP (or more recently, SCTP) or implement their own reliability mechanisms.&lt;/p&gt;
&lt;p&gt;The only impact of packet loss in the underlying network (which includes the device-drivers and lower network layer code which is counting the drops you are seeing) is a reduction in performance from the peak network speed. The reduction is dependent, non-linearly, on the packet drop ratio, and also on the traffic type. For bulk transfers (such as file-transfer) over TCP a drop ratio of under 0.1% results in a very small reduction in throughput – assuming that the Select Acknowledgement (SACK) TCP option is enabled on both systems. If SACK is disabled on either system there will be a measurable reduction in throughput if the drop rate exceeds 0.001%. On the other hand, thin stream traffic, where there is often no outstanding data for the transmitter to send, will be affected more as the need to retry lost packets will only be noticed after a time out rather than being detectable when data arrives out-of-order. Examples of thin-stream traffic include request-response and interactive connections.&lt;/p&gt;
&lt;h4 id=&quot;ifconfig-ip&quot;&gt;&lt;a href=&quot;#ifconfig-ip&quot; class=&quot;headerlink&quot; title=&quot;ifconfig/ip&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/184604/whats-the-difference-between-errors-dropped-overruns-and-frame-fiel&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ifconfig/ip&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;RX&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;frame/length counts only misaligned frames, it means frames with a length not divisible by 8. Because of that length is not a valid frame and it is simply discarded (too-short frames and too-long frames)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;overruns/fifo counts that times when there is fifo overruns, caused by the rate at which the buffer gets full and the kernel isn’t able to reclaim the buffer&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No cpu resource, interrupt not balance and not affinity, eg: all nic interrupt in core0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://serverfault.com/questions/528290/ifconfig-eth0-rx-dropped-packets/601186&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;dropped(normal) counts&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Softnet backlog full&lt;/li&gt;
&lt;li&gt;Bad / Unintended VLAN tags&lt;/li&gt;
&lt;li&gt;Unknown / Unregistered protocols&lt;/li&gt;
&lt;li&gt;IPv6 frames when the server is not configured for IPv6&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dropped (in my opinion)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Overloading&lt;/li&gt;
&lt;li&gt;Hardware issue&lt;ul&gt;
&lt;li&gt;NIC ring buffer too slower&lt;/li&gt;
&lt;li&gt;NIC/optical module issue&lt;/li&gt;
&lt;li&gt;PCIE issue&lt;/li&gt;
&lt;li&gt;Bad cable&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://blog.hyfather.com/blog/2013/03/04/ifconfig/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TX&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;aborted transmission&lt;/li&gt;
&lt;li&gt;errors due to carrirer&lt;/li&gt;
&lt;li&gt;fifo err&lt;/li&gt;
&lt;li&gt;heartbeat erros&lt;/li&gt;
&lt;li&gt;window err&lt;/li&gt;
&lt;li&gt;collisions is the number of transmissions terminated due to CSMA/CD (Carrier Sense Multiple Access with Collision Detection).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If NIC driver loss packages, linux don ‘t know, you can’t count it in linux&lt;br&gt;Some overrun(ifconfig) has the same means with dropped(ethtool)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rx_missed_errors&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;real drop = rx_dropped(kernel drop) + rx_missed_errors&lt;ul&gt;
&lt;li&gt;To reduce DMA skb(socket buffer) to test, eg: ethtool -G eth1 rx 48, ethtool -G eth1 tx 48, there are a lot of rx_missed_err &lt;/li&gt;
&lt;li&gt;这样看来rx_no_buffer_count 指的是在网卡通过DMA将设备FIFO中的skb-&amp;gt;data传送到rx_buffer_info时，发现对应的rx_buffer_info还没有unmap，也就无法送到主存。说到底，这其实和软中断处理的速度有关。&lt;br&gt;猜测rx_missed_errors可能与硬中断有关。也就是在DMA传送完，发送硬中断之前，网卡的FIFO缓冲已经满了，导致接收的数据要立即丢掉。这个也可以验证：&lt;br&gt;首先卸载igb模块，然后insmod igb InterruptThrottleRate=10, 只让网卡每秒产生10个中断。关闭流控ethtool -A eth1 autoneg off , ethtool -A eth1 rx off , ethtool -A eth1 tx off ，再把DMA缓冲区调至最大ethtool -G eth1 rx 4096 , ethtool -G eth1 tx 4096。可以发现原来不增长或几乎不增长的rx_missed_errors 开始大幅增长，果然这个就是和网卡硬件的FIFO缓冲区有关。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;About-MPC-and-RNBC&quot;&gt;&lt;a href=&quot;#About-MPC-and-RNBC&quot; class=&quot;headerlink&quot; title=&quot;About MPC and RNBC&quot;&gt;&lt;/a&gt;About MPC and RNBC&lt;/h4&gt;&lt;p&gt;7.19.5 Missed Packets Count – MPC (0x4010; RC)&lt;br&gt;Counts the number of missed packets. Packets are missed when the receive FIFO has insufficient space&lt;br&gt;to store the incoming packet. This can be caused because of too few buffers allocated, or because there&lt;br&gt;is insufficient bandwidth on the PCI bus. Events setting this counter causes ICR.Rx Miss, the Receiver&lt;br&gt;Overrun Interrupt, to be set. This register does not increment if receives are not enabled.&lt;br&gt;These packets are also counted in the Total Packets Received register as well as in Total Octets&lt;br&gt;Received.&lt;/p&gt;
&lt;p&gt;7.19.34 Receive No Buffers Count – RNBC (0x40A0; RC)&lt;br&gt;This register counts the number of times that frames were received when there were no available&lt;br&gt;buffers in host memory to store those frames (receive descriptor head and tail pointers were equal).&lt;br&gt;The packet is still received if there is space in the FIFO. This register only increments if receives are enabled (RCTL.RXEN is set).&lt;br&gt;This register does not increment when flow control packets are received.&lt;/p&gt;
&lt;h4 id=&quot;Tools&quot;&gt;&lt;a href=&quot;#Tools&quot; class=&quot;headerlink&quot; title=&quot;Tools&quot;&gt;&lt;/a&gt;Tools&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://jaseywang.me/2014/08/16/ifconfig-%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%97%E6%AE%B5errors-dropped-overruns/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ethtool&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Physical layer&lt;ul&gt;
&lt;li&gt;Speed&lt;/li&gt;
&lt;li&gt;Duplex&lt;/li&gt;
&lt;li&gt;CRC&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://techblog.netflix.com/2015/11/linux-performance-analysis-in-60s.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sar&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sar -n TCP,ETCP 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:30 AM  active/s passive/s    iseg/s    oseg/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:31 AM      0.00      0.00      8.51      6.38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:30 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:31 AM      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;active/s: Number of locally-initiated TCP connections per second (e.g., via connect()).&lt;br&gt;passive/s: Number of remotely-initiated TCP connections per second (e.g., via accept()).&lt;br&gt;retrans/s: Number of TCP retransmits per second.&lt;br&gt;The active and passive counts are often useful as a rough measure of server load: number of new accepted connections (passive), and number of downstream connections (active). It might help to think of active as outbound, and passive as inbound, but this isn’t strictly true (e.g., consider a localhost to localhost connection). &lt;/p&gt;
&lt;p&gt;Retransmits are a sign of a network or server issue; it may be an unreliable network (e.g., the public Internet), or it may be due a server being overloaded and dropping packets. The example above shows just one new TCP connection per-second. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/21113846/why-packet-drop-is-not-captured-under-ifconfig&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About iptables&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;This is because iptables and ifconfig statistics refer to different layers in the protocol stack. ifconfig statistics are for the NIC (Physical and MAC layers) while iptables rules execute once frames are received by the NIC and delivered to the kernel (INPUT) or before the packet is delivered to layer 2 in the protocol stack (for OUTPUT)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;About-irqbalance&quot;&gt;&lt;a href=&quot;#About-irqbalance&quot; class=&quot;headerlink&quot; title=&quot;About irqbalance&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://community.mellanox.com/docs/DOC-2123&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About irqbalance&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Irqbalance is a Linux daemon that help to balance the CPU load generated by interrupts across all CPUs. Irqbalance identifies the highest volume interrupt sources, and isolates them to a single CPU, so that load is spread as much as possible over an entire processor set, while minimizing cache hit rates for irq handlers&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#debug irqbalance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;irqbalance &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/sites/default/files/attachments/201501-perf-brief-low-latency-tuning-rhel7-v1.1.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;perf-brief-low-latency-tuning-rhel7&lt;/a&gt;&lt;br&gt;The irqbalance service continues to be enabled by default in Red Hat Enterprise Linux 7. It&lt;br&gt;remains an important service that helps spread IRQ-processing load across multiple processors dynamically.&lt;/p&gt;
&lt;p&gt;For more performance&lt;br&gt;here could be specific workloads or configuration where stopping irqbalance and using mlnx_tune is more optimal and recommended.&lt;/p&gt;
&lt;h4 id=&quot;nic-interrupt-rates&quot;&gt;&lt;a href=&quot;#nic-interrupt-rates&quot; class=&quot;headerlink&quot; title=&quot;nic interrupt rates&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/en/SSQPD3_2.6.0/com.ibm.wllm.doc/usingethtoolrates.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;nic interrupt rates&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;adaptive-rx Dynamic control to decrease RX latency at low packet rates and increase throughput at high packet rates&lt;/li&gt;
&lt;li&gt;rx-usecs This is the number of microseconds to wait before raising an RX interrupt after a packet has been received. When rx-usecs is set to 0 rx-frames is used&lt;/li&gt;
&lt;li&gt;rx-frames    This is the number of frames to queue up before raising an RX interrupt.&lt;/li&gt;
&lt;li&gt;adaptive-tx Dynamic control to decrease TX latency at low packet rates and increase throughput at high packet rates&lt;/li&gt;
&lt;li&gt;tx-usecs This is the number of microseconds to wait before raising an TX interrupt after a packet has been sent. When tx-usecs is set to 0 tx-frames is used&lt;/li&gt;
&lt;li&gt;tx-frames This is the number of frames to queue up before raising an TX interrupt&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#10GbE 82599 setting&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls /sys/class/net | egrep &lt;span class=&quot;string&quot;&gt;&#39;(eth|en|p|em|br|bond)&#39;&lt;/span&gt; | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; nic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -C &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx-usecs 0 tx-usecs 0 adaptive-rx off adaptive-tx off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -G &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx 4096 tx 4096 &lt;span class=&quot;comment&quot;&gt;#for latency, you could reduce the value,rx-ring,tx-ring #10GbE 82599, 25GbE , 50GbE has more&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -N &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ifconfig &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; mtu 9000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/modprobe.d/ixgbe.conf &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe LRO=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe InterruptThrottleRate=16000,16000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;About-interruptthrottlerate&quot;&gt;&lt;a href=&quot;#About-interruptthrottlerate&quot; class=&quot;headerlink&quot; title=&quot;About interruptthrottlerate&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.kernel.org/doc/Documentation/networking/e1000.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About interruptthrottlerate&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Setting InterruptThrottleRate to a value greater or equal to 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will program the adapter to send out a maximum of that many interrupts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;per second, even &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; more packets have come in. This reduces interrupt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;load on the system and can lower CPU utilization under heavy load,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;but will increase latency as packets are not processed as quickly.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The default behaviour of the driver previously assumed a static&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;InterruptThrottleRate value of 8000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;About-LRO&quot;&gt;&lt;a href=&quot;#About-LRO&quot; class=&quot;headerlink&quot; title=&quot;About LRO&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://downloadmirror.intel.com/22919/eng/README.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About LRO&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LRO&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;---&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Large Receive Offload (LRO) is a technique &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; increasing inbound throughput&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;of high-bandwidth network connections by reducing CPU overhead. It works by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;aggregating multiple incoming packets from a single stream into a larger &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;buffer before they are passed higher up the networking stack, thus reducing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;the number of packets that have to be processed. LRO combines multiple &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ethernet frames into a single receive &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; the stack, thereby potentially &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;decreasing CPU utilization &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; receives.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Support-for-UDP-RSS&quot;&gt;&lt;a href=&quot;#Support-for-UDP-RSS&quot; class=&quot;headerlink&quot; title=&quot;Support for UDP RSS&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://downloadmirror.intel.com/22919/eng/README.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support for UDP RSS&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Retrieves the &lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt; options &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; the specified network traffic type.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -N --config-nfc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Configures the receive network flow classification.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   m|v|t|s|d|f|n|r...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Configures the &lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt; options &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; the specified network traffic type.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     udp4    UDP over IPv4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     udp6    UDP over IPv6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     f   Hash on bytes 0 and 1 of the Layer 4 header of the rx packet.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     n   Hash on bytes 2 and 3 of the Layer 4 header of the rx packet.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The following is an example using udp4 (UDP over IPv4):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To include UDP port numbers &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; RSS hashing run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -N ethX rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To exclude UDP port numbers from RSS hashing run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -N ethX rx-flow-hash udp4 sd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To display UDP hashing current configuration run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -n ethX rx-flow-hash udp4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Ethool-S&quot;&gt;&lt;a href=&quot;#Ethool-S&quot; class=&quot;headerlink&quot; title=&quot;Ethool -S&quot;&gt;&lt;/a&gt;Ethool -S&lt;/h3&gt;&lt;h4 id=&quot;rx-tx-ring&quot;&gt;&lt;a href=&quot;#rx-tx-ring&quot; class=&quot;headerlink&quot; title=&quot;rx,tx-ring&quot;&gt;&lt;/a&gt;rx,tx-ring&lt;/h4&gt;&lt;p&gt;ethtool -G $nic rx 4096 tx 4096&lt;/p&gt;
&lt;p&gt;rx_no_buffer_count,there was nowhere to DMA the packet&lt;br&gt;DMA skb-data to rx-buffer-info(linux RAM, soft-interrupt). &lt;/p&gt;
&lt;p&gt;RNBC is a warning sign of a slow drain from the MAC and can be treated by adding more buffers.&lt;br&gt;There will be times when the RNBC will go up, but it will look like the stack and driver have a ton of buffers but work is not being done.  If you have a task that is eating up the CPU, the ISR or polling routines won’t refill the buffers fast enough and RNBC will happen.&lt;/p&gt;
&lt;p&gt;Imagine we have a slow CPU, but a wicked fastbus.  The software is very slow to process the descriptors and return them, but once the descriptors are given to the hardware, it empties the backlog (read the FIFO) faster than the incoming frames are filling the FIFO.  Returning to our kitchen sink analogy, the water is coming in at a fairly constant rate.  But imagine the stopper is down, making the sink fill up.  Just before it over flows, the drain is opened and down it goes.  Once the water doesn’t go down the drain would be the same moment our RNBC would be incremented.  The kitchen sink itself becomes our FIFO and if the FIFO is big enough, it can save frame for quiet some time.  This is 1 Gigabit (or faster) that we’re talking about, so with a good sized FIFO (24K RX for example) that’s only 375 frames at 64 bytes, or 267microseconds of data.  That’s not very much time.  But in a world full of 2 and 3 Gigahertz CPUs that’s long enough.  &lt;/p&gt;
&lt;p&gt;rx_missed_error,rx_no_buffer_count happened enough times that packets were dropped&lt;br&gt;MPC is a failure condition leading to dropped packets and can be treated with more buffers and faster interconnect buses&lt;/p&gt;
&lt;p&gt;Thank goodness things like TCP/IP will tell the applications data has been dropped, but if using a lossy frame type like UDP its just too bad, your frame is lost to the ether. &lt;/p&gt;
&lt;p&gt;Imagine if you will, an interconnect bus that is slow.  Very slow.  Like a PCI 33hz bus.  Now attach that to a full line rate 1 Gigabit 64 byte packet data stream.  At one descriptor per packet, that’s about 1.4 million descriptors per second.  In this case the software is very fast, faster than the bus.  So the number of available descriptors is always kept a level that keeps the buffers available to the hardware to conduct a DMA.  But because the bus is so slow, data backs up into the FIFO.  Now that is what the FIFO is for.  By buffering the packet, it tries to give the packet the best chance at making into host memory alive.  In our slow case, the buffering isn’t enough and the FIFO fills up.  It is draining slower than its filling, its just a like a slow draining kitchen sink.  Eventually it overflows and makes a big mess.  Thank goodness things like TCP/IP will tell the applications data has been dropped, but if using a lossy frame type like UDP its just too bad, your frame is lost to the ether.  If you need to keep track, but need to use UDP, you’ll need to monitor the MPC count and decide what you want to do when it goes up.&lt;/p&gt;
&lt;p&gt;[猜测rx_missed_errors可能与硬中断有关。也就是在DMA传送完，发送硬中断之前，网卡的FIFO缓冲已经满了，导致接收的数据要立即丢掉。这个也可以验证：首先卸载igb模块，然后insmod igb InterruptThrottleRate=10, 只让网卡每秒产生10个中断。关闭流控ethtool -A eth1 autoneg off , ethtool -A eth1 rx off , ethtool -A eth1 tx off ，再把DMA缓冲区调至最大ethtool -G eth1 rx 4096 , ethtool -G eth1 tx 4096。可以发现原来不增长或几乎不增长的rx_missed_errors 开始大幅增长]&lt;br&gt;(&lt;a href=&quot;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;rx_fifo_errors,&lt;br&gt;rx_over_errors&lt;/p&gt;
&lt;h3 id=&quot;ifconfig&quot;&gt;&lt;a href=&quot;#ifconfig&quot; class=&quot;headerlink&quot; title=&quot;ifconfig&quot;&gt;&lt;/a&gt;ifconfig&lt;/h3&gt;&lt;p&gt;frame counts only misaligned frames, it means frames with a length not divisible by 8. Because of that length is not a valid frame and it is simply discarded.&lt;/p&gt;
&lt;p&gt;Meanwhile errors counts CRC errors, too-short frames and too-long frames.&lt;/p&gt;
&lt;p&gt;overruns counts that times when there is fifo overruns, caused by the rate at which the buffer gets full and the kernel isn’t able to empty it.&lt;/p&gt;
&lt;p&gt;overruns&lt;br&gt;overruns，表示这个数据包还没有被进入到网卡的接收缓存fifo队列就被丢掉，因此此时网卡的fifo是满的。为什么fifo会是满的？因为系统繁忙，来不及响应网卡中断，导致网卡里的数据包没有及时的拷贝到系统内存，fifo是满的就导致后面的数据包进不来，即这个数据包被网卡硬件丢掉。所以，个人觉得遇到overruns非0，需要检测cpu负载与cpu中断情况。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cisco.com/c/en/us/support/docs/dial-access/asynchronous-connections/15286-serial-overruns.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Q. What are overruns on a serial interface?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A. Overruns appear in the output of the show interface Serial 0 command when the serial receiver hardware is unable to hand received data to a hardware buffer because the input rate exceeds the receiver’s ability to handle the data.&lt;br&gt;This occurs due to a limitation of the hardware. Overruns occur when the internal First In, First Out (FIFO) buffer of the chip is full, but is still tries to handle incoming traffic. The serial controller chip has limited internal FIFO.&lt;br&gt;Some chips, for example, have only 256 bytes of buffer space. Data from the network is received into the buffer, whereupon the chip attempts to move the data from the buffer to the router’s shared memory for the CPU to process. If the chip is not able to move the data from its internal FIFO buffer into shared memory faster than the rate at which data is received on the interface, then the internal FIFO buffer is full, incoming data is dropped, and the overrun counter is incremented.&lt;/p&gt;
&lt;p&gt;droppeds&lt;br&gt;dropped，表示这个数据包已经进入到网卡的接收缓存fifo队列，并且开始被系统中断处理准备进行数据包拷贝（从网卡缓存fifo队列拷贝到系统内存），但由于此时的系统原因（比如内存不够等）导致这个数据包被丢掉，即这个数据包被Linux系统丢掉。&lt;/p&gt;
&lt;h4 id=&quot;NFS-hangs&quot;&gt;&lt;a href=&quot;#NFS-hangs&quot; class=&quot;headerlink&quot; title=&quot;NFS hangs&quot;&gt;&lt;/a&gt;NFS hangs&lt;/h4&gt;&lt;p&gt;NFS server tcp zero window problem&lt;/p&gt;
&lt;p&gt;Zero Window is something to investigate. TCP Zero Window is when the Window size in a machine remains at zero for a specified amount of time. This means that a client is not able to receive further information at the moment, and the TCP transmission is halted until it can process the information in its receive buffer.&lt;/p&gt;
&lt;h4 id=&quot;About-FEC&quot;&gt;&lt;a href=&quot;#About-FEC&quot; class=&quot;headerlink&quot; title=&quot;About FEC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.qlogic.com/Resources/Documents/WhitePapers/Adapters/Localized/White_Paper-25Gb_Ethernet_SN0530917-05_CN.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About FEC&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;IEEE 标准指定了两个底板和铜接口。这些接口的目标不同，因&lt;br&gt;此接口存在不同。–S 短距离接口旨在支持无需转发纠错（FEC）&lt;br&gt;的高质量电缆，以最大限度地降低延迟。全距离接口旨在实现&lt;br&gt;尽可能低的电缆或背板成本以及尽可能长的距离，这需要使用&lt;br&gt;FEC。FEC 选项包括 BASE-R FEC（也称为 Fire Code）和 RS-FEC（也&lt;br&gt;称为 Reed-Solomon）。RS-FEC 已用于一系列应用，包括数据存&lt;br&gt;储卫星传播。BASE-R FEC 是一种新型技术，特别适合纠正背板&lt;br&gt;通道中由于接收均衡器的错误传播而导致的突发错误。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Check-command&quot;&gt;&lt;a href=&quot;#Check-command&quot; class=&quot;headerlink&quot; title=&quot;Check command&quot;&gt;&lt;/a&gt;Check command&lt;/h4&gt;&lt;figure class=&quot;highlight bash
    
    </summary>
    
      <category term="network" scheme="http://yoursite.com/categories/network/"/>
    
    
      <category term="nic" scheme="http://yoursite.com/tags/nic/"/>
    
      <category term="ethtool" scheme="http://yoursite.com/tags/ethtool/"/>
    
      <category term="driver" scheme="http://yoursite.com/tags/driver/"/>
    
      <category term="irqbalance" scheme="http://yoursite.com/tags/irqbalance/"/>
    
  </entry>
  
  <entry>
    <title>upgrade hgst JBOD</title>
    <link href="http://yoursite.com/2017/07/31/upgrade-hgst-JBOD/"/>
    <id>http://yoursite.com/2017/07/31/upgrade-hgst-JBOD/</id>
    <published>2017-07-31T09:57:28.000Z</published>
    <updated>2017-12-06T09:41:06.000Z</updated>
    
    <content type="html">&lt;p&gt;get JBOD encolsure firmware version&lt;br&gt;sg_scan  -i | grep -i 1ES0059  -B 1&lt;br&gt;/dev/sg65: scsi14 channel=0 id=58 lun=0&lt;br&gt;HGST 4U60_STOR_ENCL 0210 [rmb=0 cmdq=1 pqual=0 pdev=0xd]&lt;/p&gt;
&lt;p&gt;upgrade firmware&lt;br&gt;[root@testhost1 fw]# ./hgst_upg_tool -d /dev/sg65 -f eros_4.2.5.0_CombinedImage.bin –m 7&lt;/p&gt;
&lt;p&gt;upgrade hdd firmware version&lt;br&gt;rpm -ivh hugo-6.1.2-1.x86_64.rpm&lt;br&gt;HUS726060AL5210 is HDD model&lt;/p&gt;
&lt;p&gt;update -f ./APGNAD05.bin -m HUS726060AL5210 &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;get JBOD encolsure firmware version&lt;br&gt;sg_scan  -i | grep -i 1ES0059  -B 1&lt;br&gt;/dev/sg65: scsi14 channel=0 id=58 lun=0&lt;br&gt;HGST 4U60_STOR_E
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>grubby</title>
    <link href="http://yoursite.com/2017/07/12/grub/"/>
    <id>http://yoursite.com/2017/07/12/grub/</id>
    <published>2017-07-12T09:48:19.000Z</published>
    <updated>2017-07-12T09:52:27.000Z</updated>
    
    <content type="html">&lt;p&gt;CentOS 7 add kernel parameter&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grubby --remove-args=&lt;span class=&quot;string&quot;&gt;&quot;argX argY&quot;&lt;/span&gt; --args=&lt;span class=&quot;string&quot;&gt;&quot;argA argB&quot;&lt;/span&gt; --update-kernel /boot/kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --update-kernel=ALL --args=&lt;span class=&quot;string&quot;&gt;&#39;scsi_mod.use_blk_mq=y dm_mod.use_blk_mq=y&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;set default boot&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grubby --info=ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-3.10.0-514.6.1.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-3.10.0-514.6.1.el7.x86_64.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (3.10.0-514.6.1.el7.x86_64) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-3.10.0-327.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-3.10.0-327.el7.x86_64.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;non linux entry&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --set-default /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --info /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;CentOS 7 add kernel parameter&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span c
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="grub" scheme="http://yoursite.com/tags/grub/"/>
    
  </entry>
  
  <entry>
    <title>Enable blk-mq in centos 7.3</title>
    <link href="http://yoursite.com/2017/07/12/Enable-blk-mq-in-centos-7-3/"/>
    <id>http://yoursite.com/2017/07/12/Enable-blk-mq-in-centos-7-3/</id>
    <published>2017-07-12T07:36:57.000Z</published>
    <updated>2017-07-12T08:12:30.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;Does-it-mean-brute-force-I-found-the-answer-in-a-slide-that-resolve-the-most-important-issue&quot;&gt;&lt;a href=&quot;#Does-it-mean-brute-force-I-found-the-answer-in-a-slide-that-resolve-the-most-important-issue&quot; class=&quot;headerlink&quot; title=&quot;Does it mean brute force, I found the answer in a slide that resolve the most important issue&quot;&gt;&lt;/a&gt;Does it mean brute force, I found the answer in a slide that resolve the most important issue&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://events.linuxfoundation.org/sites/events/files/slides/scsi.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;scsi-mq&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/7.2_Release_Notes/storage.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RHEL7.2 release note&lt;/a&gt;&lt;br&gt;To enable scsi-mq, specify scsi_mod.use_blk_mq=y on the kernel command line&lt;br&gt;can also be configured to use the blk-mq infrastructure if the dm_mod.use_blk_mq=y kernel option is specified, The default value is n (disabled).&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/default/grub &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_TIMEOUT=5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_DISTRIBUTOR=&lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$(sed &#39;s, release .*$,,g&#39; /etc/system-release)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_DEFAULT=saved&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_DISABLE_SUBMENU=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_TERMINAL_OUTPUT=&lt;span class=&quot;string&quot;&gt;&quot;console&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_CMDLINE_LINUX=&lt;span class=&quot;string&quot;&gt;&quot;crashkernel=auto rd.md.uuid=c13f982e:9af61476:91e4a31e:1bc18c08 scsi_mod.use_blk_mq=y dm_mod.use_blk_mq=y rhgb quiet&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GRUB_DISABLE_RECOVERY=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ reboot&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Make-sure-enable-it&quot;&gt;&lt;a href=&quot;#Make-sure-enable-it&quot; class=&quot;headerlink&quot; title=&quot;Make sure enable it&quot;&gt;&lt;/a&gt;Make sure enable it&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tree /sys/class/block/sdl/mq /sys/class/block/dm-0/mq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Does-it-mean-brute-force-I-found-the-answer-in-a-slide-that-resolve-the-most-important-issue&quot;&gt;&lt;a href=&quot;#Does-it-mean-brute-force-I-f
    
    </summary>
    
      <category term="Performance" scheme="http://yoursite.com/categories/Performance/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="scsi" scheme="http://yoursite.com/tags/scsi/"/>
    
      <category term="io" scheme="http://yoursite.com/tags/io/"/>
    
      <category term="performance" scheme="http://yoursite.com/tags/performance/"/>
    
  </entry>
  
  <entry>
    <title>Hot-plugin scan/rescan scsi</title>
    <link href="http://yoursite.com/2017/07/12/Hot-plugin-scan-rescan-scsi/"/>
    <id>http://yoursite.com/2017/07/12/Hot-plugin-scan-rescan-scsi/</id>
    <published>2017-07-12T05:15:49.000Z</published>
    <updated>2017-07-12T05:27:03.000Z</updated>
    
    <content type="html">&lt;h5 id=&quot;What-is-h-c-t-l&quot;&gt;&lt;a href=&quot;#What-is-h-c-t-l&quot; class=&quot;headerlink&quot; title=&quot;What is h c t l&quot;&gt;&lt;/a&gt;What is h c t l&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;          h == hostadapter id (first one being 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          c == SCSI channel on hostadapter (first one being 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          t == ID (target)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          l == LUN (first one being 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# lsscsi man page&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       Generic SCSI devices can also be accessed via the bsg driver &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; Linux.  By default, the bsg driver&lt;span class=&quot;string&quot;&gt;&#39;s device node names  are  of  the  form&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &#39;&lt;/span&gt;/dev/bsg/H:C:T:L&lt;span class=&quot;string&quot;&gt;&#39;.  So,  for example, the SCSI device shown by this utility on a line starting with the tuple &#39;&lt;/span&gt;6:0:1:2&lt;span class=&quot;string&quot;&gt;&#39; could be accessed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       via the bsg driver with the &#39;&lt;/span&gt;/dev/bsg/6:0:1:2&lt;span class=&quot;string&quot;&gt;&#39; device node name.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Add-the-scsi-device&quot;&gt;&lt;a href=&quot;#Add-the-scsi-device&quot; class=&quot;headerlink&quot; title=&quot;Add the scsi device&quot;&gt;&lt;/a&gt;Add the scsi device&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;- - -&quot;&lt;/span&gt; &amp;gt; /sys/class/scsi_host/host&amp;lt;h&amp;gt;/scan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;c t l&quot;&lt;/span&gt; &amp;gt;  /sys/class/scsi_host/host&amp;lt;h&amp;gt;/scan&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Refresh-the-scsi-device&quot;&gt;&lt;a href=&quot;#Refresh-the-scsi-device&quot; class=&quot;headerlink&quot; title=&quot;Refresh the scsi device&quot;&gt;&lt;/a&gt;Refresh the scsi device&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /sys/block/sdau/device/rescan &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /sys/class/scsi_device/h:c:t:l/device/rescan&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Remove-the-scsi-device&quot;&gt;&lt;a href=&quot;#Remove-the-scsi-device&quot; class=&quot;headerlink&quot; title=&quot;Remove the scsi device&quot;&gt;&lt;/a&gt;Remove the scsi device&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /sys/class/scsi_device/h:c:t:l/device/delete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /sys/block/&amp;lt;dev&amp;gt;/device/delete&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;http://fibrevillage.com/storage/279-hot-add-remove-rescan-of-scsi-devices-on-linux&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;What-is-h-c-t-l&quot;&gt;&lt;a href=&quot;#What-is-h-c-t-l&quot; class=&quot;headerlink&quot; title=&quot;What is h c t l&quot;&gt;&lt;/a&gt;What is h c t l&lt;/h5&gt;&lt;figure class=&quot;highli
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="mem" scheme="http://yoursite.com/tags/mem/"/>
    
  </entry>
  
  <entry>
    <title>Memory_linux</title>
    <link href="http://yoursite.com/2017/07/08/Memory-linux/"/>
    <id>http://yoursite.com/2017/07/08/Memory-linux/</id>
    <published>2017-07-08T03:08:46.000Z</published>
    <updated>2017-07-12T05:31:45.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Process-memory&quot;&gt;&lt;a href=&quot;#Process-memory&quot; class=&quot;headerlink&quot; title=&quot;Process memory&quot;&gt;&lt;/a&gt;Process memory&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;/proc/[pid]/statm
       Provides information about memory usage, measured in pages.
       The columns are:

           size       (1) total program size
                      (same as VmSize in /proc/[pid]/status)
           resident   (2) resident set size
                      (same as VmRSS in /proc/[pid]/status)
           shared     (3) number of resident shared pages (i.e., backed by a file)
                      (same as RssFile+RssShmem in /proc/[pid]/status)
           text       (4) text (code)
           lib        (5) library (unused since Linux 2.6; always 0)
           data       (6) data + stack
           dt         (7) dirty pages (unused since Linux 2.6; always 0)
&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /proc/3760/statm &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400865 96456 37653 27355 0 157019 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Second field means res (resident)&lt;br&gt;pmap $(pgrep bash)&lt;/p&gt;
&lt;p&gt;There are some of share library in each resident&lt;/p&gt;
&lt;p&gt;If you want get share library memory consumption.&lt;br&gt;/proc/[pid]/smaps (since Linux 2.6.14)&lt;br&gt;              This file shows memory consumption for each of the process’s&lt;br&gt;              mappings.  (The pmap(1) command displays similar information,&lt;br&gt;              in a form that may be easier for parsing.)&lt;/p&gt;
&lt;h4 id=&quot;Slab&quot;&gt;&lt;a href=&quot;#Slab&quot; class=&quot;headerlink&quot; title=&quot;Slab&quot;&gt;&lt;/a&gt;Slab&lt;/h4&gt;&lt;p&gt;In-kernel data structures cache.&lt;/p&gt;
&lt;p&gt;Cache pool for often userd dupulication objects&lt;br&gt;you could found these objects from slabtop&lt;/p&gt;
&lt;p&gt;Get all slabsize&lt;br&gt;awk ‘BEGIN{sum=0;}{sum=sum+$3*$4;}END{print sum/1024/1024}’ /proc/slabinfo MB&lt;/p&gt;
&lt;h4 id=&quot;Page-table&quot;&gt;&lt;a href=&quot;#Page-table&quot; class=&quot;headerlink&quot; title=&quot;Page table&quot;&gt;&lt;/a&gt;Page table&lt;/h4&gt;&lt;p&gt;awk ‘$0~/PageTables/ {print $2}’ /proc/meminfo KB&lt;/p&gt;
&lt;h4 id=&quot;Struct-page&quot;&gt;&lt;a href=&quot;#Struct-page&quot; class=&quot;headerlink&quot; title=&quot;Struct page&quot;&gt;&lt;/a&gt;Struct page&lt;/h4&gt;&lt;p&gt;page frame minimum unit. every page frame has a struct page to point&lt;br&gt;&lt;a href=&quot;https://stackoverflow.com/questions/34836806/how-to-get-physical-address-from-struct-page-in-linux-kernel&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;struct page could mapping page frame to physical address&lt;/a&gt;&lt;br&gt;all page frame in the LUR list.&lt;br&gt;There are 2.3%(96/4096) usage in linux 2.6.32&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Process-memory&quot;&gt;&lt;a href=&quot;#Process-memory&quot; class=&quot;headerlink&quot; title=&quot;Process memory&quot;&gt;&lt;/a&gt;Process memory&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;/proc/[pid]/st
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="mem" scheme="http://yoursite.com/tags/mem/"/>
    
  </entry>
  
  <entry>
    <title>Performance Tuning in centos7</title>
    <link href="http://yoursite.com/2017/05/24/Performance-Tuning-in-centos7/"/>
    <id>http://yoursite.com/2017/05/24/Performance-Tuning-in-centos7/</id>
    <published>2017-05-24T12:30:55.000Z</published>
    <updated>2017-07-08T01:34:25.000Z</updated>
    
    <content type="html">&lt;h5 id=&quot;High-availability-cluster&quot;&gt;&lt;a href=&quot;#High-availability-cluster&quot; class=&quot;headerlink&quot; title=&quot;High availability cluster&quot;&gt;&lt;/a&gt;High availability cluster&lt;/h5&gt;&lt;p&gt;2 x 2U Sever SAS3 connect 4 x 90 bay JBOD&lt;br&gt;&lt;img src=&quot;/img/supermicro-arch17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;Top-sas-throughput-base-32-x-Raidz2-9-2&quot;&gt;&lt;a href=&quot;#Top-sas-throughput-base-32-x-Raidz2-9-2&quot; class=&quot;headerlink&quot; title=&quot;Top sas throughput base 32 x Raidz2 (9+2)&quot;&gt;&lt;/a&gt;Top sas throughput base 32 x Raidz2 (9+2)&lt;/h5&gt;&lt;p&gt;Sinle x86 server thgroughput could be 23GB/s&lt;br&gt;Average throughput about 15~17GB/s&lt;br&gt;&lt;img src=&quot;/img/Single-server-sas-throughput2017-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;BIOS-setting&quot;&gt;&lt;a href=&quot;#BIOS-setting&quot; class=&quot;headerlink&quot; title=&quot;BIOS setting&quot;&gt;&lt;/a&gt;BIOS setting&lt;/h5&gt;&lt;p&gt;Enable X2APIC&lt;/p&gt;
&lt;h5 id=&quot;cpu-setting&quot;&gt;&lt;a href=&quot;#cpu-setting&quot; class=&quot;headerlink&quot; title=&quot;cpu setting&quot;&gt;&lt;/a&gt;cpu setting&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm profile throughput-performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower  frequency-set -g performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# for more info /usr/lib/tuned/throughput-performance/tuned.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;sysctl&quot;&gt;&lt;a href=&quot;#sysctl&quot; class=&quot;headerlink&quot; title=&quot;sysctl&quot;&gt;&lt;/a&gt;sysctl&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;kernel.numa_balancing=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_max_backlog = 300000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_sack = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_budget=600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem=16384 349520 16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem=16384 349520 16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mem = 2314209      3085613 4628418&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.somaxconn=2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_adv_win_scale=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_window_scaling = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#UDP buffer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Dual-port-25GbE&quot;&gt;&lt;a href=&quot;#Dual-port-25GbE&quot; class=&quot;headerlink&quot; title=&quot;Dual port 25GbE&quot;&gt;&lt;/a&gt;Dual port 25GbE&lt;/h5&gt;&lt;h6 id=&quot;NIC-settting&quot;&gt;&lt;a href=&quot;#NIC-settting&quot; class=&quot;headerlink&quot; title=&quot;NIC settting&quot;&gt;&lt;/a&gt;NIC settting&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -C enp131s0f0 adaptive-rx off rx-usecs 0 rx-frames 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -G enp131s0f0 rx 8192 tx 8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -G enp131s0f0 rx 8192 tx 8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -N enp131s0f0 rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp131s0f0 txqueuelen 1500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp131s0f1 txqueuelen 1500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev bond0 txqueuelen 3000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MTU=9000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;Bond-info&quot;&gt;&lt;a href=&quot;#Bond-info&quot; class=&quot;headerlink&quot; title=&quot;Bond info&quot;&gt;&lt;/a&gt;Bond info&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Bonding Mode: IEEE 802.3ad Dynamic link aggregation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Transmit Hash Policy: layer2 (0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Polling Interval (ms): 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Up Delay (ms): 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Down Delay (ms): 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;802.3ad info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LACP rate: slow&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; links: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator selection policy (ad_select): stable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System MAC address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Active Aggregator Info:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Number of ports: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Actor Key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Partner Key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Partner Mac Address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave Interface: enp131s0f0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Speed: 25000 Mbps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Duplex: full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Link Failure Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Permanent HW addr: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave queue ID: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details actor lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details partner lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    oper key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave Interface: enp131s0f1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Speed: 25000 Mbps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Duplex: full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Link Failure Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Permanent HW addr: 7c:fe:90:de:08:39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave queue ID: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details actor lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details partner lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    oper key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;Get-CPU-and-PCIE-adapter-topology&quot;&gt;&lt;a href=&quot;#Get-CPU-and-PCIE-adapter-topology&quot; class=&quot;headerlink&quot; title=&quot;Get CPU and PCIE adapter topology&quot;&gt;&lt;/a&gt;Get CPU and PCIE adapter topology&lt;/h6&gt;&lt;p&gt;Pin different cpu cores to different adapter&lt;br&gt;Disable irqbalance&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Enable HT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0,1,10,11,2,24,25,26,27,28,29,3,30,31,32,33,34,35,4,5,6,7,8,9,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12,13,14,15,16,17,18,19,20,21,22,23,36,37,38,39,40,41,42,43,44,45,46,47,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpu numa node number is: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpu-hex cpu-hex numa_node&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200 200000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40 40000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 8000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 1000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10 10000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 2000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20 20000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80 80000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400 400000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100 100000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4 4000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;800 800000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400000 400000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8000 8000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;800000 800000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20000 20000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40000 40000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1000 1000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100000 100000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80000 80000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10000 10000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2000 2000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200000 200000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4000 4000000000 1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;Numa-node0&quot;&gt;&lt;a href=&quot;#Numa-node0&quot; class=&quot;headerlink&quot; title=&quot;Numa node0&quot;&gt;&lt;/a&gt;Numa node0&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;02:00.0 Non-Volatile memory controller: Intel Corporation Device 0a53 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:00.0 Non-Volatile memory controller: Intel Corporation Device 0a53 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;04:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Numa-node1&quot;&gt;&lt;a href=&quot;#Numa-node1&quot; class=&quot;headerlink&quot; title=&quot;Numa node1&quot;&gt;&lt;/a&gt;Numa node1&lt;/h5&gt;&lt;p&gt;Next time , I will change etheret adapter to numa 0&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;83:00.0 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83:00.1 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;mpt3sas&quot;&gt;&lt;a href=&quot;#mpt3sas&quot; class=&quot;headerlink&quot; title=&quot;mpt3sas&quot;&gt;&lt;/a&gt;mpt3sas&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/modprobe.d/mpt3sas.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options mpt3sas max_msix_vectors=6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;storage-device-setting&quot;&gt;&lt;a href=&quot;#storage-device-setting&quot; class=&quot;headerlink&quot; title=&quot;storage device setting&quot;&gt;&lt;/a&gt;storage device setting&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HDD /sys/block/*/queue/scheduler deadline&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSD /sys/block/*/queue/scheduler noop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/queue/nr_requests 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/queue_depth 256 &lt;span class=&quot;comment&quot;&gt;#For Throughput, for latency you could reduece it&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/scsi_disk/*/cache_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; write back &lt;span class=&quot;comment&quot;&gt;#For throughput&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/scsi_disk/*/cache_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; write through &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rr_min_io_rq /etc/multipath.conf 1 &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/queue/nomerges 1 &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/homerl/pin_affinity/blob/master/pin_affinity.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;my scripts&lt;/a&gt;&lt;br&gt;./pin_cpu.sh SAS3008 Mellanox Non-Volatile&lt;/p&gt;
&lt;h5 id=&quot;Trigger-raw-spin-lock&quot;&gt;&lt;a href=&quot;#Trigger-raw-spin-lock&quot; class=&quot;headerlink&quot; title=&quot;Trigger raw_spin_lock&quot;&gt;&lt;/a&gt;Trigger raw_spin_lock&lt;/h5&gt;&lt;p&gt;Reconnect SAS cable, no multipath, 10GB/s zfs throughput&lt;br&gt;&lt;img src=&quot;/img/supermicro-arch18.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Glusterfs/Lustre could get performance 5~6GB/s in 2x25GbE&lt;/p&gt;
&lt;h5 id=&quot;ZFS-for-all-SAS-SSD-JBOD&quot;&gt;&lt;a href=&quot;#ZFS-for-all-SAS-SSD-JBOD&quot; class=&quot;headerlink&quot; title=&quot;ZFS for all SAS SSD JBOD&quot;&gt;&lt;/a&gt;ZFS for all SAS SSD JBOD&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zfs &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; logbias=troughput tank&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;The-others&quot;&gt;&lt;a href=&quot;#The-others&quot; class=&quot;headerlink&quot; title=&quot;The others&quot;&gt;&lt;/a&gt;The others&lt;/h5&gt;&lt;p&gt;running your app by numactl in single numa node&lt;br&gt;libvma to bypass kernel&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;High-availability-cluster&quot;&gt;&lt;a href=&quot;#High-availability-cluster&quot; class=&quot;headerlink&quot; title=&quot;High availability cluster&quot;&gt;&lt;/a&gt;High availa
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="performance" scheme="http://yoursite.com/tags/performance/"/>
    
      <category term="benchmark" scheme="http://yoursite.com/tags/benchmark/"/>
    
  </entry>
  
  <entry>
    <title>SMcli monitor raid controller</title>
    <link href="http://yoursite.com/2017/04/13/SMcli-monitor-raid-controller/"/>
    <id>http://yoursite.com/2017/04/13/SMcli-monitor-raid-controller/</id>
    <published>2017-04-13T02:39:34.000Z</published>
    <updated>2017-10-25T09:26:55.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Discovery-devices&quot;&gt;&lt;a href=&quot;#Discovery-devices&quot; class=&quot;headerlink&quot; title=&quot;Discovery devices&quot;&gt;&lt;/a&gt;Discovery devices&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -A&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-storage-system-name&quot;&gt;&lt;a href=&quot;#Get-storage-system-name&quot; class=&quot;headerlink&quot; title=&quot;Get storage-system-name&quot;&gt;&lt;/a&gt;Get storage-system-name&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-n means storage-system-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli localhost&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-storage-system-status&quot;&gt;&lt;a href=&quot;#Get-storage-system-status&quot; class=&quot;headerlink&quot; title=&quot;Get storage system status&quot;&gt;&lt;/a&gt;Get storage system status&lt;/h3&gt;&lt;p&gt;show ip address (ipaddr)&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot; show storagearray healthstatus;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Show-all-info&quot;&gt;&lt;a href=&quot;#Show-all-info&quot; class=&quot;headerlink&quot; title=&quot;Show all info&quot;&gt;&lt;/a&gt;Show all info&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;show allControllers  summary;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;Show allVirtualDisks;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show AllPhysicalDisks summary;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### If no summary , it will output all details for each devices.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show allcontrollers;&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;##NVRAM status, cache mirror&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;Show allphysicalDisks ;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Output-controller-log&quot;&gt;&lt;a href=&quot;#Output-controller-log&quot; class=&quot;headerlink&quot; title=&quot;Output controller log&quot;&gt;&lt;/a&gt;Output controller log&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;save storageArray supportdata file=\&quot;/tmp/controller.log\&quot; force=true;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Reset-controller&quot;&gt;&lt;a href=&quot;#Reset-controller&quot; class=&quot;headerlink&quot; title=&quot;Reset controller&quot;&gt;&lt;/a&gt;Reset controller&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n  ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;reset controller 0;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n  ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;reset controller 1;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Blink-the-device&quot;&gt;&lt;a href=&quot;#Blink-the-device&quot; class=&quot;headerlink&quot; title=&quot;Blink the device&quot;&gt;&lt;/a&gt;Blink the device&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;start physicalDisk [1,0,11] blink;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;stop physicalDisk blink;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-battery-status&quot;&gt;&lt;a href=&quot;#Get-battery-status&quot; class=&quot;headerlink&quot; title=&quot;Get battery status&quot;&gt;&lt;/a&gt;Get battery status&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show storageArray batteryage;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-battery-status-1&quot;&gt;&lt;a href=&quot;#Get-battery-status-1&quot; class=&quot;headerlink&quot; title=&quot;Get battery status&quot;&gt;&lt;/a&gt;Get battery status&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show storageArray powerInfo;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Discovery-devices&quot;&gt;&lt;a href=&quot;#Discovery-devices&quot; class=&quot;headerlink&quot; title=&quot;Discovery devices&quot;&gt;&lt;/a&gt;Discovery devices&lt;/h3&gt;&lt;figure class
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="raid" scheme="http://yoursite.com/tags/raid/"/>
    
      <category term="monitor" scheme="http://yoursite.com/tags/monitor/"/>
    
      <category term="lsi" scheme="http://yoursite.com/tags/lsi/"/>
    
      <category term="smcli" scheme="http://yoursite.com/tags/smcli/"/>
    
      <category term="san" scheme="http://yoursite.com/tags/san/"/>
    
  </entry>
  
  <entry>
    <title>Test linux SCSI-Persistent-Reservation (SPC-3)</title>
    <link href="http://yoursite.com/2017/03/21/SCSI-Persistent-Reservations/"/>
    <id>http://yoursite.com/2017/03/21/SCSI-Persistent-Reservations/</id>
    <published>2017-03-21T07:30:36.000Z</published>
    <updated>2017-10-13T09:11:21.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Does-devices-support&quot;&gt;&lt;a href=&quot;#Does-devices-support&quot; class=&quot;headerlink&quot; title=&quot;Does devices support ?&quot;&gt;&lt;/a&gt;Does devices support ?&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sg_persist -n -i -r &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/sdz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PR generation=0x0, there is NO reservation held&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Because-brain-split-zfs-will-corrupt&quot;&gt;&lt;a href=&quot;#Because-brain-split-zfs-will-corrupt&quot; class=&quot;headerlink&quot; title=&quot;Because brain-split, zfs will corrupt&quot;&gt;&lt;/a&gt;Because brain-split, zfs will corrupt&lt;/h3&gt;&lt;p&gt;process&lt;br&gt;register -&amp;gt; reserve -&amp;gt; preempt-abort -&amp;gt; re-register another node&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;which&lt;/span&gt; genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/sbin/genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rpm -qf /usr/sbin/genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initscripts-9.49.37-1.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist --out --register --param-sark=$(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --out --register --param-sark=$(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# reserve operate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --out --reserve --param-rk=0x$(hostid) --prout-type=1 /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PR generation=0x5c, Reservation follows:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Key=0x7819de15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scope: LU_SCOPE,  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Write Exclusive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0273762 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.145223 s, 72.2 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# get the reservation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist -n -o -A &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4 -K $(hostid) -S 0x7819de15  -T 1 -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Persistent Reservation Out cmd: 5f 05 01 00 00 00 00 00 18 00 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PR out: &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; (Preempt and abort) successful&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PR generation=0x5d, Reservation follows:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Key=0x77f7c343&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scope: LU_SCOPE,  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Write Exclusivea&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.142939 s, 73.4 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0139251 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist -n -o -A &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4 -K $(hostid) -S 0x77f7c343 -T 1 -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Persistent Reservation Out cmd: 5f 05 01 00 00 00 00 00 18 00 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PR out: &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; (Preempt and abort) successful&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.149629 s, 70.1 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0207658 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Prout-type&quot;&gt;&lt;a href=&quot;#Prout-type&quot; class=&quot;headerlink&quot; title=&quot;Prout-type&quot;&gt;&lt;/a&gt;Prout-type&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1-&amp;gt; write exclusive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3-&amp;gt; exclusive access&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5-&amp;gt; write exclusive - registrants only&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6-&amp;gt; exclusive access - registrants only&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7-&amp;gt; write exclusive - all registrants&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8-&amp;gt; exclusive access - all registrants&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Release-reservation&quot;&gt;&lt;a href=&quot;#Release-reservation&quot; class=&quot;headerlink&quot; title=&quot;Release reservation&quot;&gt;&lt;/a&gt;Release reservation&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --release -K $(hostid) --prout-type=1 /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PR generation=0x5f, there is NO reservation held&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Unregister-key&quot;&gt;&lt;a href=&quot;#Unregister-key&quot; class=&quot;headerlink&quot; title=&quot;Unregister key&quot;&gt;&lt;/a&gt;Unregister key&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --register -K $(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --in -k --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PR generation=0x60, there are NO registered reservation keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Force-mode&quot;&gt;&lt;a href=&quot;#Force-mode&quot; class=&quot;headerlink&quot; title=&quot;Force mode ?&quot;&gt;&lt;/a&gt;Force mode ?&lt;/h3&gt;&lt;p&gt;It releases the persistent reservation (if any) and clears all registrations from the device&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --clear -K $(hostid) /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;About-multipath&quot;&gt;&lt;a href=&quot;#About-multipath&quot; class=&quot;headerlink&quot; title=&quot;About multipath&quot;&gt;&lt;/a&gt;About multipath&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;no_path_retry queue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;features &lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://dhelios.blogspot.com/2015/04/how-can-i-view-create-and-remove-scsi.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How can I view create and remove scsi&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lkml.iu.edu/hypermail/linux/kernel/0903.3/02074.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Target_Core_Mod&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://lists.wpkg.org/pipermail/stgt/2010-October/017304.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support for persistent reservations&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://assets.cdn.sap.com/sapcom/docs/2016/06/84ea994f-767c-0010-82c7-eda71af511fa.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SAP HANA Fiber Channel Storage Connector Admin Guide&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Does-devices-support&quot;&gt;&lt;a href=&quot;#Does-devices-support&quot; class=&quot;headerlink&quot; title=&quot;Does devices support ?&quot;&gt;&lt;/a&gt;Does devices support ?&lt;/
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="hdd" scheme="http://yoursite.com/tags/hdd/"/>
    
      <category term="ssd" scheme="http://yoursite.com/tags/ssd/"/>
    
      <category term="sas" scheme="http://yoursite.com/tags/sas/"/>
    
      <category term="scsi" scheme="http://yoursite.com/tags/scsi/"/>
    
      <category term="spc" scheme="http://yoursite.com/tags/spc/"/>
    
  </entry>
  
  <entry>
    <title>HA centos 7 configuration</title>
    <link href="http://yoursite.com/2017/03/13/HA-centos7-3-nodes-configuration/"/>
    <id>http://yoursite.com/2017/03/13/HA-centos7-3-nodes-configuration/</id>
    <published>2017-03-13T01:56:08.000Z</published>
    <updated>2017-03-14T12:11:59.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Physical-node-OS&quot;&gt;&lt;a href=&quot;#Physical-node-OS&quot; class=&quot;headerlink&quot; title=&quot;Physical node OS&quot;&gt;&lt;/a&gt;Physical node OS&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CentOS Linux release 7.3&lt;br&gt;&lt;img src=&quot;/img/test-arch.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Create-linux-HA-3-x-physical-server&quot;&gt;&lt;a href=&quot;#Create-linux-HA-3-x-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Create linux HA ,3 x physical server&quot;&gt;&lt;/a&gt;Create linux HA ,3 x physical server&lt;/h2&gt;&lt;p&gt;127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4&lt;br&gt;::1         localhost localhost.localdomain localhost6 localhost6.localdomain6&lt;br&gt;192.xx.xx.130 node01&lt;br&gt;192.xx.xx.131 node02&lt;br&gt;192.xx.xx.132 node03&lt;/p&gt;
&lt;h3 id=&quot;Share-strorages&quot;&gt;&lt;a href=&quot;#Share-strorages&quot; class=&quot;headerlink&quot; title=&quot;Share strorages&quot;&gt;&lt;/a&gt;Share strorages&lt;/h3&gt;&lt;p&gt;NFS/Lustre&lt;/p&gt;
&lt;h3 id=&quot;Setup-HA-cluster&quot;&gt;&lt;a href=&quot;#Setup-HA-cluster&quot; class=&quot;headerlink&quot; title=&quot;Setup HA cluster&quot;&gt;&lt;/a&gt;Setup HA cluster&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# yum -y install pacemaker corosync fence-agents-all fence-agents-virsh \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fence-virt pacemaker-remote pcs fence-virtd resource-agents \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fence-virtd-libvirt fence-virtd-multicast&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-nodes-glusterfs-config&quot;&gt;&lt;a href=&quot;#3-nodes-glusterfs-config&quot; class=&quot;headerlink&quot; title=&quot;3 nodes glusterfs config&quot;&gt;&lt;/a&gt;3 nodes glusterfs config&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ zpool create tank -O canmount=on -o ashift=9 -o cachefile=none -O xattr=sa -O compression=lz4 -O acltype=posixacl raidz2 /dev/sd&amp;#123;c..h&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool add tank cache /dev/sda4 /dev/sdb4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool add tank &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; mirror /dev/sda3 /dev/sdb3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ gluster volume create ec-test disperse-data 2 redundancy 1  transport tcp node1:/tank/glusterfs node2:/tank/glusterfs node3:/tank/glusterfs force&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Setup-physical-server&quot;&gt;&lt;a href=&quot;#Setup-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Setup physical server&quot;&gt;&lt;/a&gt;Setup physical server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; hacluster | passwd --stdin hacluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; corosync.service pcaemaker.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl stop corosync.service pcaemaker.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl start pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl is-active pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster auth node01 node02 node03 &lt;span class=&quot;comment&quot;&gt;##input hacluster password for auth&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster setup --name ha-cluster node01,172.29.xx.xx node02,172.92.xx.xx node03,172.29.xx.xx --transport udpu --rrpmode passive --token 17000 --addr0 172.29.xx.0 --addr1 192.168.101.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster setup --start --name ha-cluster node01 node02 node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## pcs property set no-quorum-policy=stop #don&#39;t need to stop&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4.1.2 Option no-quorum-policy&lt;/p&gt;
&lt;p&gt;This global option defines what to do when a cluster partition does not have quorum (no majority of nodes is part of the partition).&lt;/p&gt;
&lt;p&gt;Allowed values are:&lt;/p&gt;
&lt;p&gt;ignore&lt;br&gt;The quorum state does not influence the cluster behavior; resource management is continued.&lt;/p&gt;
&lt;p&gt;This setting is useful for the following scenarios:&lt;/p&gt;
&lt;p&gt;Two-node clusters: Since a single node failure would always result in a loss of majority, usually you want the cluster to carry on regardless. Resource integrity is ensured using fencing, which also prevents split brain scenarios.&lt;/p&gt;
&lt;p&gt;Resource-driven clusters: For local clusters with redundant communication channels, a split brain scenario only has a certain probability. Thus, a loss of communication with a node most likely indicates that the node has crashed, and that the surviving nodes should recover and start serving the resources again.&lt;/p&gt;
&lt;p&gt;If no-quorum-policy is set to ignore, a 4-node cluster can sustain concurrent failure of three nodes before service is lost. With the other settings, it would lose quorum after concurrent failure of two nodes.&lt;/p&gt;
&lt;p&gt;freeze&lt;br&gt;If quorum is lost, the cluster partition freezes. Resource management is continued: running resources are not stopped (but possibly restarted in response to monitor events), but no further resources are started within the affected partition.&lt;/p&gt;
&lt;p&gt;This setting is recommended for clusters where certain resources depend on communication with other nodes (for example, OCFS2 mounts). In this case, the default setting no-quorum-policy=stop is not useful, as it would lead to the following scenario: Stopping those resources would not be possible while the peer nodes are unreachable. Instead, an attempt to stop them would eventually time out and cause a stop failure, triggering escalated recovery and fencing.&lt;/p&gt;
&lt;p&gt;stop (default value)&lt;br&gt;If quorum is lost, all resources in the affected cluster partition are stopped in an orderly fashion.&lt;/p&gt;
&lt;p&gt;suicide&lt;br&gt;If quorum is lost, all nodes in the affected cluster partition are fenced.&lt;/p&gt;
&lt;h4 id=&quot;Setting-etc-corosync-corosync-conf-for-every-node&quot;&gt;&lt;a href=&quot;#Setting-etc-corosync-corosync-conf-for-every-node&quot; class=&quot;headerlink&quot; title=&quot;Setting /etc/corosync/corosync.conf for every node&quot;&gt;&lt;/a&gt;Setting /etc/corosync/corosync.conf for every node&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;totem &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    version: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    secauth: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cluster_name: homer-test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transport: udpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rrp_mode: passive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    token: 17000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ringnumber: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bindnetaddr: 192.168.xx.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastaddr: 239.255.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastport: 5405&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ringnumber: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bindnetaddr: 172.29.xx.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastaddr: 239.255.2.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastport: 5405&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nodelist &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;quorum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    provider: corosync_votequorum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;logging &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    to_logfile: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile: /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/cluster/corosync.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    to_syslog: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Start-cluster&quot;&gt;&lt;a href=&quot;#Start-cluster&quot; class=&quot;headerlink&quot; title=&quot;Start cluster&quot;&gt;&lt;/a&gt;Start cluster&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster start --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ corosync-cfgtool &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Printing ring status.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Local node ID 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RING ID 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	id	= 192.168.xx.130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	status	= ring 0 active with no faults&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RING ID 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	id	= 172.29.xx.73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	status	= ring 1 active with no faults&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-stonith-for-physical-server&quot;&gt;&lt;a href=&quot;#Create-stonith-for-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Create stonith for physical server&quot;&gt;&lt;/a&gt;Create stonith for physical server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node01-fencing fence_ipmilan pcmk_host_list=&quot;nod01&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node1_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node02-fencing fence_ipmilan pcmk_host_list=&quot;node02&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node2_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node03-fencing fence_ipmilan pcmk_host_list=&quot;node03&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node3_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 op \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs property set stonith-enabled=true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs status&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cluster name: ha-cluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Online: [ node02 node03 node01 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Full list of resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node01-fencing	(stonith:fence_ipmilan):	Started node02&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node03-fencing	(stonith:fence_ipmilan):	Started node01&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node02-fencing	(stonith:fence_ipmilan):	Started node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PCSD Status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node03: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node01: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node02: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Daemon Status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  corosync: active/disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pacemaker: active/disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pcsd: active/enabled&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Get-quorum-info&quot;&gt;&lt;a href=&quot;#Get-quorum-info&quot; class=&quot;headerlink&quot; title=&quot;Get quorum info&quot;&gt;&lt;/a&gt;Get quorum info&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ corosync-quorumtool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:             Mon Mar 13 22:08:01 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum provider:  corosync_votequorum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Nodes:            3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Node ID:          0x00000001&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring ID:          1/568&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorate:          Yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Votequorum information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;----------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Expected votes:   3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Highest expected: 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Total votes:      3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum:           2  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Flags:            Quorate &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Membership information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;----------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Nodeid      Votes Name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000001          1 192.168.xx.130 (&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000002          1 192.168.xx.131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000003          1 192.168.xx.132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$  corosync-cmapctl|grep members&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.ip (str) = r(0) ip(192.168.xx.130) r(1) ip(172.29.xx.73) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.ip (str) = r(0) ip(192.168.xx.131) r(1) ip(172.29.xx.74) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.ip (str) = r(0) ip(192.168.xx.132) r(1) ip(172.29.xx.76) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;backup-and-restore-configuration&quot;&gt;&lt;a href=&quot;#backup-and-restore-configuration&quot; class=&quot;headerlink&quot; title=&quot;backup and restore configuration&quot;&gt;&lt;/a&gt;backup and restore configuration&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster cib &amp;gt; xx.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster cib-push xx.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs config&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-resources&quot;&gt;&lt;a href=&quot;#Create-resources&quot; class=&quot;headerlink&quot; title=&quot;Create resources&quot;&gt;&lt;/a&gt;Create resources&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create VirtualIP1 ocf:heartbeat:IPaddr2 ip=10.0.0.77 cidr_netmask=8 nic=br0 op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location VirtualIP prefers bgi-sz1-homer-test73=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create ansible-kvm VirtualDomain hypervisor=&lt;span class=&quot;string&quot;&gt;&quot;qemu:///system&quot;&lt;/span&gt; config=&lt;span class=&quot;string&quot;&gt;&quot;/export/glusterfs/vms/kvm/xml/ansible-kvm.xml&quot;&lt;/span&gt; migration_transport=ssh op start timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op stop timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op monitor  timeout=&lt;span class=&quot;string&quot;&gt;&quot;30&quot;&lt;/span&gt; interval=&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;  meta allow-migrate=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; op migrate_from interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120s&quot;&lt;/span&gt; op migrate_to interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# if you want add to group, add --group xxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create ansible-kvm VirtualDomain hypervisor=&lt;span class=&quot;string&quot;&gt;&quot;qemu:///system&quot;&lt;/span&gt; config=&lt;span class=&quot;string&quot;&gt;&quot;/export/glusterfs/vms/kvm/xml/ansible-kvm.xml&quot;&lt;/span&gt; migration_transport=ssh op start timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op stop timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op monitor  timeout=&lt;span class=&quot;string&quot;&gt;&quot;30&quot;&lt;/span&gt; interval=&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;  meta allow-migrate=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; op migrate_from interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120s&quot;&lt;/span&gt; op migrate_to interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120&quot;&lt;/span&gt; --group GROUP-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# http&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs resource create webres apache configfile=&quot;/etc/httpd/conf/httpd.conf&quot; statusurl=&quot;http://127.0.0.1/server-status&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-the-resource-group&quot;&gt;&lt;a href=&quot;#Create-the-resource-group&quot; class=&quot;headerlink&quot; title=&quot;Create the resource group&quot;&gt;&lt;/a&gt;Create the resource group&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs resource group add GROUP-A resource-1 resource-2 resource-3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;monitor&quot;&gt;&lt;a href=&quot;#monitor&quot; class=&quot;headerlink&quot; title=&quot;monitor&quot;&gt;&lt;/a&gt;monitor&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crm_mon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs status nodes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Standby-and-maintance&quot;&gt;&lt;a href=&quot;#Standby-and-maintance&quot; class=&quot;headerlink&quot; title=&quot;Standby and maintance&quot;&gt;&lt;/a&gt;Standby and maintance&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster standby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster unstandby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster stop --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#BAN&quot; the resource group  in which you would like to stop the cluster services&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource ban resource-name node-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#maintenance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; maintenance-mode=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; maintenance-mode=flase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-constraint&quot;&gt;&lt;a href=&quot;#Resource-constraint&quot; class=&quot;headerlink&quot; title=&quot;Resource constraint&quot;&gt;&lt;/a&gt;Resource constraint&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test73 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test74 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test76 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Colocation Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ticket Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers nodename=50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Using location constraint, you can also avoid specific node to run a particular resource&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name avoids nodename=50&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-order&quot;&gt;&lt;a href=&quot;#Resource-order&quot; class=&quot;headerlink&quot; title=&quot;Resource order&quot;&gt;&lt;/a&gt;Resource order&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order resource1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; resource2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order resource2 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; resource3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# remove&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order remove resource1 id_output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# example&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; manager-kvm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Adding VirtualIP1 manager-kvm (kind: Mandatory) (Options: first-action=start &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;-action=start)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test73 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test74 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test76 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  start VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; start manager-kvm (kind:Mandatory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Colocation Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ticket Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  start VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; start manager-kvm (kind:Mandatory) (id:order-VirtualIP1-manager-kvm-mandatory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#input id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order remove VirtualIP1 order-VirtualIP1-manager-kvm-mandatory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-migration&quot;&gt;&lt;a href=&quot;#Resource-migration&quot; class=&quot;headerlink&quot; title=&quot;Resource migration&quot;&gt;&lt;/a&gt;Resource migration&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update resource-name meta migration-threshold=&lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults migration-threshold=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update resource-name meta failure-timeout=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource show resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# show fail-count&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ crm_failcount -r resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# reset the fail-counts &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount reset resource-name node-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource cleanup resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show  resource-name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Not-move-resource-back&quot;&gt;&lt;a href=&quot;#Not-move-resource-back&quot; class=&quot;headerlink&quot; title=&quot;Not move resource back&quot;&gt;&lt;/a&gt;Not move resource back&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults resource-stickiness=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Colocation-constraint&quot;&gt;&lt;a href=&quot;#Colocation-constraint&quot; class=&quot;headerlink&quot; title=&quot;Colocation constraint&quot;&gt;&lt;/a&gt;Colocation constraint&lt;/h4&gt;&lt;p&gt;A colocation constraint determines that the location of one resource depends on the location of another resource&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation add resource1 resource2 INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation add resource1 with resource2 INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#remove&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation remove resource1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Resource-location&quot;&gt;&lt;a href=&quot;#Resource-location&quot; class=&quot;headerlink&quot; title=&quot;Resource location&quot;&gt;&lt;/a&gt;Resource location&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers node1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name avoids node1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location remove location-resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers node1=INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ crm_simulate &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;L &lt;span class=&quot;comment&quot;&gt;# get resource score&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Resource pefer node1,node2,node3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node1=200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node2=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node3=0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Update-resource-config&quot;&gt;&lt;a href=&quot;#Update-resource-config&quot; class=&quot;headerlink&quot; title=&quot;Update resource config&quot;&gt;&lt;/a&gt;Update resource config&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update ansible-kvm config=/opt/lustresz/DAS_NFS/vms/HA-kvm/homerl/config/ansible-kvm.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Manage-resource&quot;&gt;&lt;a href=&quot;#Manage-resource&quot; class=&quot;headerlink&quot; title=&quot;Manage resource&quot;&gt;&lt;/a&gt;Manage resource&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; resource-name    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; resource-name    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show resource-name &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount reset resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource cleanup resource-name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Clear-error-output&quot;&gt;&lt;a href=&quot;#Clear-error-output&quot; class=&quot;headerlink&quot; title=&quot;Clear error output&quot;&gt;&lt;/a&gt;Clear error output&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs resource cleanup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Check-cluster-status&quot;&gt;&lt;a href=&quot;#Check-cluster-status&quot; class=&quot;headerlink&quot; title=&quot;Check cluster status&quot;&gt;&lt;/a&gt;Check cluster status&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ crm_verify -L -V&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Destroy-cluster&quot;&gt;&lt;a href=&quot;#Destroy-cluster&quot; class=&quot;headerlink&quot; title=&quot;Destroy cluster&quot;&gt;&lt;/a&gt;Destroy cluster&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster destroy --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl stop pacemaker corosync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -f /var/lib/pacemaker/cib/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Reference&lt;br&gt;&lt;a href=&quot;http://www.unixarena.com/2016/01/rhel-7-pacemaker-define-the-resource-behaviour.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RHEL 7 – Pacemaker&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Reference/s1-multistateresource-HAAR.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;High_Availability_Add-On_Reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Physical-node-OS&quot;&gt;&lt;a href=&quot;#Physical-node-OS&quot; class=&quot;headerlink&quot; title=&quot;Physical node OS&quot;&gt;&lt;/a&gt;Physical node OS&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CentOS L
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ha" scheme="http://yoursite.com/tags/ha/"/>
    
      <category term="cluster" scheme="http://yoursite.com/tags/cluster/"/>
    
      <category term="corosync" scheme="http://yoursite.com/tags/corosync/"/>
    
      <category term="pacemaker" scheme="http://yoursite.com/tags/pacemaker/"/>
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="3 nodes" scheme="http://yoursite.com/tags/3-nodes/"/>
    
      <category term="kvm" scheme="http://yoursite.com/tags/kvm/"/>
    
      <category term="virtualization" scheme="http://yoursite.com/tags/virtualization/"/>
    
  </entry>
  
  <entry>
    <title>kvm_tips</title>
    <link href="http://yoursite.com/2017/03/09/kvm-tips/"/>
    <id>http://yoursite.com/2017/03/09/kvm-tips/</id>
    <published>2017-03-09T13:40:11.000Z</published>
    <updated>2017-03-09T13:52:57.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Install&quot;&gt;&lt;a href=&quot;#Install&quot; class=&quot;headerlink&quot; title=&quot;Install&quot;&gt;&lt;/a&gt;Install&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install qemu-kvm libvirt virt-install bridge-utils&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;KVM-Multipath&quot;&gt;&lt;a href=&quot;#KVM-Multipath&quot; class=&quot;headerlink&quot; title=&quot;KVM Multipath&quot;&gt;&lt;/a&gt;KVM Multipath&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;device&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;disk&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qemu&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;/kvm/fileA.qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dev&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;sda&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;scsi&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;0002&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;drive&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;controller&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;unit&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;device&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;disk&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qemu&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;/kvm/fileA.qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dev&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;sdb&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;scsi&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;0002&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;drive&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;controller&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;unit&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Snapshot&quot;&gt;&lt;a href=&quot;#Snapshot&quot; class=&quot;headerlink&quot; title=&quot;Snapshot&quot;&gt;&lt;/a&gt;Snapshot&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# list&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 ...  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot -c first /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# recovery&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; 1 /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Delete&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 1 /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Create-convert-base-image&quot;&gt;&lt;a href=&quot;#Create-convert-base-image&quot; class=&quot;headerlink&quot; title=&quot;Create convert base image&quot;&gt;&lt;/a&gt;Create convert base image&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qemu-img create &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; qed vm1.qed 80G&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img convert &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; vmdk -O raw centos7.vmdk centos7.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Base images&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img create -b centos6-base.qed &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;  qed  centos6-tmp.qed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img rebase  -u -b centos-6.qed ./kvm1.qed&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Virt-manager-show-unreadable-code&quot;&gt;&lt;a href=&quot;#Virt-manager-show-unreadable-code&quot; class=&quot;headerlink&quot; title=&quot;Virt-manager show unreadable code&quot;&gt;&lt;/a&gt;Virt-manager show unreadable code&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install dejavu-sans-fonts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# if you need Chinese&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install ghostscript-chinese-zh_CN&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Install&quot;&gt;&lt;a href=&quot;#Install&quot; class=&quot;headerlink&quot; title=&quot;Install&quot;&gt;&lt;/a&gt;Install&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
    
    </summary>
    
      <category term="virtualization" scheme="http://yoursite.com/categories/virtualization/"/>
    
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="kvm" scheme="http://yoursite.com/tags/kvm/"/>
    
      <category term="virtualization" scheme="http://yoursite.com/tags/virtualization/"/>
    
      <category term="multipath" scheme="http://yoursite.com/tags/multipath/"/>
    
  </entry>
  
</feed>
