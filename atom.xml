<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Homer&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-06-05T12:54:05.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Homer Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SAS JBOD issues</title>
    <link href="http://yoursite.com/2018/06/05/SAS-JBOD-issues/"/>
    <id>http://yoursite.com/2018/06/05/SAS-JBOD-issues/</id>
    <published>2018-06-05T07:32:54.000Z</published>
    <updated>2018-06-05T12:54:05.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#### issue introduction in supermicro JBOD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:11 $HOSTNAME kernel: mpt3sas_cm3: fault_state(0x5853)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:11 $HOSTNAME kernel: mpt3sas_cm3: sending diag reset !!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: diag reset: SUCCESS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: IOC Number : 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: CurrentHtankPageSize is 0: Setting default htank page size to 4k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: LSISAS3008: FWVersion(15.00.02.00), ChipRevision(0x02), BiosVersion(08.33.00.00)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: Protocol=(Initiator,Target), Capabilities=(TLR,EEDP,Snapshot Buffer,Diag Trace Buffer,Task Set Full,NCQ)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:12 $HOSTNAME kernel: mpt3sas_cm3: sending port enable !!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:16 $HOSTNAME kernel: WARNING: Pool &amp;apos;tank_3&amp;apos; has encountered an uncorrectable I/O failure and has been suspended.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:16 $HOSTNAME kernel: WARNING: Pool &amp;apos;tank_1&amp;apos; has encountered an uncorrectable I/O failure and has been suspended.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:16 $HOSTNAME kernel: WARNING: Pool &amp;apos;tank_0&amp;apos; has encountered an uncorrectable I/O failure and has been suspended.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:16 $HOSTNAME kernel: WARNING: Pool &amp;apos;tank_4&amp;apos; has encountered an uncorrectable I/O failure and has been suspended.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:16 $HOSTNAME kernel: WARNING: Pool &amp;apos;tank_2&amp;apos; has encountered an uncorrectable I/O failure and has been suspended.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: port enable: SUCCESS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for end-devices: start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:0: handle(0x000a), sas_address(0x5000cca25d7295a2), port: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:0: enclosure logical id(0x500304800927a43f), slot(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:1: handle(0x000c), sas_address(0x5000cca25d6969b6), port: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:1: enclosure logical id(0x500304800927a43f), slot(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:2: handle(0x000d), sas_address(0x5000cca25d72abb6), port: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:2: enclosure logical id(0x500304800927a43f), slot(2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;---------------------discover a lot of sas dev----------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: scsi target14:0:92: enclosure logical id(0x500304800927a4bf), slot(39)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011break from _scsih_search_responding_sas_devices: ioc_status(0x0022), loginfo(0x310f0400)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for end-devices: complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for end-devices: start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for PCIe end-devices: complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for expanders: start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: #011expander present: handle(0x0009), sas_addr(0x500304800927a53f), port:255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: #011expander present: handle(0x000b), sas_addr(0x500304800927a57f), port:255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: #011expander present: handle(0x0017), sas_addr(0x500304800927a5bf), port:255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011break from _scsih_search_responding_expanders: ioc_status(0x0022), loginfo(0x310f0400)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: search for expanders: complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: _base_fault_reset_work: hard reset: success&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: removing unresponding devices: start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: removing unresponding devices: sas end-devices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: removing unresponding devices: pcie end-devices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: removing unresponding devices: expanders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: removing unresponding devices: complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: scan devices: start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011scan devices: expanders start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011break from expander scan: ioc_status(0x0022), loginfo(0x310f0400)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011scan devices: expanders complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011scan devices: sas end devices start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011break from sas end device scan: ioc_status(0x0022), loginfo(0x310f0400)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011scan devices: sas end devices complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011scan devices: pcie end devices start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: log_info(0x3003011d): originator(IOP), code(0x03), sub_code(0x011d)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: log_info(0x3003011d): originator(IOP), code(0x03), sub_code(0x011d)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011break from pcie end device scan: ioc_status(0x0021), loginfo(0x3003011d)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: #011pcie devices: pcie end devices complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:43:19 $HOSTNAME kernel: mpt3sas_cm3: scan devices: complete&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:06 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) @@@ Couldn&amp;apos;t add any time (5/5), not sending early reply#012  req@ffff880e10654450 x1596544563528160/t0(0) o4-&amp;gt;a7f35279-494c-1981-38fa-acdcec1fbf35@10.53.2.225@tcp:71/0 lens 608/448 e 10 to 0 dl 1527706091 ref 2 fl Interpret:/0/0 rc 0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:07 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) @@@ Couldn&amp;apos;t add any time (5/5), not sending early reply#012  req@ffff880ffbc8b450 x1584238257345984/t0(0) o4-&amp;gt;f87ebbf4-cb7b-a830-9e77-0096b0381fc8@10.53.3.53@tcp:72/0 lens 488/448 e 10 to 0 dl 1527706092 ref 2 fl Interpret:/0/0 rc 0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:07 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) Skipped 2 previous similar messages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:08 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) @@@ Couldn&amp;apos;t add any time (5/5), not sending early reply#012  req@ffff881035282450 x1596089180992128/t0(0) o4-&amp;gt;86387ec7-655d-34e3-f185-501b9a865171@10.53.0.44@tcp:73/0 lens 488/448 e 10 to 0 dl 1527706093 ref 2 fl Interpret:/0/0 rc 0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:08 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) Skipped 4 previous similar messages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:10 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) @@@ Couldn&amp;apos;t add any time (5/5), not sending early reply#012  req@ffff880ff975c850 x1596571846265280/t0(0) o4-&amp;gt;24d3c64b-6363-9155-5d8f-23fe641295fa@10.53.2.221@tcp:75/0 lens 608/448 e 10 to 0 dl 1527706095 ref 2 fl Interpret:/0/0 rc 0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;May 1 02:48:10 $HOSTNAME kernel: Lustre: 22778:0:(service.c:1346:ptlrpc_at_send_early_reply()) Skipped 10 previous similar messages&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;debug-sas-connection-from-driver-layer&quot;&gt;&lt;a href=&quot;#debug-sas-connection-from-driver-layer&quot; class=&quot;headerlink&quot; title=&quot;debug sas connection from driver layer&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://zfs.datto.com/slides/hutter.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;debug sas connection from driver layer&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;I found there are a lot of counts increment in supermicro 4U 90 bay JBOD.&lt;br&gt;If you see running_disparity_error_count and phy_reset_problem_count increment in your server, that means too bad thing in the sas connection.&lt;/p&gt;
&lt;p&gt;/sys/class/sas_phy means in driver layer ,not means sas device.&lt;br&gt;If you found somethings wrong in driver layer, that means.&lt;/p&gt;
&lt;p&gt;Here is driver layer, not means there is the issue in sas devices, SAS HBA, JBOD IO expader, both of which are likely.&lt;br&gt;And the HDD has a lot of ECC delayed, JBOD vibrate will cause this issue. but not all.&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;phy-14:1:27-- running_disparity_error_count:9648  phy_reset_problem_count:0  loss_of_dword_sync_count:0  invalid_dword_count:1045&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;phy-14:1:32-- running_disparity_error_count:0  phy_reset_problem_count:47131027  loss_of_dword_sync_count:0  invalid_dword_count:0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;If you want make sure sas dev whether has the issue, you could get it from smartctl&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;smartctl -x /dev/sdhe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;smartctl 6.2 2013-07-26 r3841 [x86_64-linux-3.10.0-693.5.2.el7_lustre.x86_64] (&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; build)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=== START OF INFORMATION SECTION ===&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor:               HGST&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product:              HUH721010AL5200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Revision:             A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User Capacity:        10,000,831,348,736 bytes [10.0 TB]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical block size:   512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Physical block size:  4096 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Lowest aligned LBA:   0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical block provisioning &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; unreported, LBPME=0, LBPRZ=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rotation Rate:        7200 rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Form Factor:          3.5 inches&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical Unit id:      0x5000cca251998a50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Serial number:        xxxxxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;:          disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Transport protocol:   SAS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Local Time is:        Tue Jun  5 16:29:01 2018 CST&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMART support is:     Available - device has SMART capability.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMART support is:     Enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Temperature Warning:  Enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read Cache is:        Enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Writeback Cache is:   Enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;=== START OF READ SMART DATA SECTION ===&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMART Health Status: OK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current Drive Temperature:     32 C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Drive Trip Temperature:        85 C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Manufactured &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; week 09 of year 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Specified cycle count over device lifetime:  50000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Accumulated start-stop cycles:  7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Specified load-unload count over device lifetime:  600000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Accumulated load-unload cycles:  351&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Elements &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; grown defect list: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor (Seagate) cache information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Blocks sent to initiator = 63204729735348224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error counter &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           Errors Corrected by           Total   Correction     Gigabytes    Total&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               ECC          rereads/    errors   algorithm      processed    uncorrected&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           fast | delayed   rewrites  corrected  invocations   [10^9 bytes]  errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;:          0      377         0       377    2915953      59161.832           0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write:         0        8         0         8     267282      20883.070           0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;verify:        0        0         0         0      67653          0.000           0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non-medium error count:        0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;No self-tests have been logged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Background scan results &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Status: scan is active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Accumulated power on time, hours:minutes 9039:55 [542395 minutes]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Number of background scans performed: 31,  scan progress: 63.81%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Number of background medium scans performed: 31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Protocol Specific port &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; page &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; SAS SSP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;relative target port id = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  generation code = 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  number of phys = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  phy identifier = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: expander device&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached reason: SMP phy control &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reason: unknown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    negotiated logical link rate: reserved [11]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached initiator port: ssp=0 stp=0 smp=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached target port: ssp=0 stp=0 smp=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SAS address = 0x5000cca251998a51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached SAS address = 0x500304800928ac7f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached phy identifier = 20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Invalid DWORD count = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Running disparity error count = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Loss of DWORD synchronization = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Phy reset problem = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Phy event descriptors:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Invalid word count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Running disparity error count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Loss of dword synchronization count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Phy reset problem count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;relative target port id = 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  generation code = 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  number of phys = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  phy identifier = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: expander device&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached reason: SMP phy control &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reason: unknown&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    negotiated logical link rate: reserved [11]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached initiator port: ssp=0 stp=0 smp=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached target port: ssp=0 stp=0 smp=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SAS address = 0x5000cca251998a52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached SAS address = 0x500304800928ad7f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    attached phy identifier = 20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Invalid DWORD count = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Running disparity error count = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Loss of DWORD synchronization = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Phy reset problem = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Phy event descriptors:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Invalid word count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Running disparity error count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Loss of dword synchronization count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Phy reset problem count: 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/cd/E19121-01/sf.x4200/819-1157-23/F_BIOS_RAID.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About parameters&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Invalid DWORDs&lt;ul&gt;
&lt;li&gt;The number of invalid dwords that have been received, outside of PHY reset sequences, since the last PHY Link Error Reset&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Loss of DWORD Sync:&lt;ul&gt;
&lt;li&gt;The number of times, since the last PHY Link Error Reset, that DWORD synchronization was lost and the link reset sequence occurred.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Running Disparity Errors&lt;ul&gt;
&lt;li&gt;The number of DWORDS with running disparity errors that have been received, outside of PHY reset sequences, since the last PHY Link Error Reset&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PHY Reset Errors&lt;ul&gt;
&lt;li&gt;The number of times the PHY reset sequence has failed, since the last PHY Link Error Reset&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;check-scripts&quot;&gt;&lt;a href=&quot;#check-scripts&quot; class=&quot;headerlink&quot; title=&quot;check scripts&quot;&gt;&lt;/a&gt;check scripts&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lsscsi -git &amp;gt; /dev/shm/lsscsi.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /sys/class/sas_phy;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls | sed &lt;span class=&quot;string&quot;&gt;&#39;s/phy-//g&#39;&lt;/span&gt;); &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;value=$(cat &lt;span class=&quot;string&quot;&gt;&quot;phy-&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/running_disparity_error_count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;value2=$(cat &lt;span class=&quot;string&quot;&gt;&quot;phy-&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/phy_reset_problem_count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;value3=$(cat &lt;span class=&quot;string&quot;&gt;&quot;phy-&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/loss_of_dword_sync_count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;value4=$(cat &lt;span class=&quot;string&quot;&gt;&quot;phy-&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/invalid_dword_count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [[ &lt;span class=&quot;variable&quot;&gt;$value&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-gt&lt;/span&gt; 0 ]] || [[ &lt;span class=&quot;variable&quot;&gt;$value2&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-gt&lt;/span&gt; 0 ]] || [[ &lt;span class=&quot;variable&quot;&gt;$value3&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-gt&lt;/span&gt; 0 ]] || [[ &lt;span class=&quot;variable&quot;&gt;$value4&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-gt&lt;/span&gt; 0 ]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  devtype=$(cat /dev/shm/lsscsi.log | grep -i &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $(NF-2)&quot; &quot;$(NF-1)&amp;#125;&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$devtype&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n running_disparity_error_count&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$value&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n phy_reset_problem_count&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$value2&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; -n loss_of_dword_sync_count&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$value3&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; invalid_dword_count&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$value4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## first columne is the addr &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsscsi -git | grep sdkx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[14:0:39:0]  disk    sas:0x5000cca25197b4e2          /dev/sdkx  35000cca25197b4e0  /dev/sg320&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/class/sas_phy/phy-14:1:27/device/port/end_device-14:1:26/target14:0:39/14:0:39:0/block/sdkx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="sas" scheme="http://yoursite.com/tags/sas/"/>
    
      <category term="jbod" scheme="http://yoursite.com/tags/jbod/"/>
    
  </entry>
  
  <entry>
    <title>GNU parallel</title>
    <link href="http://yoursite.com/2018/06/01/parallel/"/>
    <id>http://yoursite.com/2018/06/01/parallel/</id>
    <published>2018-06-01T05:46:30.000Z</published>
    <updated>2018-06-01T06:25:46.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Pipe-single-big-file&quot;&gt;&lt;a href=&quot;#Pipe-single-big-file&quot; class=&quot;headerlink&quot; title=&quot;Pipe single big file&quot;&gt;&lt;/a&gt;Pipe single big file&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat bigfile.bin | parallel --pipe --recend &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt; -k bzip2 --best &amp;gt; compressedfile.bz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat bigfile.txt | parallel --block 10M --pipe grep &lt;span class=&quot;string&quot;&gt;&#39;pattern&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat rands20M.txt | parallel --pipe awk \&lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;s+=\$1&amp;#125; END &amp;#123;print s&amp;#125;\&#39;&lt;/span&gt; | awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;s+=$1&amp;#125; END &amp;#123;print s&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat bigfile.txt | parallel  --pipe wc &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; | awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;s+=$1&amp;#125; END &amp;#123;print s&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat bigfile.txt | parallel --pipe sed s^old^new^g&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;For-multiple-files&quot;&gt;&lt;a href=&quot;#For-multiple-files&quot; class=&quot;headerlink&quot; title=&quot;For multiple files&quot;&gt;&lt;/a&gt;For multiple files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;find . -name &lt;span class=&quot;string&quot;&gt;&#39;*.html&#39;&lt;/span&gt; | parallel gzip --best&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-parameter&quot;&gt;&lt;a href=&quot;#Get-parameter&quot; class=&quot;headerlink&quot; title=&quot;Get parameter&quot;&gt;&lt;/a&gt;Get parameter&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ seq 10 | parallel &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parallel &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; ::: &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;456&quot;&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; zzz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;456&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zzz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parallel &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; ::: A B C ::: D E F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A E&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B E&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C E&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parallel &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; abc-file &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; def-file &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat abc-file | parallel &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; - &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; def-file &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# replace - by ::::&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat abc-file | parallel &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; :::: - def-file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# &quot;:::&quot; is stand input, :::: is file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parallel &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; ::: A B C :::: def-file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parallel --xapply &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; ::: A B C ::: D E F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B E&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ seq 50 | parallel -n0 -q  curl &lt;span class=&quot;string&quot;&gt;&#39;example.com&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  -n 0 means read one argument, but insert 0 arguments on the command line.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#  -q       Quote command.  This will quote the command line so special characters are not interpreted by the shell.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Function&quot;&gt;&lt;a href=&quot;#Function&quot; class=&quot;headerlink&quot; title=&quot;Function&quot;&gt;&lt;/a&gt;Function&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;doit&lt;/span&gt;&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    x=&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;_something &lt;span class=&quot;variable&quot;&gt;$x&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [... 100 lines that &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; something with &lt;span class=&quot;variable&quot;&gt;$x&lt;/span&gt; ...]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; doit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cat list | parallel doit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Pipe-single-big-file&quot;&gt;&lt;a href=&quot;#Pipe-single-big-file&quot; class=&quot;headerlink&quot; title=&quot;Pipe single big file&quot;&gt;&lt;/a&gt;Pipe single big file&lt;/h3&gt;&lt;
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="gnu" scheme="http://yoursite.com/tags/gnu/"/>
    
      <category term="parallel" scheme="http://yoursite.com/tags/parallel/"/>
    
  </entry>
  
  <entry>
    <title>trace network</title>
    <link href="http://yoursite.com/2018/06/01/tcptrace/"/>
    <id>http://yoursite.com/2018/06/01/tcptrace/</id>
    <published>2018-06-01T02:49:42.000Z</published>
    <updated>2018-06-01T07:15:20.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;tcpdump&quot;&gt;&lt;a href=&quot;#tcpdump&quot; class=&quot;headerlink&quot; title=&quot;tcpdump&quot;&gt;&lt;/a&gt;tcpdump&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tcpdump -n -i eth0 -A -x dst port 443 and greater 100&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;tcpdump&quot;&gt;&lt;a href=&quot;#tcpdump&quot; class=&quot;headerlink&quot; title=&quot;tcpdump&quot;&gt;&lt;/a&gt;tcpdump&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
    
    </summary>
    
      <category term="network" scheme="http://yoursite.com/categories/network/"/>
    
    
      <category term="tcp" scheme="http://yoursite.com/tags/tcp/"/>
    
  </entry>
  
  <entry>
    <title>NIC benchmark</title>
    <link href="http://yoursite.com/2018/06/01/NIC-benchmark/"/>
    <id>http://yoursite.com/2018/06/01/NIC-benchmark/</id>
    <published>2018-06-01T02:49:42.000Z</published>
    <updated>2018-06-02T03:23:28.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;Test-server&quot;&gt;&lt;a href=&quot;#Test-server&quot; class=&quot;headerlink&quot; title=&quot;Test server&quot;&gt;&lt;/a&gt;Test server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Dell PowerEdge R730&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 x Xeon E5 2630v4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16G 2133MHz x 8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;reference&quot;&gt;&lt;a href=&quot;#reference&quot; class=&quot;headerlink&quot; title=&quot;reference&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.intel.com/content/dam/www/public/us/en/documents/reference-guides/xl710-x710-performance-tuning-linux-guide.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/h4&gt;&lt;h4 id=&quot;100GbE-tuning&quot;&gt;&lt;a href=&quot;#100GbE-tuning&quot; class=&quot;headerlink&quot; title=&quot;100GbE tuning&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://fasterdata.es.net/host-tuning/100g-tuning/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;100GbE tuning&lt;/a&gt;&lt;/h4&gt;&lt;h4 id=&quot;benchmark&quot;&gt;&lt;a href=&quot;#benchmark&quot; class=&quot;headerlink&quot; title=&quot;benchmark&quot;&gt;&lt;/a&gt;benchmark&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lspci | grep Ethernet&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;01:00.0 Ethernet controller: Broadcom Limited NetXtreme II BCM57800 1/10 Gigabit Ethernet (rev 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;01:00.1 Ethernet controller: Broadcom Limited NetXtreme II BCM57800 1/10 Gigabit Ethernet (rev 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;01:00.2 Ethernet controller: Broadcom Limited NetXtreme II BCM57800 1/10 Gigabit Ethernet (rev 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;01:00.3 Ethernet controller: Broadcom Limited NetXtreme II BCM57800 1/10 Gigabit Ethernet (rev 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;04:00.0 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;04:00.1 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;05:00.0 Ethernet controller: Intel Corporation Ethernet Controller XXV710 &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 25GbE SFP28 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;05:00.1 Ethernet controller: Intel Corporation Ethernet Controller XXV710 &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; 25GbE SFP28 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ lspci &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 05:00.0 -vvv | grep -Ei &lt;span class=&quot;string&quot;&gt;&#39;8G|MSI-X&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Capabilities: [70] MSI-X: Enable+ Count=129 Masked-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		LnkCap:	Port &lt;span class=&quot;comment&quot;&gt;#0, Speed 8GT/s, Width x8, ASPM L1, Latency L0 &amp;lt;2us, L1 &amp;lt;16us&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		LnkSta:	Speed 8GT/s, Width x8, TrErr- Train- SlotClk+ DLActive- BWMgmt- ABWMgmt-&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -i p5p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: i40e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 2.4.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: 6.01 0x80003554 1.1747.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:05:00.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; p5p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Channel parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p5p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -g p5p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p5p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip2=xx.xx.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; k &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;1..4&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  numactl -N 0 -m 0 iperf3  -c &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; -P 1 -t 36000 -p 520&lt;span class=&quot;variable&quot;&gt;$&amp;#123;k&amp;#125;&lt;/span&gt; &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  numactl -N 0 -m 0 qperf  -lp 400&lt;span class=&quot;variable&quot;&gt;$&amp;#123;k&amp;#125;&lt;/span&gt; -t 36000 -oo msg_size:1K:4K:*2 &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; tcp_bw &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#for latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;numactl -N 0 -m 0 qperf -lp 4001 -t 60 -oo msg_size:64:1024K:*4 &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; tcp_lat&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;xl710-performance-tuning&quot;&gt;&lt;a href=&quot;#xl710-performance-tuning&quot; class=&quot;headerlink&quot; title=&quot;xl710 performance tuning&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.intel.com/content/dam/www/public/us/en/documents/reference-guides/xl710-x710-performance-tuning-linux-guide.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;xl710 performance tuning&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Intel recommends that IOMMU be in pass-through mode for optimal host network performance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iommu=pt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#update driver&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modinfo i40e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/4.14.38/updates/drivers/net/ethernet/intel/i40e/i40e.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        2.4.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Note: The TCP_RR test in netperf returns latency in a value of transactions/sec. This is a round-trip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;number. The one-way latency can be calculated using the following equation:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Latency(usec) = (½) / [Transactions/sec] * 1,000,000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;IRQ-Affinity&quot;&gt;&lt;a href=&quot;#IRQ-Affinity&quot; class=&quot;headerlink&quot; title=&quot;IRQ Affinity&quot;&gt;&lt;/a&gt;IRQ Affinity&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; irqbalance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl stop irqbalance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#intel&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity -x all ethX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity -x &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; ethX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity 1-2 ethX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#mellanox&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity_bynode.sh 0 p7p1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /sys/class/net/p5p2/device/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat numa_node&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lscpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NUMA node0 CPU(s):     0,2,4,6,8,10,12,14,16,18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NUMA node1 CPU(s):     1,3,5,7,9,11,13,15,17,19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#manual&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /proc/interrupts | grep p5p1 | awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $1&amp;#125;&#39;&lt;/span&gt; &amp;gt; /tmp/tmp1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&#39;s/\://g&#39;&lt;/span&gt; /tmp/tmp1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;if(NR%8==1) print $1&amp;#125;&#39;&lt;/span&gt; /tmp/tmp1 | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; line&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /proc/irq/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;line&amp;#125;&lt;/span&gt;/smp_affinity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;if(NR%8==2) print $1&amp;#125;&#39;&lt;/span&gt; /tmp/tmp1 | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; line&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 4 &amp;gt; /proc/irq/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;line&amp;#125;&lt;/span&gt;/smp_affinity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;if(NR%8==3) print $1&amp;#125;&#39;&lt;/span&gt; /tmp/tmp1 | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; line&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 10 &amp;gt; /proc/irq/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;line&amp;#125;&lt;/span&gt;/smp_affinity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;if(NR%8==4) print $1&amp;#125;&#39;&lt;/span&gt; /tmp/tmp1 | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; line&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 40 &amp;gt; /proc/irq/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;line&amp;#125;&lt;/span&gt;/smp_affinity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#https://access.redhat.com/solutions/2144921&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU      0   1    2    3    4    5    6    7    8    9    10   11    12 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bin    0001 0010 0100 1000 10000 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Decimal  1   2    4    8   16   32   64  128  256  512  1024 2048  4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hex      1   2    4    8   10   20   40   80  100  200   400  800  1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; %0.2x&lt;span class=&quot;string&quot;&gt;&#39;\n&#39;&lt;/span&gt; 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Interrupt-Moderation&quot;&gt;&lt;a href=&quot;#Interrupt-Moderation&quot; class=&quot;headerlink&quot; title=&quot;Interrupt Moderation&quot;&gt;&lt;/a&gt;Interrupt Moderation&lt;/h4&gt;&lt;p&gt;The range of 0-235 microseconds provides an effective range of 4,310 to 250,000 interrupts per second. The value of rx-µsecs-high can be set independent of rx-µsecs and tx-µsecs in the same ethtool command, and is also independent of the adaptive interrupt moderation algorithm. The&lt;br&gt;underlying hardware supports granularity in 2-microsecond intervals, so adjacent values might result in the same interrupt rate.&lt;br&gt;To turn off adaptive interrupt moderation&lt;br&gt;ethtool -C ethX adaptive-rx off adaptive-tx off&lt;br&gt; To turn on adaptive interrupt moderation&lt;br&gt;ethtool -C ethX adaptive-rx on adaptive-tx on &lt;/p&gt;
&lt;p&gt;A good place to start for general tuning is 84 µs, or ~12000 interrupts/s. If you see rx_dropped&lt;br&gt;counters are running during traffic (using ethtool -S ethX) then you probably have too slow of a CPU,&lt;br&gt;not enough buffers from the adapter’s ring size (ethtool -G) to hold packets for 84 µs or to low of an&lt;br&gt;interrupt rate.&lt;br&gt;ethtool -C ethX adaptive-rx off adaptive-tx off rx-usecs 84 tx-usecs 84&lt;/p&gt;
&lt;p&gt;The next value to try, if you are not maxed out on CPU utilization, is 62 µs. This uses more CPU, but it&lt;br&gt;services buffers faster, and requires fewer descriptors (ring size, ethtool -G).&lt;br&gt;ethtool -C ethX adaptive-rx off adaptive-tx off rx-usecs 62 tx-usecs 62&lt;/p&gt;
&lt;p&gt;If your CPU is at 100%, then increasing the interrupt rate is not advised. In certain circumstances such&lt;br&gt;as a CPU bound workload, you might want to increase the µs value to enable more CPU time for other&lt;br&gt;applications.&lt;/p&gt;
&lt;p&gt;If you require low latency performance and/or have plenty of CPU to devote to network processing, you&lt;br&gt;can disable interrupt moderation entirely, which enables the interrupts to fire as fast as possible.&lt;br&gt;ethtool -C ethX adaptive-rx off adaptive-tx off rx-usecs 0 tx-usecs 0&lt;/p&gt;
&lt;p&gt;If cache pressure is suspected (many queues active) reducing buffers from default can help Intel® Data&lt;br&gt;Direct I/O (Intel® DDIO) operate with better efficiently. Intel recommends trying 128 or 256 per queue,&lt;br&gt;being aware that an increase in interrupt rate via ethtool -C might be necessary to avoid an increase in&lt;br&gt;rx_dropped.&lt;br&gt;ethtool -G eth12 rx 256 tx 256 &lt;/p&gt;
&lt;p&gt;Change the Tx and Rx ring sizes as needed, a larger value takes more resources but can provide better forwarding rates:&lt;br&gt;ethtool -G ethX rx 4096 tx 4096&lt;/p&gt;
&lt;p&gt;Layer 2 flow control can impact TCP performance considerably and is recommended to be disabled for most workloads&lt;br&gt;ethtool -A ethX rx off tx off&lt;/p&gt;
&lt;h4 id=&quot;Kernel-parameter&quot;&gt;&lt;a href=&quot;#Kernel-parameter&quot; class=&quot;headerlink&quot; title=&quot;Kernel parameter&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://download.01.org/packet-processing/ONPS2.1/Intel_ONP_Release_2.1_Performance_Test_Report_Rev1.0.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Kernel parameter&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;default_hugepagesz=1G hugepagesz=1G hugepages=16 hugepagesz=2M hugepages=2048 intel_iommu=off isolcpus=1-7 idle=poll pcie_aspm=off&lt;br&gt;pcie_aspm=off (pcie power managment)&lt;/p&gt;
&lt;h4 id=&quot;sysctl-conf&quot;&gt;&lt;a href=&quot;#sysctl-conf&quot; class=&quot;headerlink&quot; title=&quot;sysctl.conf&quot;&gt;&lt;/a&gt;sysctl.conf&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_max_backlog = 300000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_sack = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_budget=600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# allow auto-tuning up to 128MB buffers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem = 4096 87380 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem = 4096 65536 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### 256M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max = 268435456&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max = 268435456&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.somaxconn=16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_tw_reuse=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_adv_win_scale=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_window_scaling = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mtu_probing=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#net.core.default_qdisc = pfifo_fast&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_congestion_control=cubic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# net.ipv4.tcp_frto=1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# works best with &amp;lt;= 500 client computers ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_interval = 3600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_stale_time = 3600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh3 = 8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh2 = 4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh1 = 2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# don&#39;t cache ssthresh from previous connection&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_no_metrics_save = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mtu_probing=1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Mellanox-25GbE-tiny-packages-test&quot;&gt;&lt;a href=&quot;#Mellanox-25GbE-tiny-packages-test&quot; class=&quot;headerlink&quot; title=&quot;Mellanox 25GbE tiny packages test&quot;&gt;&lt;/a&gt;Mellanox 25GbE tiny packages test&lt;/h4&gt;&lt;p&gt;4.14.38 defaults driver in mellanox&lt;br&gt;Intel update to 2.4.6 driver&lt;br&gt;enable irqbalance, big performance gap compare with intel and mellanox&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Found the single port limit, the max is iperf3 and qperf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# tune mtu to 100 to test tiny packages&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2     23.60      2.21      1.66      1.79      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     27.62     22.70      2.04      6.58      0.00      0.00      2.07      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      4.02     20.48      0.39      4.79      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.06      0.00      0.01      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 13628292.96 13155007.58 1516361.42 1463669.72      0.00      0.00      0.00     49.69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2 13628292.96 13155007.55 1516361.42 1463669.71      0.00      0.00      0.00     49.69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.03      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00     87.99      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iperf3 qperf hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      9.78      8.30      0.79      3.27      0.00      0.00      1.05      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2 10573306.56 9479324.80 1145456.45 1031709.27      0.00      0.00      0.00     37.53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.64      0.05      0.42      0.01      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1      0.00      0.05      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     15.42      8.34      1.21      3.27      0.00      0.00      2.08      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.08      0.00      0.01      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 10573306.56 9479324.83 1145456.45 1031709.27      0.00      0.00      0.00     37.53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00     17.28      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -i p5p2 (default driver)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: mlx5_core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 5.0-0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: 14.22.1002 (MT_2420110034)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:05:00.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; p5p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Channel parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p5p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;05:00.0 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;05:00.1 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g p5p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p5p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### intel XXV710 just only&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2 638985.97 561219.31  47179.49  35996.44      0.00      0.00      0.97      1.55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.96      0.96      0.12      0.12      0.00      0.00      0.96      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.75      0.03      0.43      0.00      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     16.02      9.07      1.25      3.15      0.00      0.00      2.07      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1 1274325.00 1500723.53 117041.60 140325.32      0.00      0.00      0.97      4.60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1     10.27      9.03      0.82      3.14      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0 1913311.11 2061943.42 164221.10 176321.80      0.00      0.00      1.93      2.89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      1.93      1.92      0.23      0.23      0.00      0.00      0.96      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.96      0.96      0.12      0.12      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00    376.04      0.00 551105.10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;########after install new driver, just iperf3 and qperf ,no hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; you want get the value, you must turn down the combined number, If you use default value(40), you will get the bad performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      7.27      6.33      0.62      2.83      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.96      0.96      0.12      0.12      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.62      0.05      0.42      0.01      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1 1329967.15 5047114.53 144536.02 560435.29      0.00      0.00      0.96     18.36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     12.90      6.38      1.04      2.83      0.00      0.00      2.08      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2 9065347.53 5169871.40 1005450.11 570174.50      0.00      0.00      0.96     32.95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0 10395315.01 10216986.82 1149986.17 1130609.90      0.00      0.00      1.93     18.84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.95      0.96      0.12      0.12      0.00      0.00      0.95      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      1.91      1.93      0.23      0.23      0.00      0.00      0.95      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00   1397.61      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ iperf3 qperf hping3 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      4.00      2.02      0.39      1.30      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.97      0.95      0.12      0.12      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2     12.80      7.00      0.91      1.72      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1 1199952.10 3400065.27 117937.47 367595.79      0.00      0.00      0.97     12.05&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     16.80      9.03      1.30      3.02      0.00      0.00      2.05      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2 5612070.10 3728111.02 609006.93 402145.77      0.00      0.00      0.97     19.96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0 6812021.83 7128179.62 726944.35 769741.92      0.00      0.00      1.95     12.61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.97      0.95      0.12      0.12      0.00      0.00      0.97      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      1.95      1.90      0.24      0.23      0.00      0.00      0.97      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00   1607.30      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;################ Intel 82599ES, iperf3 qperf hping3, stop irqbalace pin CPU&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ modinfo ixgbe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/4.14.38/updates/drivers/net/ethernet/intel/ixgbe/ixgbe.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        5.3.4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2 5278807.03 5078328.86 1457147.96 1384356.92      0.00      0.00      1.93     59.68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      3.94      7.43      0.38      2.39      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2 2232922.19 2348985.92 605712.92 635339.92      0.00      0.00      0.97     52.05&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1     13.35      2.40      0.96      1.36      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     17.29      9.83      1.34      3.75      0.00      0.00      2.08      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1 3045885.03 2729341.71 851435.07 749016.58      0.00      0.00      0.97     69.75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00  11207.90      0.00 584046.17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### throughput test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      3.74     11.08      0.37      3.76      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2 341967.08 334926.50 2433153.42 2433317.47      0.00      0.00      1.92     99.67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2     13.90      0.04      0.99      0.00      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1      0.96      0.96      0.12      0.12      0.00      0.00      0.96      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2 168791.45 166256.97 1216628.27 1216686.42      0.00      0.00      0.96     99.67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     17.64     11.12      1.36      3.76      0.00      0.00      2.07      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2      0.96      0.97      0.12      0.12      0.00      0.00      0.96      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      1.92      1.93      0.23      0.23      0.00      0.00      1.92      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1 173175.65 168669.40 1216525.38 1216629.82      0.00      0.00      0.96     99.67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00      0.19      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g p6p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p6p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; p6p2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Channel parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p6p2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;BCM-57800&quot;&gt;&lt;a href=&quot;#BCM-57800&quot; class=&quot;headerlink&quot; title=&quot;BCM 57800&quot;&gt;&lt;/a&gt;BCM 57800&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1 182980.91 182988.55 1213462.71 1213462.48      0.00      0.00      1.03     99.41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.96      0.96      0.12      0.12      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2 182758.29 183705.45 1218153.80 1218129.53      0.00      0.00      1.04     99.79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1 365739.21 366694.01 2431616.51 2431592.01      0.00      0.00      2.07     99.60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2      0.00      0.03      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.06      0.00      0.01      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1      0.96      0.96      0.12      0.12      0.00      0.00      0.96      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3      1.92      1.92      0.23      0.23      0.00      0.00      0.97      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -i em1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: bnx2x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 1.712.30-0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: FFV08.07.25 bc 7.13.54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:01:00.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## only qperf and iperf3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2 2676250.24 2597239.00 307173.34 297470.77      0.00      0.00      0.29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          br1      1.93      1.71      0.10      0.73      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:    virbr0-nic      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      2.05      2.22      0.15      0.75      0.00      0.00      0.09&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          br0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3     69.98      0.02      4.55      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:       virbr0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00  12911.67      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## add hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2 2715150.78 2625172.99 287147.79 282500.43      0.00      0.00      0.12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          br1      2.10      1.91      0.12      0.78      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:    virbr0-nic      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      2.16      2.42      0.16      0.82      0.00      0.00      0.09&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          br0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3    180.35      0.00     11.44      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:       virbr0      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00  11950.33      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; em2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Channel parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; em2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g em2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; em2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4078&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4078&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4078&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4078&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;X710-SR-IOV&quot;&gt;&lt;a href=&quot;#X710-SR-IOV&quot; class=&quot;headerlink&quot; title=&quot;X710 SR-IOV&quot;&gt;&lt;/a&gt;X710 SR-IOV&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         ens7 168087.45 167244.92 1214711.75 1214295.86      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00      9.12      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## iperf3 qperf hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         ens7 3015053.84 1545695.74 319456.91 130030.16      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00    120.18      0.00 708870.92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## After upgrade phsical server driver to 2.4.6, update kvm driver to 3.5.6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.17      0.17      0.01      0.01      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         ens7 172220.74 186424.69 1217742.67 1217184.37      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00      3.78      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.39      0.39      0.03      0.03      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         ens7 1751916.51 2013807.13 190037.14 1107649.57      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00   2977.47      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### iperf3 qperf hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         ens7 2140348.58 2171369.66 212219.60 884656.60      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00    541.36      0.00 621835.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  17.7 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  17.9 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  28.2 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  32.5 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  113 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  104 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  258 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  899 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -i ens7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: i40evf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 1.6.27-k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: N/A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;expansion-rom-version:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:00:07.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$  modinfo i40evf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/3.10.0-693.21.1.el7.x86_64/updates/drivers/net/ethernet/intel/i40evf/i40evf.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        3.5.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; ens7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Channel parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ens7:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Other:		1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Combined:	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g ens7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ens7:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;CentOS-6-9-4-3-driver&quot;&gt;&lt;a href=&quot;#CentOS-6-9-4-3-driver&quot; class=&quot;headerlink&quot; title=&quot;CentOS 6.9 + 4.3 driver&quot;&gt;&lt;/a&gt;CentOS 6.9 + 4.3 driver&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      4.26      0.60      0.41      0.82      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.62      1.71      0.42      1.20      0.00      0.00      1.04      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1 354717.85 211784.20 2944052.78 1132173.42      0.00      0.00      1.00     96.47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2 319011.85 188263.78 2707971.59 706496.72      0.00      0.00      0.00     88.73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1      9.88      2.30      0.83      2.02      0.00      0.00      2.07      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 673729.71 400047.98 5652024.37 1838670.15      0.00      0.00      1.00     92.60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00    662.10      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/2.6.32-696.23.1.el6.x86_64/weak-updates/mlnx-ofa_kernel/drivers/net/ethernet/mellanox/mlx4/mlx4_core.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        4.3-1.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-151 ~]&lt;span class=&quot;comment&quot;&gt;# ethtool -i p7p1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: mlx5_core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 4.3-1.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: 14.22.1002 (MT_2420110034)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:04:00.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-151 ~]&lt;span class=&quot;comment&quot;&gt;# ethtool -g p7p1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p7p1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity_bynode.sh 0 p7p1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Discovered irqs &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; p7p1: 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Optimizing IRQs &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; Single port traffic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 156 core_id 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 157 core_id 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 158 core_id 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 159 core_id 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 160 core_id 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 161 core_id 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 162 core_id 12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 163 core_id 14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 164 core_id 16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 165 core_id 18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 166 core_id 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 167 core_id 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 168 core_id 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 169 core_id 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 170 core_id 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 171 core_id 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 172 core_id 12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 173 core_id 14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 174 core_id 16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Assign irq 175 core_id 18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### after setting in the pair node&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p1 496665.72 481303.14 2969345.74 3023342.07      0.00      0.00      1.00     99.07&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p7p2 444718.82 438366.07 2880823.02 2936725.32      0.00      0.00      0.00     96.23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      7.95      1.64      0.59      1.29      0.00      0.00      1.05      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      2.01      0.62      0.25      0.77      0.00      0.00      1.05      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1      9.97      2.26      0.84      2.06      0.00      0.00      2.09      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 941384.53 919669.20 5850168.76 5960067.39      0.00      0.00      1.00     97.65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00   2328.18      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  8.66 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  8.86 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  9.5 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  38 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  44.5 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  65 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  139 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_lat:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    latency  =  495 us&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#small packets iperf3 and qperf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      4.58      0.03      0.42      0.00      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.67      3.38      0.42      2.27      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1 7518461.59 7850847.67 835373.70 872644.45      0.00      0.00      0.00     28.59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.00      0.05      0.00      0.01      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     10.24      3.41      0.85      2.28      0.00      0.00      2.06      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 7518461.59 7850847.71 835373.70 872644.46      0.00      0.00      0.00     28.59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00  11621.17      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### add hping3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p6p2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em1      4.36      0.04      0.41      0.01      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em2      5.65      3.43      0.42      2.06      0.00      0.00      1.03      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:          em4      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p1 5198911.69 5316793.59 539917.26 563106.96      0.00      0.00      0.00     18.45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         p5p2      0.00      0.04      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond1     10.01      3.47      0.84      2.06      0.00      0.00      2.05      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:        bond3 5198911.69 5316793.64 539917.26 563106.97      0.00      0.00      0.00     18.45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:     atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Average:         0.00      0.00   4694.92      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Test-server&quot;&gt;&lt;a href=&quot;#Test-server&quot; class=&quot;headerlink&quot; title=&quot;Test server&quot;&gt;&lt;/a&gt;Test server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table
    
    </summary>
    
      <category term="network" scheme="http://yoursite.com/categories/network/"/>
    
    
      <category term="nic" scheme="http://yoursite.com/tags/nic/"/>
    
      <category term="ethtool" scheme="http://yoursite.com/tags/ethtool/"/>
    
      <category term="debug" scheme="http://yoursite.com/tags/debug/"/>
    
      <category term="driver" scheme="http://yoursite.com/tags/driver/"/>
    
      <category term="irq" scheme="http://yoursite.com/tags/irq/"/>
    
      <category term="pin" scheme="http://yoursite.com/tags/pin/"/>
    
  </entry>
  
  <entry>
    <title>ipmitool</title>
    <link href="http://yoursite.com/2018/05/27/ipmi/"/>
    <id>http://yoursite.com/2018/05/27/ipmi/</id>
    <published>2018-05-27T07:35:59.000Z</published>
    <updated>2018-05-27T08:09:37.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;set-boot-dev&quot;&gt;&lt;a href=&quot;#set-boot-dev&quot; class=&quot;headerlink&quot; title=&quot;set boot dev&quot;&gt;&lt;/a&gt;set boot dev&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ipmitool -I lanplus -H x.x.x.x -U USER -P PASSWORD chassis bootdev bios [ pxe | cdrom ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;debug-info&quot;&gt;&lt;a href=&quot;#debug-info&quot; class=&quot;headerlink&quot; title=&quot;debug info&quot;&gt;&lt;/a&gt;debug info&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ipmitool lan &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; shell &lt;span class=&quot;comment&quot;&gt;# get ipmitool shell, type &#39;help&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; sel list &lt;span class=&quot;comment&quot;&gt;# Show system event log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; sdr &lt;span class=&quot;comment&quot;&gt;# List sensor data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; sdr elist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#filter string&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool sdr list &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool sdr &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; list &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool sdr &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; Temperature &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool sdr &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; Fan &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool sdr &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Power Supply&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;User-and-network&quot;&gt;&lt;a href=&quot;#User-and-network&quot; class=&quot;headerlink&quot; title=&quot;User and network&quot;&gt;&lt;/a&gt;User and network&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -I lanplus &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool lan &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; 1 ipsrc [ static | dhcp ] &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool lan &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; 1 ipaddr &amp;lt;ip&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool lan &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; 1 netmask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -I lanplus -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;user&amp;gt; lan &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; 1 defgw ipaddr &amp;lt;ip&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;pass&amp;gt; user &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; name 5 admin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;pass&amp;gt; user list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;pass&amp;gt; user &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; password 5 &amp;lt;pass&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;pass&amp;gt; channel setaccess 1 5 link=on ipmi=on callin=on privilege=4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;ip&amp;gt; -U &amp;lt;user&amp;gt; -P &amp;lt;pass&amp;gt; user &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; 5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Get-NIC-mac-from-supermicro-server&quot;&gt;&lt;a href=&quot;#Get-NIC-mac-from-supermicro-server&quot; class=&quot;headerlink&quot; title=&quot;Get NIC mac from supermicro server&quot;&gt;&lt;/a&gt;Get NIC mac from supermicro server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;You can find the MAC address &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; LAN1/eth0 (not the BMC MAC) via the SuperMicro IPMI interface by running the following &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -U &lt;span class=&quot;variable&quot;&gt;$IPMI_USER&lt;/span&gt; -P &lt;span class=&quot;variable&quot;&gt;$IPMI_PASS&lt;/span&gt; -H &lt;span class=&quot;variable&quot;&gt;$IPMI_HOST&lt;/span&gt; raw 0x30 0x21 | tail -c 18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The eth0 MAC address will be output &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; this format:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00 25 90 f0 be ef&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;``` &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#### reset mc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool bmc reset cold&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;get-SOL-console&quot;&gt;&lt;a href=&quot;#get-SOL-console&quot; class=&quot;headerlink&quot; title=&quot;get SOL console&quot;&gt;&lt;/a&gt;get SOL console&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;modprobe lanplus &lt;span class=&quot;comment&quot;&gt;# If not yet loaded&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipmitool -H &amp;lt;IP&amp;gt; -U &amp;lt;user&amp;gt; -I lanplus sol activate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://discuss.pivotal.io/hc/en-us/articles/206396927-How-to-work-on-IPMI-and-IPMITOOL&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;set-boot-dev&quot;&gt;&lt;a href=&quot;#set-boot-dev&quot; class=&quot;headerlink&quot; title=&quot;set boot dev&quot;&gt;&lt;/a&gt;set boot dev&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;t
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="ipmi" scheme="http://yoursite.com/tags/ipmi/"/>
    
  </entry>
  
  <entry>
    <title>enable SRIOV in centos7</title>
    <link href="http://yoursite.com/2018/05/10/sriov_in_intel_ethernet/"/>
    <id>http://yoursite.com/2018/05/10/sriov_in_intel_ethernet/</id>
    <published>2018-05-10T02:44:34.000Z</published>
    <updated>2018-05-15T05:54:52.000Z</updated>
    
    <content type="html">&lt;h4 id=&quot;Enable-VT-D-and-VT-in-BIOS&quot;&gt;&lt;a href=&quot;#Enable-VT-D-and-VT-in-BIOS&quot; class=&quot;headerlink&quot; title=&quot;Enable VT-D and VT in BIOS&quot;&gt;&lt;/a&gt;Enable VT-D and VT in BIOS&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grubby --update-kernel=ALL --args=&lt;span class=&quot;string&quot;&gt;&#39;intel_iommu=on&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;sriov-doc&quot;&gt;&lt;a href=&quot;#sriov-doc&quot; class=&quot;headerlink&quot; title=&quot;sriov doc&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.intel.com/content/dam/www/public/us/en/documents/technology-briefs/xl710-sr-iov-config-guide-gbe-linux-brief.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sriov doc&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;On Linux Kernel version 3.8.x and above, the maximum number of VFs supported by the adapter can be queried by reading the sriov_totalvfs parameter via sysfs interface.&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /sys/class/net/ens5f0/device/sriov_totalvfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /sys/class/net/ens5f0/device/sriov_numvfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ lspci | grep Virtual&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:02.0 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:02.1 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:02.2 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:02.3 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:0a.0 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:0a.1 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:0a.2 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:0a.3 Ethernet controller: Intel Corporation XL710/X710 Virtual Function (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 4 &amp;gt; /sys/class/net/ens5f0/device/sriov_numvfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 4 &amp;gt; /sys/class/net/ens5f1/device/sriov_numvfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe -r i40evf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f0 vf 0 mac 52:54:00:e8:a5:78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f0 vf 1 mac 52:54:00:e8:a5:79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f0 vf 2 mac 52:54:00:e8:a5:80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f0 vf 3 mac 52:54:00:e8:a5:81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f1 vf 0 mac 52:54:00:e8:a5:82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f1 vf 1 mac 52:54:00:e8:a5:83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f1 vf 2 mac 52:54:00:e8:a5:84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ens5f1 vf 3 mac 52:54:00:e8:a5:85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ip link show ens5f0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19: ens5f0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 9000 qdisc mq state UP mode DEFAULT qlen 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    link/ether 0c:c4:7a:88:0c:aa brd ff:ff:ff:ff:ff:ff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 0 MAC 52:54:00:e8:a5:78, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 1 MAC 52:54:00:e8:a5:79, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 2 MAC 52:54:00:e8:a5:80, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 3 MAC 52:54:00:e8:a5:81, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ip link show ens5f1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20: ens5f1: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    link/ether 0c:c4:7a:88:0c:ab brd ff:ff:ff:ff:ff:ff&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 0 MAC 52:54:00:e8:a5:82, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 1 MAC 52:54:00:e8:a5:83, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 2 MAC 52:54:00:e8:a5:84, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vf 3 MAC 52:54:00:e8:a5:85, spoof checking on, link-state auto, trust off&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Enable-VT-D-and-VT-in-BIOS&quot;&gt;&lt;a href=&quot;#Enable-VT-D-and-VT-in-BIOS&quot; class=&quot;headerlink&quot; title=&quot;Enable VT-D and VT in BIOS&quot;&gt;&lt;/a&gt;Enable V
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ethernet" scheme="http://yoursite.com/tags/ethernet/"/>
    
      <category term="sriov" scheme="http://yoursite.com/tags/sriov/"/>
    
  </entry>
  
  <entry>
    <title>Compile_4.14.38_to_CentOS7</title>
    <link href="http://yoursite.com/2018/05/03/Compile_4.14.38_to_CentOS7/"/>
    <id>http://yoursite.com/2018/05/03/Compile_4.14.38_to_CentOS7/</id>
    <published>2018-05-03T03:12:03.000Z</published>
    <updated>2018-05-03T09:03:18.000Z</updated>
    
    <content type="html">&lt;p&gt;###&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ wget https://sourceware.org/elfutils/ftp/0.170/elfutils-0.170.tar.bz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tar xjvf elfutils-0.170.tar.bz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ./elfutils-0.170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./configire; make -j 8; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; C_INCLUDE_PATH=/sources/kernel/elfutils-0.170/libelf:/sources/lib/el7/mpich-3.2.1/include/:&lt;span class=&quot;variable&quot;&gt;$C_INCLUDE_PATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cp -v /boot/config-3.10.0-693.21.1.el7.x86_64 .config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make menuconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make rpm-pkg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### enable what your want&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;I-need-Google-BBR&quot;&gt;&lt;a href=&quot;#I-need-Google-BBR&quot; class=&quot;headerlink&quot; title=&quot;I need Google BBR&quot;&gt;&lt;/a&gt;I need Google BBR&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;net.core.default_qdisc=fq&#39;&lt;/span&gt; | sudo tee &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;net.ipv4.tcp_congestion_control=bbr&#39;&lt;/span&gt; | sudo tee &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo sysctl -p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sysctl net.ipv4.tcp_available_congestion_control&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_available_congestion_control = cubic bbr reno&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sysctl -n net.ipv4.tcp_congestion_control&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bbr&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;And-lustre-client&quot;&gt;&lt;a href=&quot;#And-lustre-client&quot; class=&quot;headerlink&quot; title=&quot;And lustre client&quot;&gt;&lt;/a&gt;And lustre client&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ modinfo lustre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/4.14.38/kernel/drivers/staging/lustre/lustre/llite/lustre.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;license:        GPL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        2.6.99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;description:    Lustre Client File System&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;author:         OpenSFS, Inc. &amp;lt;http://www.lustre.org/&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;alias&lt;/span&gt;:          fs-lustre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;srcversion:     76867314D4CA935952377A8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;depends:        obdclass,ptlrpc,libcfs,lnet,lmv,mdc,lov&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;staging:        Y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;retpoline:      Y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;intree:         Y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name:           lustre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vermagic:       4.14.38 SMP mod_unload modversions&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;###&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;s
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="kernel" scheme="http://yoursite.com/tags/kernel/"/>
    
  </entry>
  
  <entry>
    <title>Ansible</title>
    <link href="http://yoursite.com/2018/04/12/ansible/"/>
    <id>http://yoursite.com/2018/04/12/ansible/</id>
    <published>2018-04-12T07:23:03.000Z</published>
    <updated>2018-04-12T07:24:18.000Z</updated>
    
    <content type="html">&lt;p&gt;###&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ansible-playbook playbook.yml --start-at=&lt;span class=&quot;string&quot;&gt;&quot;install packages&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ansible-playbook playbook.yml --step &lt;span class=&quot;comment&quot;&gt;## every step will ask you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;###&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ansible" scheme="http://yoursite.com/tags/ansible/"/>
    
  </entry>
  
  <entry>
    <title>Setting up the IOR for benchmark</title>
    <link href="http://yoursite.com/2018/04/09/Setting-up-the-IOR-for-benchmark/"/>
    <id>http://yoursite.com/2018/04/09/Setting-up-the-IOR-for-benchmark/</id>
    <published>2018-04-09T07:31:43.000Z</published>
    <updated>2018-04-10T09:57:27.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Install-mpich-in-each-node&quot;&gt;&lt;a href=&quot;#Install-mpich-in-each-node&quot; class=&quot;headerlink&quot; title=&quot;Install mpich in each node&quot;&gt;&lt;/a&gt;Install mpich in each node&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install wget -y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir src;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://www.mpich.org/static/downloads/3.2.1/mpich-3.2.1.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install gcc gcc-c++ gcc-fortran kernel-devel -y &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -xvf mpich-3.2.1.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=PATH=/mpich-3.2.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;disable-firewall-and-selinux&quot;&gt;&lt;a href=&quot;#disable-firewall-and-selinux&quot; class=&quot;headerlink&quot; title=&quot;disable firewall and selinux&quot;&gt;&lt;/a&gt;disable firewall and selinux&lt;/h4&gt;&lt;h4 id=&quot;Add-env-var&quot;&gt;&lt;a href=&quot;#Add-env-var&quot; class=&quot;headerlink&quot; title=&quot;Add env var&quot;&gt;&lt;/a&gt;Add env var&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH=/mpich-3.2.1/bin:&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; LD_LIBRARY_PATH=/mpich-3.2.1/lib:&lt;span class=&quot;variable&quot;&gt;$LD_LIBRARY_PATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; C_INCLUDE_PATH=/sources/lib/el7/mpich-3.2.1/include/:&lt;span class=&quot;variable&quot;&gt;$C_INCLUDE_PATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Add-host-mapping-etc-hosts-for-each-nodes&quot;&gt;&lt;a href=&quot;#Add-host-mapping-etc-hosts-for-each-nodes&quot; class=&quot;headerlink&quot; title=&quot;Add host mapping /etc/hosts for each nodes&quot;&gt;&lt;/a&gt;Add host mapping /etc/hosts for each nodes&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.1 server-1 &lt;span class=&quot;comment&quot;&gt;## mpirun ior xxxxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.2 server-2 &lt;span class=&quot;comment&quot;&gt;## ior running&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.3 server-3 &lt;span class=&quot;comment&quot;&gt;## ior running&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.4 server-4 &lt;span class=&quot;comment&quot;&gt;## ior running&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-mpi-hosts-file&quot;&gt;&lt;a href=&quot;#Create-mpi-hosts-file&quot; class=&quot;headerlink&quot; title=&quot;Create mpi_hosts file&quot;&gt;&lt;/a&gt;Create mpi_hosts file&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat mpi_hosts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.2:4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.3:4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10.xx.xx.4:4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Test&quot;&gt;&lt;a href=&quot;#Test&quot; class=&quot;headerlink&quot; title=&quot;Test&quot;&gt;&lt;/a&gt;Test&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpirun &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; mpi_hosts -n 8 &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;hello world&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hello world&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Install-IOR-in-the-share-dir&quot;&gt;&lt;a href=&quot;#Install-IOR-in-the-share-dir&quot; class=&quot;headerlink&quot; title=&quot;Install IOR in the share dir&quot;&gt;&lt;/a&gt;Install IOR in the share dir&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/LLNL/ior.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;module load mpi/openmpi-x86_64 (failed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bootstrap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --with-lustre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make clean &amp;amp;&amp;amp; make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./src/ior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IOR-3.0.1: MPI Coordinated Test of Parallel I/O&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Began: Mon Apr  9 04:03:16 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command line used: src/ior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Machine: Linux bgi-sz1-homerl-test73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Test 0 started: Mon Apr  9 04:03:16 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Summary:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	api                = POSIX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; filename      = &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;File&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	access             = single-shared-file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ordering &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; a file = sequential offsets&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ordering inter file= no tasks offsets&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	clients            = 1 (1 per node)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	repetitions        = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	xfersize           = 262144 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	blocksize          = 1 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	aggregate filesize = 1 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access    bw(MiB/s)  block(KiB) xfer(KiB)  open(s)    wr/rd(s)   close(s)   total(s)   iter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------    ---------  ---------- ---------  --------   --------   --------   --------   ----&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write     1621.30    1024.00    256.00     0.000077   0.000537   0.000003   0.000617   0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;      4810       1024.00    256.00     0.000003   0.000204   0.000001   0.000208   0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remove    -          -          -          -          -          -          0.000099   0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Max Write: 1621.30 MiB/sec (1700.06 MB/sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Max Read:  4809.98 MiB/sec (5043.63 MB/sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Summary of all tests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Operation   Max(MiB)   M&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;(MiB)  Mean(MiB)     StdDev    Mean(s) Test&lt;span class=&quot;comment&quot;&gt;# #Tasks tPN reps fPP reord reordoff reordrand seed segcnt blksiz xsize aggsize API RefNum&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write        1621.30    1621.30    1621.30       0.00    0.00062 0 1 1 1 0 0 1 0 0 1 1048576 262144 1048576 POSIX 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;         4809.98    4809.98    4809.98       0.00    0.00021 0 1 1 1 0 0 1 0 0 1 1048576 262144 1048576 POSIX 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Finished: Mon Apr  9 04:03:16 2018&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Benchmark&quot;&gt;&lt;a href=&quot;#Benchmark&quot; class=&quot;headerlink&quot; title=&quot;Benchmark&quot;&gt;&lt;/a&gt;Benchmark&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpirun &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; mpi_hosts  /src/ior -v &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO -N 8 -i3 -g -w -W -r &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 5 -b 10g -T 100 -F &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; -C -t 1m -o /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;File1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IOR-3.0.1: MPI Coordinated Test of Parallel I/O&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Began: Mon Apr  9 21:31:07 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command line used: /src/ior -v &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO -N 8 -i3 -g -w -W -r &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 5 -b 20g -T 3600 -F &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; -C -t 1m -o /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;File1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Machine: Linux cngb-rbh-m20-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Start time skew across all tasks: 32.29 sec&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Test 0 started: Mon Apr  9 21:31:07 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Path: /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FS: 972.2 TiB   Used FS: 26.7%   Inodes: 113.9 Mi   Used Inodes: 25.8%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Participating tasks: 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Using reorderTasks &lt;span class=&quot;string&quot;&gt;&#39;-C&#39;&lt;/span&gt; (expecting block, not cyclic, task assignment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Summary:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	api                = MPIIO (version=3, subversion=1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; filename      = /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;File1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	access             = file-per-process, independent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	pattern            = strided (5 segments)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ordering &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; a file = sequential offsets&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ordering inter file= constant task offsets = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	clients            = 8 (4 per node)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	repetitions        = 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	xfersize           = 1 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	blocksize          = 20 GiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	aggregate filesize = 800 GiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access    bw(MiB/s)  block(KiB) xfer(KiB)  open(s)    wr/rd(s)   close(s)   total(s)   iter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------    ---------  ---------- ---------  --------   --------   --------   --------   ----&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write     2801.92    20971520   1024.00    0.050119   292.31     0.006433   292.37     0   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Verifying contents of the file(s) just written.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mon Apr  9 21:36:00 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;      1410.24    20971520   1024.00    0.020212   580.86     0.037729   580.89     0   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remove    -          -          -          -          -          -          0.060562   0   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write     2499.73    20971520   1024.00    0.042546   327.65     0.056297   327.72     1   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Verifying contents of the file(s) just written.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mon Apr  9 22:01:19 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;      1290.26    20971520   1024.00    0.049267   634.89     0.065045   634.91     1   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remove    -          -          -          -          -          -          0.037253   1   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write     2788.98    20971520   1024.00    0.067497   293.71     0.070010   293.73     2   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Verifying contents of the file(s) just written.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mon Apr  9 22:27:01 2018&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;      1455.20    20971520   1024.00    0.096816   562.92     0.087327   562.95     2   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remove    -          -          -          -          -          -          0.003740   2   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Max Write: 2801.92 MiB/sec (2938.03 MB/sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Max Read:  1455.20 MiB/sec (1525.89 MB/sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Summary of all tests:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Operation   Max(MiB)   M&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;(MiB)  Mean(MiB)     StdDev    Mean(s) Test&lt;span class=&quot;comment&quot;&gt;# #Tasks tPN reps fPP reord reordoff reordrand seed segcnt blksiz xsize aggsize API RefNum&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;write        2801.92    2499.73    2696.88     139.50  304.60461 0 8 4 3 1 1 1 0 0 5 21474836480 1048576 858993459200 MPIIO 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;         1455.20    1290.26    1385.23      69.62  592.91649 0 8 4 3 1 1 1 0 0 5 21474836480 1048576 858993459200 MPIIO 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Finished: Mon Apr  9 22:45:55 2018&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Mdtest&quot;&gt;&lt;a href=&quot;#Mdtest&quot; class=&quot;headerlink&quot; title=&quot;Mdtest&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/mdtest/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mdtest&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## 4 servers, 4 slots = 16 tasks&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pes_per_node=4 &lt;span class=&quot;comment&quot;&gt;### equal server number&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## Total 16x1048576 files&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpirun &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; mpi_hosts  /ior/src/mdtest &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO  -n 1048576 -F -C -T -r -N &lt;span class=&quot;variable&quot;&gt;$pes_per_node&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## Total 16x1048576 files&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpirun &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; mpi_hosts  /ior/src/mdtest &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO -n 1048576 -F -C -T -r -N &lt;span class=&quot;variable&quot;&gt;$pes_per_node&lt;/span&gt; -u &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##N x nodes to 1 file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpirun &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; mpi_hosts  /ior/src/mdtest &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO –S -C -T -r -n 1 -F &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- started at 04/10/2018 17:52:54 --&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdtest-1.9.3 was launched with 16 total task(s) on 4 node(s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command line used: /ior/src/mdtest &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; MPIIO –S -C -T -r -n 1 -F &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /lustre/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Path: /zfssz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FS: 972.2 TiB   Used FS: 27.5%   Inodes: 113.7 Mi   Used Inodes: 26.2%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16 tasks, 16 files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SUMMARY: (of 1 iterations)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Operation                      Max            M&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;           Mean        Std Dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ---------                      ---            ---           ----        -------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   File creation     :       1174.834       1174.834       1174.834          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   File &lt;span class=&quot;built_in&quot;&gt;stat&lt;/span&gt;         :       1320.703       1320.703       1320.703          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   File &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;         :          0.000          0.000          0.000          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   File removal      :       5856.433       5856.433       5856.433          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Tree creation     :       1607.629       1607.629       1607.629          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Tree removal      :        754.507        754.507        754.507          0.000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- finished at 04/10/2018 17:52:54 --&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;issue&quot;&gt;&lt;a href=&quot;#issue&quot; class=&quot;headerlink&quot; title=&quot;issue&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://wiki.lustre.org/IOR&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;issue&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Note: There is currently a bug in some versions of the libfabric library, notably version 1.3.0, that can cause a delay in starting MPI applications. When this occurs the following warning will appear in the command output:&lt;br&gt;hfi_wait_for_device: The /dev/hfi1_0 device failed to appear after 15.0 seconds: Connection timed out&lt;br&gt;This issue affects RHEL and CentOS 7.3, and is resolved in RHEL / CentOS 7.4+ and the upstream project. Details can be found here:&lt;br&gt;&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1408316&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1408316&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Install-mpich-in-each-node&quot;&gt;&lt;a href=&quot;#Install-mpich-in-each-node&quot; class=&quot;headerlink&quot; title=&quot;Install mpich in each node&quot;&gt;&lt;/a&gt;Install 
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="benchmark" scheme="http://yoursite.com/tags/benchmark/"/>
    
      <category term="MPI" scheme="http://yoursite.com/tags/MPI/"/>
    
  </entry>
  
  <entry>
    <title>Glusterfs and HA</title>
    <link href="http://yoursite.com/2018/04/03/Glusterfs_and_HA/"/>
    <id>http://yoursite.com/2018/04/03/Glusterfs_and_HA/</id>
    <published>2018-04-02T16:41:21.000Z</published>
    <updated>2018-04-03T05:42:41.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Create-volume-for-test-env&quot;&gt;&lt;a href=&quot;#Create-volume-for-test-env&quot; class=&quot;headerlink&quot; title=&quot;Create volume for test env&quot;&gt;&lt;/a&gt;Create volume for test env&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gluster volume create &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol disperse-data 4 redundancy 2 transport tcp server1:/gluster1/glusterfs server1:/gluster2/glusterfs server2:/var/glusterfs/ server3:/var/glusterfs server4:/tank/glusterfs server5:/tank/glusterfs/ force&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gluster volume start &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gluster volume &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol features.cache-invalidation on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;HA&quot;&gt;&lt;a href=&quot;#HA&quot; class=&quot;headerlink&quot; title=&quot;HA&quot;&gt;&lt;/a&gt;HA&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster auth 10.xx.xx.10 10.xx.xx.11 -u hacluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl start pcsd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster setup --name NFS_Server 10.xx.xx.10,192.xx.xx.10 10.xx.xx.11,192.xx.xx.11 --transport udp --rrpmode passive --token 7000 --addr0 10.xx.xx.0 --addr1 192.xx.xx.0 --force&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i &lt;span class=&quot;string&quot;&gt;&#39;s/transport: udp/transport: udpu/g&#39;&lt;/span&gt; /etc/corosync/corosync.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster start 10.xx.xx.10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster start 10.xx.xx.11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; no-quorum-policy=ignore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; stonith-enabled=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create virtual_ip1 ocf:heartbeat:IPaddr2 ip=10.xx.xx.10 cidr_netmask=24 op monitor interval=30s --group nfsgroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create glusterfs-mount ocf:heartbeat:Filesystem device=10.xx.xx.10:/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol directory=/glusterfs fstype=glusterfs --group nfsgroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create nfs-daemon ocf:heartbeat:nfsserver nfs_shared_infodir=/glusterfs/nfsinfo nfs_no_notify=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; --group nfsgroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create nfs-root ocf:heartbeat:exportfs clientspec=10.0.0.0/255.0.0.0 options=rw,no_root_squash directory=/glusterfs fsid=0 --group nfsgroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create virtual_ip2 ocf:heartbeat:IPaddr2 ip=10.xx.xx.11 cidr_netmask=24 op monitor interval=30s --group dc_nfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create dc-glusterfs ocf:heartbeat:Filesystem device=10.xx.xx.11:/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol directory=/sources fstype=glusterfs --group dc_nfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create dc-nfs-daemon ocf:heartbeat:nfsserver nfs_shared_infodir=/glusterfs/nfsinfo nfs_no_notify=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; --group dc_nfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource create dc-nfs-root ocf:heartbeat:exportfs clientspec=10.0.0.0/255.0.0.0 options=rw,no_root_squash directory=/sources fsid=1 --group dc_nfs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;heal-and-split-brain&quot;&gt;&lt;a href=&quot;#heal-and-split-brain&quot; class=&quot;headerlink&quot; title=&quot;heal and split-brain&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://staged-gluster-docs.readthedocs.io/en/release3.7.0beta1/Features/heal-info-and-split-brain-resolution/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;heal and split-brain&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gluster volume heal &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gluster volume heal &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_vol info split-brain&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Create-volume-for-test-env&quot;&gt;&lt;a href=&quot;#Create-volume-for-test-env&quot; class=&quot;headerlink&quot; title=&quot;Create volume for test env&quot;&gt;&lt;/a&gt;Create v
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="glusterfs" scheme="http://yoursite.com/tags/glusterfs/"/>
    
  </entry>
  
  <entry>
    <title>Hotplug and disable hyper theading core in linux</title>
    <link href="http://yoursite.com/2017/12/23/Hotplug-and-disable-hyper-theading-core-in-linux/"/>
    <id>http://yoursite.com/2017/12/23/Hotplug-and-disable-hyper-theading-core-in-linux/</id>
    <published>2017-12-23T06:01:18.000Z</published>
    <updated>2017-12-23T07:20:52.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Found-the-half-cores&quot;&gt;&lt;a href=&quot;#Found-the-half-cores&quot; class=&quot;headerlink&quot; title=&quot;Found the half cores&quot;&gt;&lt;/a&gt;Found the half cores&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ((i=0;i&amp;lt;$(grep -c processor /proc/cpuinfo);i++)); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cat /sys/devices/system/cpu/cpu&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/cache/index2/shared_cpu_list; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt; | awk -F, &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;a[$1]=$0&amp;#125; END&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  count=0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  for (i in a) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     if(count==0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       printf i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       printf &quot;,&quot;i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       count++ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17,4,18,5,19,6,7,8,9,10,11,12,13,0,14,1,15,2,16,3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Turn-off-the-core&quot;&gt;&lt;a href=&quot;#Turn-off-the-core&quot; class=&quot;headerlink&quot; title=&quot;Turn off the core&quot;&gt;&lt;/a&gt;Turn off the core&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 0 &amp;gt; /sys/devices/system/cpu/cpu17/online&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Found-the-half-cores&quot;&gt;&lt;a href=&quot;#Found-the-half-cores&quot; class=&quot;headerlink&quot; title=&quot;Found the half cores&quot;&gt;&lt;/a&gt;Found the half cores&lt;/h3&gt;&lt;
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="cpu" scheme="http://yoursite.com/tags/cpu/"/>
    
  </entry>
  
  <entry>
    <title>linux_errno</title>
    <link href="http://yoursite.com/2017/11/21/linux-errno/"/>
    <id>http://yoursite.com/2017/11/21/linux-errno/</id>
    <published>2017-11-21T06:03:54.000Z</published>
    <updated>2017-11-21T09:11:37.000Z</updated>
    
    <content type="html">&lt;p&gt;Get it from&lt;br&gt;/usr/include/asm-generic/errno.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ifndef _ASM_GENERIC_ERRNO_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define _ASM_GENERIC_ERRNO_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#include &amp;lt;asm-generic/errno-base.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDEADLK		35	/* Resource deadlock would occur */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENAMETOOLONG	36	/* File name too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOLCK		37	/* No record locks available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSYS		38	/* Function not implemented */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTEMPTY	39	/* Directory not empty */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELOOP		40	/* Too many symbolic links encountered */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EWOULDBLOCK	EAGAIN	/* Operation would block */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMSG		42	/* No message of desired type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EIDRM		43	/* Identifier removed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECHRNG		44	/* Channel number out of range */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL2NSYNC	45	/* Level 2 not synchronized */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL3HLT		46	/* Level 3 halted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL3RST		47	/* Level 3 reset */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELNRNG		48	/* Link number out of range */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUNATCH		49	/* Protocol driver not attached */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOCSI		50	/* No CSI structure available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EL2HLT		51	/* Level 2 halted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADE		52	/* Invalid exchange */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADR		53	/* Invalid request descriptor */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EXFULL		54	/* Exchange full */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOANO		55	/* No anode */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADRQC		56	/* Invalid request code */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADSLT		57	/* Invalid slot */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDEADLOCK	EDEADLK&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBFONT		59	/* Bad font file format */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSTR		60	/* Device not a stream */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENODATA		61	/* No data available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETIME		62	/* Timer expired */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSR		63	/* Out of streams resources */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENONET		64	/* Machine is not on the network */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOPKG		65	/* Package not installed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMOTE		66	/* Object is remote */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOLINK		67	/* Link has been severed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADV		68	/* Advertise error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESRMNT		69	/* Srmount error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECOMM		70	/* Communication error on send */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTO		71	/* Protocol error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMULTIHOP	72	/* Multihop attempted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDOTDOT		73	/* RFS specific error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADMSG		74	/* Not a data message */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOVERFLOW	75	/* Value too large for defined data type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTUNIQ	76	/* Name not unique on network */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADFD		77	/* File descriptor in bad state */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMCHG		78	/* Remote address changed */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBACC		79	/* Can not access a needed shared library */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBBAD		80	/* Accessing a corrupted shared library */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBSCN		81	/* .lib section in a.out corrupted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBMAX		82	/* Attempting to link in too many shared libraries */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ELIBEXEC	83	/* Cannot exec a shared library directly */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EILSEQ		84	/* Illegal byte sequence */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ERESTART	85	/* Interrupted system call should be restarted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESTRPIPE	86	/* Streams pipe error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUSERS		87	/* Too many users */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTSOCK	88	/* Socket operation on non-socket */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDESTADDRREQ	89	/* Destination address required */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMSGSIZE	90	/* Message too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTOTYPE	91	/* Protocol wrong type for socket */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOPROTOOPT	92	/* Protocol not available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPROTONOSUPPORT	93	/* Protocol not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESOCKTNOSUPPORT	94	/* Socket type not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOPNOTSUPP	95	/* Operation not supported on transport endpoint */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPFNOSUPPORT	96	/* Protocol family not supported */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EAFNOSUPPORT	97	/* Address family not supported by protocol */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADDRINUSE	98	/* Address already in use */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EADDRNOTAVAIL	99	/* Cannot assign requested address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETDOWN	100	/* Network is down */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETUNREACH	101	/* Network is unreachable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENETRESET	102	/* Network dropped connection because of reset */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNABORTED	103	/* Software caused connection abort */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNRESET	104	/* Connection reset by peer */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOBUFS		105	/* No buffer space available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISCONN		106	/* Transport endpoint is already connected */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTCONN	107	/* Transport endpoint is not connected */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESHUTDOWN	108	/* Cannot send after transport endpoint shutdown */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETOOMANYREFS	109	/* Too many references: cannot splice */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETIMEDOUT	110	/* Connection timed out */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECONNREFUSED	111	/* Connection refused */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EHOSTDOWN	112	/* Host is down */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EHOSTUNREACH	113	/* No route to host */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EALREADY	114	/* Operation already in progress */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINPROGRESS	115	/* Operation now in progress */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESTALE		116	/* Stale file handle */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EUCLEAN		117	/* Structure needs cleaning */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTNAM		118	/* Not a XENIX named type file */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENAVAIL		119	/* No XENIX semaphores available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISNAM		120	/* Is a named type file */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EREMOTEIO	121	/* Remote I/O error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDQUOT		122	/* Quota exceeded */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMEDIUM	123	/* No medium found */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMEDIUMTYPE	124	/* Wrong medium type */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECANCELED	125	/* Operation Canceled */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOKEY		126	/* Required key not available */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYEXPIRED	127	/* Key has expired */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYREVOKED	128	/* Key has been revoked */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EKEYREJECTED	129	/* Key was rejected by service */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/* &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; robust mutexes */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EOWNERDEAD	130	/* Owner died */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTRECOVERABLE	131	/* State not recoverable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define ERFKILL		132	/* Operation not possible due to RF-kill */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define EHWPOISON	133	/* Memory page has hardware error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;/usr/include/asm-generic/errno-base.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#ifndef _ASM_GENERIC_ERRNO_BASE_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define _ASM_GENERIC_ERRNO_BASE_H&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPERM		 1	/* Operation not permitted */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOENT		 2	/* No such file or directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESRCH		 3	/* No such process */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINTR		 4	/* Interrupted system call */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EIO		 5	/* I/O error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENXIO		 6	/* No such device or address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	E2BIG		 7	/* Argument list too long */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOEXEC		 8	/* Exec format error */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBADF		 9	/* Bad file number */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ECHILD		10	/* No child processes */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EAGAIN		11	/* Try again */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOMEM		12	/* Out of memory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EACCES		13	/* Permission denied */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EFAULT		14	/* Bad address */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTBLK		15	/* Block device required */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EBUSY		16	/* Device or resource busy */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EEXIST		17	/* File exists */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EXDEV		18	/* Cross-device link */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENODEV		19	/* No such device */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTDIR		20	/* Not a directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EISDIR		21	/* Is a directory */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EINVAL		22	/* Invalid argument */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENFILE		23	/* File table overflow */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMFILE		24	/* Too many open files */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOTTY		25	/* Not a typewriter */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ETXTBSY		26	/* Text file busy */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EFBIG		27	/* File too large */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ENOSPC		28	/* No space left on device */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ESPIPE		29	/* Illegal seek */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EROFS		30	/* Read-only file system */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EMLINK		31	/* Too many links */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EPIPE		32	/* Broken pipe */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	EDOM		33	/* Math argument out of domain of func */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#define	ERANGE		34	/* Math result not representable */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Get it from&lt;br&gt;/usr/include/asm-generic/errno.h&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="unix" scheme="http://yoursite.com/tags/unix/"/>
    
      <category term="posix" scheme="http://yoursite.com/tags/posix/"/>
    
  </entry>
  
  <entry>
    <title>system call</title>
    <link href="http://yoursite.com/2017/11/09/system_call/"/>
    <id>http://yoursite.com/2017/11/09/system_call/</id>
    <published>2017-11-09T08:22:12.000Z</published>
    <updated>2017-11-09T08:25:13.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part2&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part3&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part4&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一、进程控制：&lt;br&gt;fork    创建一个新进程&lt;br&gt;clone    按指定条件创建子进程&lt;br&gt;execve    运行可执行文件&lt;br&gt;exit    中止进程&lt;br&gt;_exit    立即中止当前进程&lt;br&gt;getdtablesize    进程所能打开的最大文件数&lt;br&gt;getpgid    获取指定进程组标识号&lt;br&gt;setpgid    设置指定进程组标志号&lt;br&gt;getpgrp    获取当前进程组标识号&lt;br&gt;setpgrp    设置当前进程组标志号&lt;br&gt;getpid    获取进程标识号&lt;br&gt;getppid    获取父进程标识号&lt;br&gt;getpriority    获取调度优先级&lt;br&gt;setpriority    设置调度优先级&lt;br&gt;modify_ldt    读写进程的本地描述表&lt;br&gt;nanosleep    使进程睡眠指定的时间&lt;br&gt;nice    改变分时进程的优先级&lt;br&gt;pause    挂起进程，等待信号&lt;br&gt;personality    设置进程运行域&lt;br&gt;prctl    对进程进行特定操作&lt;br&gt;ptrace    进程跟踪&lt;br&gt;sched_get_priority_max    取得静态优先级的上限&lt;br&gt;sched_get_priority_min    取得静态优先级的下限&lt;br&gt;sched_getparam    取得进程的调度参数&lt;br&gt;sched_getscheduler    取得指定进程的调度策略&lt;br&gt;sched_rr_get_interval    取得按RR算法调度的实时进程的时间片长度&lt;br&gt;sched_setparam    设置进程的调度参数&lt;br&gt;sched_setscheduler    设置指定进程的调度策略和参数&lt;br&gt;sched_yield    进程主动让出处理器,并将自己等候调度队列队尾&lt;br&gt;vfork    创建一个子进程，以供执行新程序，常与execve等同时使用&lt;br&gt;wait    等待子进程终止&lt;br&gt;wait3    参见wait&lt;br&gt;waitpid    等待指定子进程终止&lt;br&gt;wait4    参见waitpid&lt;br&gt;capget    获取进程权限&lt;br&gt;capset    设置进程权限&lt;br&gt;getsid    获取会晤标识号&lt;br&gt;setsid    设置会晤标识号&lt;br&gt;二、文件系统控制&lt;br&gt;1、文件读写操作&lt;br&gt;fcntl    文件控制&lt;br&gt;open    打开文件&lt;br&gt;creat    创建新文件&lt;br&gt;close    关闭文件描述字&lt;br&gt;read    读文件&lt;br&gt;write    写文件&lt;br&gt;readv    从文件读入数据到缓冲数组中&lt;br&gt;writev    将缓冲数组里的数据写入文件&lt;br&gt;pread    对文件随机读&lt;br&gt;pwrite    对文件随机写&lt;br&gt;lseek    移动文件指针&lt;br&gt;_llseek    在64位地址空间里移动文件指针&lt;br&gt;dup    复制已打开的文件描述字&lt;br&gt;dup2    按指定条件复制文件描述字&lt;br&gt;flock    文件加/解锁&lt;br&gt;poll    I/O多路转换&lt;br&gt;truncate    截断文件&lt;br&gt;ftruncate    参见truncate&lt;br&gt;umask    设置文件权限掩码&lt;br&gt;fsync    把文件在内存中的部分写回磁盘&lt;br&gt;2、文件系统操作&lt;br&gt;access    确定文件的可存取性&lt;br&gt;chdir    改变当前工作目录&lt;br&gt;fchdir    参见chdir&lt;br&gt;chmod    改变文件方式&lt;br&gt;fchmod    参见chmod&lt;br&gt;chown    改变文件的属主或用户组&lt;br&gt;fchown    参见chown&lt;br&gt;lchown    参见chown&lt;br&gt;chroot    改变根目录&lt;br&gt;stat    取文件状态信息&lt;br&gt;lstat    参见stat&lt;br&gt;fstat    参见stat&lt;br&gt;statfs    取文件系统信息&lt;br&gt;fstatfs    参见statfs&lt;br&gt;readdir    读取目录项&lt;br&gt;getdents    读取目录项&lt;br&gt;mkdir    创建目录&lt;br&gt;mknod    创建索引节点&lt;br&gt;rmdir    删除目录&lt;br&gt;rename    文件改名&lt;br&gt;link    创建链接&lt;br&gt;symlink    创建符号链接&lt;br&gt;unlink    删除链接&lt;br&gt;readlink    读符号链接的值&lt;br&gt;mount    安装文件系统&lt;br&gt;umount    卸下文件系统&lt;br&gt;ustat    取文件系统信息&lt;br&gt;utime    改变文件的访问修改时间&lt;br&gt;utimes    参见utime&lt;br&gt;quotactl    控制磁盘配额&lt;br&gt;三、系统控制&lt;br&gt;ioctl    I/O总控制函数&lt;br&gt;_sysctl    读/写系统参数&lt;br&gt;acct    启用或禁止进程记账&lt;br&gt;getrlimit    获取系统资源上限&lt;br&gt;setrlimit    设置系统资源上限&lt;br&gt;getrusage    获取系统资源使用情况&lt;br&gt;uselib    选择要使用的二进制函数库&lt;br&gt;ioperm    设置端口I/O权限&lt;br&gt;iopl    改变进程I/O权限级别&lt;br&gt;outb    低级端口操作&lt;br&gt;reboot    重新启动&lt;br&gt;swapon    打开交换文件和设备&lt;br&gt;swapoff    关闭交换文件和设备&lt;br&gt;bdflush    控制bdflush守护进程&lt;br&gt;sysfs    取核心支持的文件系统类型&lt;br&gt;sysinfo    取得系统信息&lt;br&gt;adjtimex    调整系统时钟&lt;br&gt;alarm    设置进程的闹钟&lt;br&gt;getitimer    获取计时器值&lt;br&gt;setitimer    设置计时器值&lt;br&gt;gettimeofday    取时间和时区&lt;br&gt;settimeofday    设置时间和时区&lt;br&gt;stime    设置系统日期和时间&lt;br&gt;time    取得系统时间&lt;br&gt;times    取进程运行时间&lt;br&gt;uname    获取当前UNIX系统的名称、版本和主机等信息&lt;br&gt;vhangup    挂起当前终端&lt;br&gt;nfsservctl    对NFS守护进程进行控制&lt;br&gt;vm86    进入模拟8086模式&lt;br&gt;create_module    创建可装载的模块项&lt;br&gt;delete_module    删除可装载的模块项&lt;br&gt;init_module    初始化模块&lt;br&gt;query_module    查询模块信息&lt;br&gt;&lt;em&gt;get_kernel_syms    取得核心符号,已被query_module代替&lt;br&gt;四、内存管理&lt;br&gt;brk    改变数据段空间的分配&lt;br&gt;sbrk    参见brk&lt;br&gt;mlock    内存页面加锁&lt;br&gt;munlock    内存页面解锁&lt;br&gt;mlockall    调用进程所有内存页面加锁&lt;br&gt;munlockall    调用进程所有内存页面解锁&lt;br&gt;mmap    映射虚拟内存页&lt;br&gt;munmap    去除内存页映射&lt;br&gt;mremap    重新映射虚拟内存地址&lt;br&gt;msync    将映射内存中的数据写回磁盘&lt;br&gt;mprotect    设置内存映像保护&lt;br&gt;getpagesize    获取页面大小&lt;br&gt;sync    将内存缓冲区数据写回硬盘&lt;br&gt;cacheflush    将指定缓冲区中的内容写回磁盘&lt;br&gt;五、网络管理&lt;br&gt;getdomainname    取域名&lt;br&gt;setdomainname    设置域名&lt;br&gt;gethostid    获取主机标识号&lt;br&gt;sethostid    设置主机标识号&lt;br&gt;gethostname    获取本主机名称&lt;br&gt;sethostname    设置主机名称&lt;br&gt;六、socket控制&lt;br&gt;socketcall    socket系统调用&lt;br&gt;socket    建立socket&lt;br&gt;bind    绑定socket到端口&lt;br&gt;connect    连接远程主机&lt;br&gt;accept    响应socket连接请求&lt;br&gt;send    通过socket发送信息&lt;br&gt;sendto    发送UDP信息&lt;br&gt;sendmsg    参见send&lt;br&gt;recv    通过socket接收信息&lt;br&gt;recvfrom    接收UDP信息&lt;br&gt;recvmsg    参见recv&lt;br&gt;listen    监听socket端口&lt;br&gt;select    对多路同步I/O进行轮询&lt;br&gt;shutdown    关闭socket上的连接&lt;br&gt;getsockname    取得本地socket名字&lt;br&gt;getpeername    获取通信对方的socket名字&lt;br&gt;getsockopt    取端口设置&lt;br&gt;setsockopt    设置端口参数&lt;br&gt;sendfile    在文件或端口间传输数据&lt;br&gt;socketpair    创建一对已联接的无名socket&lt;br&gt;七、用户管理&lt;br&gt;getuid    获取用户标识号&lt;br&gt;setuid    设置用户标志号&lt;br&gt;getgid    获取组标识号&lt;br&gt;setgid    设置组标志号&lt;br&gt;getegid    获取有效组标识号&lt;br&gt;setegid    设置有效组标识号&lt;br&gt;geteuid    获取有效用户标识号&lt;br&gt;seteuid    设置有效用户标识号&lt;br&gt;setregid    分别设置真实和有效的的组标识号&lt;br&gt;setreuid    分别设置真实和有效的用户标识号&lt;br&gt;getresgid    分别获取真实的,有效的和保存过的组标识号&lt;br&gt;setresgid    分别设置真实的,有效的和保存过的组标识号&lt;br&gt;getresuid    分别获取真实的,有效的和保存过的用户标识号&lt;br&gt;setresuid    分别设置真实的,有效的和保存过的用户标识号&lt;br&gt;setfsgid    设置文件系统检查时使用的组标识号&lt;br&gt;setfsuid    设置文件系统检查时使用的用户标识号&lt;br&gt;getgroups    获取后补组标志清单&lt;br&gt;setgroups    设置后补组标志清单&lt;br&gt;八、进程间通信&lt;br&gt;ipc    进程间通信总控制调用&lt;br&gt;1、信号&lt;br&gt;sigaction    设置对指定信号的处理方法&lt;br&gt;sigprocmask    根据参数对信号集中的信号执行阻塞/解除阻塞等操作&lt;br&gt;sigpending    为指定的被阻塞信号设置队列&lt;br&gt;sigsuspend    挂起进程等待特定信号&lt;br&gt;signal    参见signal&lt;br&gt;kill    向进程或进程组发信号
&lt;/em&gt;sigblock    向被阻塞信号掩码中添加信号,已被sigprocmask代替&lt;br&gt;&lt;em&gt;siggetmask    取得现有阻塞信号掩码,已被sigprocmask代替
&lt;/em&gt;sigsetmask    用给定信号掩码替换现有阻塞信号掩码,已被sigprocmask代替&lt;br&gt;&lt;em&gt;sigmask    将给定的信号转化为掩码,已被sigprocmask代替
&lt;/em&gt;sigpause    作用同sigsuspend,已被sigsuspend代替&lt;br&gt;sigvec    为兼容BSD而设的信号处理函数,作用类似sigaction&lt;br&gt;ssetmask    ANSI C的信号处理函数,作用类似sigaction&lt;br&gt;2、消息&lt;br&gt;msgctl    消息控制操作&lt;br&gt;msgget    获取消息队列&lt;br&gt;msgsnd    发消息&lt;br&gt;msgrcv    取消息&lt;br&gt;3、管道&lt;br&gt;pipe    创建管道&lt;br&gt;4、信号量&lt;br&gt;semctl    信号量控制&lt;br&gt;semget    获取一组信号量&lt;br&gt;semop    信号量操作&lt;br&gt;5、共享内存&lt;br&gt;shmctl    控制共享内存&lt;br&gt;shmget    获取共享内存&lt;br&gt;shmat    连接共享内存&lt;br&gt;shmdt    拆卸共享内存&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/kernel/syscall/part1/appendix.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.c
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="unix" scheme="http://yoursite.com/tags/unix/"/>
    
      <category term="posix" scheme="http://yoursite.com/tags/posix/"/>
    
  </entry>
  
  <entry>
    <title>mdadm tips</title>
    <link href="http://yoursite.com/2017/11/09/mdadm/"/>
    <id>http://yoursite.com/2017/11/09/mdadm/</id>
    <published>2017-11-09T08:22:12.000Z</published>
    <updated>2017-12-23T07:15:02.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mdadm --create /dev/md/imsm0 -n2  &lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt; imsm /dev/nvme&amp;#123;0..1&amp;#125;n1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm -C /dev/md1 /dev/md/imsm0 -n 2 &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; 1 --bitmap=none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 2000000 &amp;gt; /proc/sys/dev/raid/speed_&lt;span class=&quot;built_in&quot;&gt;limit&lt;/span&gt;_max&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm -Ds &amp;gt; /etc/mdadm.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;If you ‘re running 2 x NVME SSD in a mirror. you’d better set bitmap=none to avoid cpu core 100%&lt;br&gt;Because enterprise SSD has the capacitance&lt;/p&gt;
&lt;h4 id=&quot;Bitmap&quot;&gt;&lt;a href=&quot;#Bitmap&quot; class=&quot;headerlink&quot; title=&quot;Bitmap&quot;&gt;&lt;/a&gt;Bitmap&lt;/h4&gt;&lt;p&gt;Bitmaps optimize rebuild time after a crash, or after removing and re-adding a device.&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mdadm --grow --bitmap=internal /dev/md0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --grow --bitmap=none /dev/md0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;SCAN&quot;&gt;&lt;a href=&quot;#SCAN&quot; class=&quot;headerlink&quot; title=&quot;SCAN&quot;&gt;&lt;/a&gt;SCAN&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mdadm --assemble --scan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --assemble /dev/md1 --scan --force&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --assemble /dev/md1 /dev/sd[abc]2 --force&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;####Dangerours&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --create /dev/md1 --assume-clean &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt;5 -n4 -c64 /dev/sd[abc]2 missing&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Set-readahead&quot;&gt;&lt;a href=&quot;#Set-readahead&quot; class=&quot;headerlink&quot; title=&quot;Set readahead&quot;&gt;&lt;/a&gt;Set readahead&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;blockdev --setra 65536 /dev/mdX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Set-stripe-cache&quot;&gt;&lt;a href=&quot;#Set-stripe-cache&quot; class=&quot;headerlink&quot; title=&quot;Set stripe-cache&quot;&gt;&lt;/a&gt;Set stripe-cache&lt;/h4&gt;&lt;p&gt;memory_consumed = system_page_size &lt;em&gt; nr_disks &lt;/em&gt; stripe_cache_size&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# set 16MB for /dev/md0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 16384 &amp;gt; /sys/block/md0/md/stripe_cache_size&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Disable-NCQ&quot;&gt;&lt;a href=&quot;#Disable-NCQ&quot; class=&quot;headerlink&quot; title=&quot;Disable NCQ&quot;&gt;&lt;/a&gt;Disable NCQ&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; sd[abcde]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1 &amp;gt; /sys/block/&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/device/queue_depth&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Clear-mdadm-infomation&quot;&gt;&lt;a href=&quot;#Clear-mdadm-infomation&quot; class=&quot;headerlink&quot; title=&quot;Clear mdadm infomation&quot;&gt;&lt;/a&gt;Clear mdadm infomation&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mdadm --stop /dev/md0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --zero-superblock /dev/sdla&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Replace-device&quot;&gt;&lt;a href=&quot;#Replace-device&quot; class=&quot;headerlink&quot; title=&quot;Replace device&quot;&gt;&lt;/a&gt;Replace device&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# check info&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm --detail /dev/mdx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mark the fail dev&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm /dev/md0 &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /dev/sdx  &lt;span class=&quot;comment&quot;&gt;# &quot;F&quot; in /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# remove the dev&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm /dev/md0 -r /dev/sdx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# re-add it&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mdadm /dev/md0 &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; /dev/sdx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Device-detail&quot;&gt;&lt;a href=&quot;#Device-detail&quot; class=&quot;headerlink&quot; title=&quot;Device detail&quot;&gt;&lt;/a&gt;Device detail&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mdadm -E /dev/sdaa&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sdaa:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          Magic : a92b4efc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Version : 1.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Feature Map : 0x1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Array UUID : c82f3470:5eed5058:083fb704:62315597&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           Name : 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Creation Time : Mon Jan  3 01:09:30 2011&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Raid Level : raid6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Raid Devices : 44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Avail Dev Size : 976772896 (465.76 GiB 500.11 GB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Array Size : 41024460288 (19561.99 GiB 21004.52 GB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Used Dev Size : 976772864 (465.76 GiB 500.11 GB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Data Offset : 272 sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Super Offset : 8 sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          State : active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Device UUID : 788aa9&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt;:3ed46a21:4bf3433d:74823b69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Internal Bitmap : 8 sectors from superblock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Update Time : Mon Jan  3 01:09:30 2011&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       Checksum : b3e6d7a9 - correct&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         Events : 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Chunk Size : 128K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Array Slot : 25 (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Array State : uuuuuuuuuuuuuuuuuuuuuuuuuUuuuuuuuuuuuuuuuuuu&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="mdadm" scheme="http://yoursite.com/tags/mdadm/"/>
    
  </entry>
  
  <entry>
    <title>scsi tips</title>
    <link href="http://yoursite.com/2017/10/26/scsi_tips/"/>
    <id>http://yoursite.com/2017/10/26/scsi_tips/</id>
    <published>2017-10-26T14:39:34.000Z</published>
    <updated>2018-02-04T12:18:12.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Enable-read-write-cache&quot;&gt;&lt;a href=&quot;#Enable-read-write-cache&quot; class=&quot;headerlink&quot; title=&quot;Enable read write cache&quot;&gt;&lt;/a&gt;Enable read write cache&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##SATA&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -W 0 /dev/sdX --&amp;gt; &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -W 1 /dev/sdX --&amp;gt; &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdparm -i /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##SAS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WCE 0 [cha: y, def: 1, sav: 0] --&amp;gt; write caching is disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --inquiry /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --page=ca /dev/sdX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm --set=WCE /dev/sdX --&amp;gt; this enables write caching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –g WCE /dev/sdX  --&amp;gt; get the WCE current value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –s WCE –S /dev/sdX --&amp;gt; To &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; the WCE current and saved values (WCE=1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –c WCE /dev/sdX --&amp;gt; To clear (&lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt;) the WCE current value (WCE=0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sdparm –c WCE –S /dev/sdX --&amp;gt; To clear (&lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt;) the WCE current and saved values (WCE=0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;smart&quot;&gt;&lt;a href=&quot;#smart&quot; class=&quot;headerlink&quot; title=&quot;smart&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.computerworld.com/article/2846009/the-5-smart-stats-that-actually-predict-hard-drive-failure.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;smart&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;SMART 5 - Reallocated_Sector_Count.&lt;br&gt;SMART 187 - Reported_Uncorrectable_Errors.&lt;br&gt;SMART 188 - Command_Timeout.&lt;br&gt;SMART 197 - Current_Pending_Sector_Count.&lt;br&gt;SMART 198 - Offline_Uncorrectable&lt;/p&gt;
&lt;h3 id=&quot;sg3-utils&quot;&gt;&lt;a href=&quot;#sg3-utils&quot; class=&quot;headerlink&quot; title=&quot;sg3_utils&quot;&gt;&lt;/a&gt;sg3_utils&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sg_ses /dev/sg129 -p0x2 -I2,1 -j&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;这个命令的I后面是2就是风扇，1是电源，3是温度&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;然后命令的倒数第2个参数，例如上面命令的1， 就代表第1个风扇，是0，就代表第0个风扇，3就代表第3个风扇&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Smart-check&quot;&gt;&lt;a href=&quot;#Smart-check&quot; class=&quot;headerlink&quot; title=&quot;Smart check&quot;&gt;&lt;/a&gt;Smart check&lt;/h4&gt;&lt;p&gt;Phy reset problem&lt;/p&gt;
&lt;p&gt;Running disparity error count&lt;br&gt;A binary value indicating the cumulative encoded signal imbalance between the one and zero signal state of all characters since dword synchronization has been achieved.&lt;br&gt;&lt;a href=&quot;https://www.seagate.com/staticfiles/support/disc/manuals/Interface%20manuals/100293071c.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;for more scsi info&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;loss of DWORD synchroization&lt;br&gt;These errors mean that there is a problem in the link between the drive and the upstream port, if you have a cable in there the cable may be bad, if not it means one of the port is bad. Ofcourse even if you have a cable it can still mean one of the ports is bad.&lt;br&gt;The way to diagnose it is to use a different disk in the same slot and see if the error goes away or not, if it went away the disk is bad. If the error stayed the original disk is fine but the port on the server/chassis is bad and the server/chassis needs to be replaced.&lt;br&gt;The issue with loss of dword synchronization is that it means additional retries for some sent IOs and it will increase the latency of IOs by way of waiting more for data transmission due to these retransmits.&lt;/p&gt;
&lt;p&gt;SCSI errors in messages&lt;br&gt;“scsi data underrun”&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   handle(0x002d), ioc_status(scsi data underrun)(0x0045), smid(222)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   scsi_status(check condition)(0x02), scsi_state(autosense valid )(0x01)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpt3sas_cm0:   [sense_key,asc,ascq]: [0x06,0x2a,0x01], count(96)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;“REPORT_LUNS handle retries”&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mpt2sas0: REPORT_LUNS: handle(0x000a), retries(0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/jaseywang/3786679&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Replace HDDs&lt;/a&gt;&lt;br&gt;(SAS Serial SCSI Protocol) SSP handle&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:03:03 wtf kernel: [5640834.981956] mpt2sas0: removing handle(0x000c), sas_addr(0x50014ee30011c706)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604300] scsi 0:0:13:0: Direct-Access     SEAGATE  ST2000NM0001     PS06 PQ: 0 ANSI: 6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604308] scsi 0:0:13:0: SSP: handle(0x0018), sas_addr(0x5000c50041f753c5), device_name(0x0000000000000000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604312] scsi 0:0:13:0: SSP: enclosure_logical_id(0x500065b37689abff), slot(4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604316] scsi 0:0:13:0: qdepth(254), tagged(1), simple(1), ordered(0), scsi_level(7), cmd_que(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.604766] sd 0:0:13:0: Attached scsi generic sg1 &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.605237] sd 0:0:13:0: [sdb] 3907029168 512-byte logical blocks: (2.00 TB/1.81 TiB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.606128] sd 0:0:13:0: [sdb] Write Protect is off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.606567] sd 0:0:13:0: [sdb] Write cache: enabled, &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; cache: enabled, supports DPO and FUA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.607915]  sdb: unknown partition table&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:04:48 wtf kernel: [5640939.635779] sd 0:0:13:0: [sdb] Attached SCSI disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sep 26 15:05:46 wtf kernel: [5640997.134363]  sdb: sdb1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;You can enable SCSI logging using echo 0x010401cd &amp;gt; /proc/sys/dev/scsi/logging_level&lt;/p&gt;
&lt;p&gt;显示当前级别：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-dev-scsi-logging-level&quot;&gt;&lt;a href=&quot;#sysctl-dev-scsi-logging-level&quot; class=&quot;headerlink&quot; title=&quot;sysctl dev.scsi.logging_level&quot;&gt;&lt;/a&gt;sysctl dev.scsi.logging_level&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = 0&lt;br&gt;如果不是级别 128，请启用级别 128：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-w-dev-scsi-logging-level-128&quot;&gt;&lt;a href=&quot;#sysctl-w-dev-scsi-logging-level-128&quot; class=&quot;headerlink&quot; title=&quot;sysctl -w dev.scsi.logging_level=128&quot;&gt;&lt;/a&gt;sysctl -w dev.scsi.logging_level=128&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = 128&lt;br&gt;要获取短时间内的非常详细的 scsi 日志记录，请启用级别 -1：&lt;/p&gt;
&lt;h1 id=&quot;sysctl-w-dev-scsi-logging-level-1&quot;&gt;&lt;a href=&quot;#sysctl-w-dev-scsi-logging-level-1&quot; class=&quot;headerlink&quot; title=&quot;sysctl -w dev.scsi.logging_level=-1&quot;&gt;&lt;/a&gt;sysctl -w dev.scsi.logging_level=-1&lt;/h1&gt;&lt;p&gt;dev.scsi.logging_level = -1&lt;br&gt;日志输出将位于 /var/log/messages 中。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi debug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level syntax&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read syntax diagramSkip visual syntax diagram&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       .- ---------------------------.             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       V                             |             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;-scsi_logging_level----+-------------------------+-+--+- -s -+-&amp;gt;&amp;lt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -a-- &amp;lt;level&amp;gt;-----------+    +- -g -+   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -E-- &amp;lt;level&amp;gt;-----------+    &amp;apos;- -c -&amp;apos;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -T-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -S-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -M-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --mlqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --mlcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -L-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --llqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --llcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- -H-- &amp;lt;level&amp;gt;-----------+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --hlqueue-- &amp;lt;level&amp;gt;----+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         +- --hlcomplete-- &amp;lt;level&amp;gt;-+               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         &amp;apos;- -I-- &amp;lt;level&amp;gt;-----------&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current scsi logging level:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dev.scsi.logging_level = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_ERROR=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_TIMEOUT=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_SCAN=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLQUEUE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLCOMPLETE=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_IOCTL=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_logging_level --hlqueue 3 --highlevel 2 --all 1 -s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;New scsi logging level:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dev.scsi.logging_level = 174363209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_ERROR=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_TIMEOUT=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_SCAN=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLQUEUE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_MLCOMPLETE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLQUEUE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_LLCOMPLETE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLQUEUE=3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_HLCOMPLETE=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI_LOG_IOCTL=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://www.ibm.com/support/knowledgecenter/en/linuxonibm/com.ibm.linux.z.lgdd/lgdd_r_scsilog_cmd.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The definitions can be found in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;https://en.opensuse.org/SDB:SCSI_debugging_hints&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;drivers/scsi/scsi_logging.h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The possible areas are:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used by any command which has to be retried/recovered via the SCSI error handling mechanism&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TIMEOUT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used by drivers/scsi/sg.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCAN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Used during device scan, ie whenever a new device / HBA is initialized&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mid-layer queue; requests are being pulled from the block-layer queue and submitted to the HBA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mid-layer queue; requests are being completed by the HBA and results are being pushed back to the block-layer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Low-layer queue; Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Low-layer queue; Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;High-layer queue; command preparation in drivers/scsi/sd.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;High-layer queue; command completion in drivers/scsi/sd.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IOCTL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCSI IOCTL logging&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The detailed error level description:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error logging when a command is recovered via the SCSI error handling mechanism. The following levels are uses:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler thread statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command logging&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Error handler command details&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SCAN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging during HBA / target scanning. The following levels are used:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of unusual devices where LUN 0 has a pqual of 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of devices with pqual 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of SCSI commands sent during scanning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLQUEUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The MLQUEUE area is used when a command is being pulled from the block-layer queue and send to the HBA. It has the following levels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nothing (match completion)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log opcode + command of all commands&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 2 plus dump cmd address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 3 plus dump extra junk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MLCOMPLETE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logging of command completion from the HBA, before the completion is being called for the block-layer request. It has the following levels:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log disposition, result, opcode + command, and conditionally sense data for failures or non SUCCESS dispositions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 1 but for all command completions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 2 plus dump cmd address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;same as 3 plus dump extra junk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and higher: not used&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Starting with SLES10 SP2 there is a command &amp;apos;scsi_logging_level&amp;apos; which allows you to set the areas and levels without having to calculate the bit offsets by hand, very convenient if you want to enable a logging level other than 0xffffffff.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A useful setting of the logging level without being buried in logging details is ERROR=3, SCAN=3, MLQUEUE=2, MLCOMPLETE=2, which evaluates to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo 9411 &amp;gt; /proc/sys/dev/scsi/logging_level&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense Data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x00 00 Log Sense Pages Supported&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x02 00 Write Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x03 00 Read Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x05 00 Verify Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x06 00 Non-medium Errors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0D 00 Current temperature&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0E 00 Mfg Date, Start/Stop,Load/Unload Counters&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x0F 00 Application Client Log (64 entries)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x10 00 Self-Test Results&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x15 00 Background Media Scan Results&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x18 00 Protocol Specific Log Parameters&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x1A 00 Power State Transitiions&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x2F 00 SMART Status and Temperature Reading&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x30 00 Performance Counter Information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x37 00 Performance Statistics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x38 00 Voltage Monitoring Log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LogSense 0x3C 00 Helium Status Log (0 entries)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;From the SBC-4 document, here is a list of Log Pages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Table 180 — Log page codes and subpage codes for direct access block devices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Log page name Page code a Subpage code a Reference&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Application Client 0Fh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ATA PASS-THROUGH Results 16h 00h SAT-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Background Scan Results 15h 00h 6.4.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Background Operation 15h 02h 6.4.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Buffer Over-Run/Under-Run 01h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cache Memory Statistics 19h 20h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Environmental Limits 0Dh 02h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Environmental Reporting 0Dh 01h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Format Status 08h 00h 6.4.4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;General Statistics and Performance 19h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Group Statistics and Performance (1 to 31) 19h 01h to 1Fh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Informational Exceptions 2Fh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last n Deferred Errors Or Asynchronous Events 0Bh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last n Error Events 07h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical Block Provisioning 0Ch 00h 6.4.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LPS Misalignment 15h 03h 6.4.6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non-Medium Error 06h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Non-volatile Cache 17h 00h 6.4.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pending Defects 15h 01h 6.4.8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Power Condition Transitions 1Ah 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Protocol-Specific Ports 18h 00h to FEh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read Error Counters 03h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Self-Test Results 10h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Solid State Media 11h 00h 6.4.9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Start-Stop Cycle Counter 0Eh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Log Pages 00h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Log Pages and Subpages 00h FFh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Supported Subpages 01h to 3Fh FFh SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Temperature 0Dh 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Utilization 0Eh 01h 6.4.10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Verify Error Counters 05h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Write Error Counters 02h 00h SPC-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor specific 30h to 3Eh 00h to FEh n/a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;### [scsi errors](https://www.ibm.com/support/knowledgecenter/en/linuxonibm/com.ibm.linux.z.lgdd/lgdd_t_fcp_wrk_actinfo.html)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/class/scsi_device/&amp;lt;device_name&amp;gt;/device/&amp;lt;attribute&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_denied	Flag that indicates whether access to the device is restricted by the FCP channel.The value is 1 if access is denied and 0 if access is permitted.If access is denied to your Linux instance, confirm that your SCSI devices are configured as intended. Also, be sure that you really want to share a SCSI device. For shared access to a SCSI device, preferably use NPIV). You might also use different FCP channels or target ports.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_shared	This attribute is obsolete. The value is always 0.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;access_readonly	This attribute is obsolete. The value is always 0.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ked	Flag that indicates whether the device is in blocked state (0 or 1).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iocounterbits	The number of bits used for I/O counters.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iodone_cnt	The number of completed or rejected SCSI commands.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioerr_cnt	The number of SCSI commands that completed with an error.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iorequest_cnt	The number of issued SCSI commands.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;queue_type	The type of queue for the SCSI device. The value can be one of the following:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                simple&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ordered&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;model	The model of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rev	The revision of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scsi_level	The SCSI revision level, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type	The type of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vendor	The vendor of the SCSI device, received from inquiry data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fcp_lun	The LUN of the SCSI device in 64-bit format.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hba_id	The bus ID of the SCSI device.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wwpn	The WWPN of the remote port.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zfcp_access_denied	Flag that indicates whether access to the device is restricted by the FCP channel.The value is 1 if access is denied and 0 if access is permitted. If access is denied to your Linux instance, confirm that your SCSI devices are configured as intended. Also, be sure that you really want to share a SCSI device. For shared access to a SCSI device, preferably use NPIV). You might also use different FCP channels or target ports.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zfcp_in_recovery	Shows if unit is in recovery (0 or 1).Shows if unit is in recovery (2 or 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ lsscsi -dLsv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[14:0:93:0]  disk    HGST     HUH721010AL5200  A21D  /dev/sdi [8:128]  10.0TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  device_blocked=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iocounterbits=32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iodone_cnt=0xa066&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ioerr_cnt=0x3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iorequest_cnt=0xa066&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  queue_depth=254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  queue_type=none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  scsi_level=7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  state=running&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  timeout=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  type=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  dir: /sys/bus/scsi/devices/14:0:93:0  [/sys/devices/pci0000:80/0000:80:03.0/0000:85:00.0/host14/port-14:0/expander-14:0/port-14:0:15/end_device-14:0:15/target14:0:93/14:0:93:0]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Enable-read-write-cache&quot;&gt;&lt;a href=&quot;#Enable-read-write-cache&quot; class=&quot;headerlink&quot; title=&quot;Enable read write cache&quot;&gt;&lt;/a&gt;Enable read write
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="scsi" scheme="http://yoursite.com/tags/scsi/"/>
    
      <category term="jbod" scheme="http://yoursite.com/tags/jbod/"/>
    
      <category term="monitor" scheme="http://yoursite.com/tags/monitor/"/>
    
  </entry>
  
  <entry>
    <title>Bash tips</title>
    <link href="http://yoursite.com/2017/10/18/Bash-tips/"/>
    <id>http://yoursite.com/2017/10/18/Bash-tips/</id>
    <published>2017-10-18T02:33:38.000Z</published>
    <updated>2017-10-18T02:46:27.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot;&gt;&lt;a href=&quot;#Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot; class=&quot;headerlink&quot; title=&quot;[Termination Signals] (https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html)&quot;&gt;&lt;/a&gt;[Termination Signals] (&lt;a href=&quot;https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html&lt;/a&gt;)&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;1 SIGHUP The SIGHUP (“hang-up”) signal is used to report that the user’s terminal is disconnected, perhaps because a network or telephone connection was broken.&lt;/li&gt;
&lt;li&gt;2 SIGINT The SIGINT (program interrupt) signal is sent when the user types the INTR character (normally C-c).&lt;/li&gt;
&lt;li&gt;3 The SIGQUIT signal is similar to SIGINT, except that it’s controlled by a different key-the QUIT character, usually C--and produces a core dump when it terminates the process, just like a program error signal. You can think of this as a program error condition “detected” by the user&lt;/li&gt;
&lt;li&gt;9 The SIGKILL signal is used to cause immediate program termination. It cannot be handled or ignored, and is therefore always fatal. It is also not possible to block this signal&lt;/li&gt;
&lt;li&gt;15 The SIGTERM signal is a generic signal used to cause program termination. Unlike SIGKILL, this signal can be blocked, handled, and ignored. It is the normal way to politely ask a program to terminate.&lt;h3 id=&quot;Trap&quot;&gt;&lt;a href=&quot;#Trap&quot; class=&quot;headerlink&quot; title=&quot;Trap&quot;&gt;&lt;/a&gt;Trap&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;mytrap&lt;/span&gt;&lt;/span&gt; () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; hahahahaha&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;trap&lt;/span&gt; mytrap SIGHUP SIGINT SIGQUIT SIGTERM ERR EXIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;myfunc&lt;/span&gt;&lt;/span&gt; () &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;trap&lt;/span&gt;  mytrap RETURN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;#trap  mytrap EXIT #no output&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;I&#39;ve got a bad feeling about this...&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myfunc | cat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sleep 10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Termination-Signals-https-www-gnu-org-software-libc-manual-html-node-Termination-Signals-html&quot;&gt;&lt;a href=&quot;#Termination-Signals-https-w
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="bash" scheme="http://yoursite.com/tags/bash/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>About_nfs</title>
    <link href="http://yoursite.com/2017/08/25/About-nfs/"/>
    <id>http://yoursite.com/2017/08/25/About-nfs/</id>
    <published>2017-08-25T09:57:51.000Z</published>
    <updated>2017-08-28T01:27:55.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;nolock&quot;&gt;&lt;a href=&quot;#nolock&quot; class=&quot;headerlink&quot; title=&quot;nolock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://linux.die.net/man/5/nfs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;nolock&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;NLM locking is used for this mount point. When using the nolock option, applications can lock files, but such locks provide exclusion only against other applications running on the same client. Remote applications are not affected by these locks.&lt;/p&gt;
&lt;h3 id=&quot;file-lock&quot;&gt;&lt;a href=&quot;#file-lock&quot; class=&quot;headerlink&quot; title=&quot;file lock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://docstore.mik.ua/orelly/networking_2ndEd/nfs/ch11_02.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;file lock&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;The NFS (Versions 2 and 3) protocol does not support file locking, but the NFS environment supports an ancillary protocol called NLM, which originally stood for “Network Lock Manager.” When an NFS filesystem on an NFS client gets a request to lock a file, instead of an NFS remote procedure call, it generates an NLM remote procedure call.&lt;/p&gt;
&lt;p&gt;The NLM protocol consists of remote procedure calls that pattern fcntl arguments and results. Because blocking locks are supported (a process blocks waiting for a lock that conflicts with another holder), the NLM protocol has the notion of callbacks, from the file server to the NLM client to notify that a lock is available. In this way, the NLM client sometimes acts as an RPC server in order to receive delayed results from lock calls.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;nolock&quot;&gt;&lt;a href=&quot;#nolock&quot; class=&quot;headerlink&quot; title=&quot;nolock&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://linux.die.net/man/5/nfs&quot; target=&quot;_blank&quot; rel=&quot;exter
    
    </summary>
    
      <category term="nfs" scheme="http://yoursite.com/categories/nfs/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="nfs" scheme="http://yoursite.com/tags/nfs/"/>
    
  </entry>
  
  <entry>
    <title>NIC issues</title>
    <link href="http://yoursite.com/2017/08/14/NIC-issues/"/>
    <id>http://yoursite.com/2017/08/14/NIC-issues/</id>
    <published>2017-08-14T11:46:34.000Z</published>
    <updated>2018-06-01T02:50:36.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#### [traceroute error](https://www.ibm.com/support/knowledgecenter/TI0003M/p8hcg/p8hcg_traceroute.htm)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host unreachable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!N&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Network unreachable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!P&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Protocol unreachable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!S&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Source route failed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;!F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragmentation needed&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Fix-“Neighbour-Table-Overflow”-Error&quot;&gt;&lt;a href=&quot;#Fix-“Neighbour-Table-Overflow”-Error&quot; class=&quot;headerlink&quot; title=&quot;Fix “Neighbour Table Overflow” Error?&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.cyberciti.biz/faq/centos-redhat-debian-linux-neighbor-table-overflow/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Fix “Neighbour Table Overflow” Error?&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## works best with &amp;lt;= 500 client computers ##&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Force gc to clean-up quickly&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_interval = 3600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Set ARP cache entry timeout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_stale_time = 3600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Setup DNS threshold for arp &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh3 = 4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh2 = 2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh1 = 1024&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resolve-process&quot;&gt;&lt;a href=&quot;#Resolve-process&quot; class=&quot;headerlink&quot; title=&quot;Resolve process&quot;&gt;&lt;/a&gt;Resolve process&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Upgrade firmware/driver&lt;ul&gt;
&lt;li&gt;Driver parameter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Disable iptables&lt;/li&gt;
&lt;li&gt;Improve ring buffer&lt;/li&gt;
&lt;li&gt;Modify kernel network parameter sysctl.conf&lt;/li&gt;
&lt;li&gt;Disable irqbalance, set the device irq affinity in local numa node&lt;/li&gt;
&lt;li&gt;Enable RPS/RFS/XPS&lt;/li&gt;
&lt;li&gt;Enable performance mode&lt;/li&gt;
&lt;li&gt;ss command make sure&lt;ul&gt;
&lt;li&gt;ss -eipnt | grep -A 1 $ipaddr –color  | grep -B 1 -Ei ‘cwnd|ssthresh’&lt;ul&gt;
&lt;li&gt;If cwnd and ssthresh and cwnd ‘s value up and down frequently that means there is a bad network env(maybe it ‘s trigger the tcp slow start algorithm and TCP Congestion avoidance algorithm)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;Setting&quot;&gt;&lt;a href=&quot;#Setting&quot; class=&quot;headerlink&quot; title=&quot;Setting&quot;&gt;&lt;/a&gt;Setting&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##For unsupport optical module&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe ixgbe allow_unsupported_sfp=1,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##Setting RSS queue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##MQ:Disable or enable Multiple Queues, default 1 (array of int)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##RSS:Number of Receive-Side Scaling Descriptor Queues, default 0=number of cpus (array of int)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe ixgbe MQ=1,1 RSS=8,8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/modprobe.d/ixgbe.conf &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe allow_unsupported_sfp=1,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe MQ=1,1 RSS=8,8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe LRO=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options ixgbe InterruptThrottleRate=20000,20000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##InterruptThrottleRate:Maximum interrupts per second, per vector, (0,1,956-488281), default 1 (array of int)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;i&lt;span class=&quot;comment&quot;&gt;##LRO:Large Receive Offload (0,1), default 0 = off (array of int)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Ethernet-Flow-Director&quot;&gt;&lt;a href=&quot;#Ethernet-Flow-Director&quot; class=&quot;headerlink&quot; title=&quot;Ethernet Flow Director&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnhalo.net/2016/03/13/tcp-accelerate-report/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ethernet Flow Director&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;因此Flow Director就是因此而来，它有两种模式：EP（Externally Programed）模式和ATR （automated Application Targeting Routing）模式。&lt;br&gt;当系统管理员了解整个网络主要的数据包路径的时候可以配置EP模式， 否则应使用默认的ATR模式。ATR模式会采样发送流量，然后根据tcp头的来源与目标信息把数据包交给之前发送该数据流的cpu核心&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K eth2 ntuple on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool --config-ntuple eth2 flow-type ip4 src-ip 192.168.100.1  action -1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool --config-ntuple eth2 flow-type tcp4 src-port 80  action 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool --config-ntuple eth2 flow-type udp4 src-port 80  action 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Offload&quot;&gt;&lt;a href=&quot;#Offload&quot; class=&quot;headerlink&quot; title=&quot;Offload&quot;&gt;&lt;/a&gt;Offload&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K ethX rx on  &lt;span class=&quot;comment&quot;&gt;## rx-checksuming tcp offload&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K ethX sg  &lt;span class=&quot;comment&quot;&gt;## tcp-sgmentation offloading&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K &amp;lt;interface&amp;gt; tx-nocache-copy off&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://www.mellanox.com/related-docs/prod_software/Performance_Tuning_Guide_for_Mellanox_Network_Adapters_Archive.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;For 100GbE&lt;/a&gt; In case “tx-nocache-copy” is enabled, (this is the case for some kernels, e.g. kernel 3.10, which is the default for RH7.0) “tx-nocache-copy” should be disabled.&lt;/p&gt;
&lt;h4 id=&quot;Performance-mode&quot;&gt;&lt;a href=&quot;#Performance-mode&quot; class=&quot;headerlink&quot; title=&quot;Performance mode&quot;&gt;&lt;/a&gt;Performance mode&lt;/h4&gt;&lt;h5 id=&quot;Get-numa-node&quot;&gt;&lt;a href=&quot;#Get-numa-node&quot; class=&quot;headerlink&quot; title=&quot;Get numa node&quot;&gt;&lt;/a&gt;Get numa node&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/class/net/[interface]/device/numa_node&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/devices/[PCI root]/[PCIe &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;]/numa_node&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Enable-CPU-performance-mode&quot;&gt;&lt;a href=&quot;#Enable-CPU-performance-mode&quot; class=&quot;headerlink&quot; title=&quot;Enable CPU performance mode&quot;&gt;&lt;/a&gt;Enable CPU performance mode&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grub parameter: intel_idle.max_cstate=0 processor.max_cstate=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower  frequency-set -g performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm profile throughput-performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; performance &amp;gt; /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/devices/system/cpu/cpu*/cpufreq/cpuinfo_max_freq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/devices/system/cpu/cpu*/cpufreq/cpuinfo_cur_freq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Sysctl-conf&quot;&gt;&lt;a href=&quot;#Sysctl-conf&quot; class=&quot;headerlink&quot; title=&quot;Sysctl.conf&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.mellanox.com/related-docs/prod_software/Performance_Tuning_Guide_for_Mellanox_Network_Adapters_Archive.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Sysctl.conf&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;The following changes are recommended &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; improving IPv4 traffic performance:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disable the TCP timestamps option &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; better CPU utilization:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_timestamps=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enable the TCP selective acks option &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; better throughput:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;With selective acknowledgments, the data receiver can inform the sender about all segments that have arrived successfully, so the sender need retransmit only the segments that have actually been lost.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_sack=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Increase the maximum length of processor input queues:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.netdev_max_backlog=250000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Increase the TCP maximum and default buffer sizes using setsockopt():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.rmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.wmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.rmem_default=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.wmem_default=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.optmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Increase memory thresholds to prevent packet dropping:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_rmem=&lt;span class=&quot;string&quot;&gt;&quot;4096 87380 4194304&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_wmem=&lt;span class=&quot;string&quot;&gt;&quot;4096 65536 4194304&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enable low latency mode &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; TCP:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_low_latency=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.ipv4.tcp_adv_win_scale=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The following variable is used to tell the kernel how much of the socket buffer space should be used &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; TCP window size, and how much to save &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; an application buffer.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A value of 1 means the socket buffer will be divided evenly between TCP windows size and application.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;EINVAL-Invalid-argument-passed&quot;&gt;&lt;a href=&quot;#EINVAL-Invalid-argument-passed&quot; class=&quot;headerlink&quot; title=&quot;EINVAL Invalid argument passed&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/Wckc-dwlZofLczU3n4jpuw&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EINVAL Invalid argument passed&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;Add “kernel neighbor table overflow” in linux 4.3 and there is table_fulls in /proc/net/stat/arp_cache&lt;br&gt;RHEL 7 cound not show anything&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh1 = 128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh2 = 512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.neigh.default.gc_thresh3 = 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gc_thresh1 (since Linux 2.2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       The minimum number of entries to keep &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;  the  ARP  cache. The garbage collector will not run &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; there are fewer than this number of entries &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; the cache.  Defaults to 128.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gc_thresh2 (since Linux 2.2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       The soft maximum number of entries to keep  &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;  the  ARP  cache.The garbage collector will allow the number of entries to exceed this  &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;  5  seconds  before  collection  will  be   performed. Defaults to 512.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gc_thresh3 (since Linux 2.2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       The  hard  maximum  number  of entries to keep &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; the ARP cache.The garbage collector will always run &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;  there  are  more  than this number of entries &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; the cache.  Defaults to 1024.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;nic-interrupt-rates&quot;&gt;&lt;a href=&quot;#nic-interrupt-rates&quot; class=&quot;headerlink&quot; title=&quot;nic interrupt rates&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.ibm.com/support/knowledgecenter/en/SSQPD3_2.6.0/com.ibm.wllm.doc/usingethtoolrates.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;nic interrupt rates&lt;/a&gt;&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;adaptive-rx Dynamic control to decrease RX latency at low packet rates and increase throughput at high packet rates&lt;/li&gt;
&lt;li&gt;rx-usecs This is the number of microseconds to wait before raising an RX interrupt after a packet has been received. When rx-usecs is set to 0 rx-frames is used&lt;/li&gt;
&lt;li&gt;rx-frames    This is the number of frames to queue up before raising an RX interrupt.&lt;/li&gt;
&lt;li&gt;adaptive-tx Dynamic control to decrease TX latency at low packet rates and increase throughput at high packet rates&lt;/li&gt;
&lt;li&gt;tx-usecs This is the number of microseconds to wait before raising an TX interrupt after a packet has been sent. When tx-usecs is set to 0 tx-frames is used&lt;/li&gt;
&lt;li&gt;tx-frames This is the number of frames to queue up before raising an TX interrupt&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#10GbE 82599 setting&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls /sys/class/net | egrep &lt;span class=&quot;string&quot;&gt;&#39;(eth|en|p|em|br|bond)&#39;&lt;/span&gt; | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; nic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -C &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx-usecs 0 tx-usecs 0 adaptive-rx off adaptive-tx off &lt;span class=&quot;comment&quot;&gt;## there are some compatibility with a vendor 25GbE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -G &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx 4096/8192 tx 4096/8192 &lt;span class=&quot;comment&quot;&gt;#for latency, you could reduce the value,rx-ring,tx-ring #10GbE 82599, 25GbE , 50GbE has more&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ethtool -N &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ifconfig &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; mtu 9000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Check-command&quot;&gt;&lt;a href=&quot;#Check-command&quot; class=&quot;headerlink&quot; title=&quot;Check command&quot;&gt;&lt;/a&gt;Check command&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ip &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; link/ifconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethttool -S dev | grep -Ei &lt;span class=&quot;string&quot;&gt;&#39;err|miss|dis|drop|crc&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -n DEV,ETCP 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# get firbe module detail&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethttool -m dev &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##Get them from&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/class/net/em2/statistics/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/proc/net/dev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;How-to-benchmark&quot;&gt;&lt;a href=&quot;#How-to-benchmark&quot; class=&quot;headerlink&quot; title=&quot;How to benchmark&quot;&gt;&lt;/a&gt;How to benchmark&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#########Server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkill -9 iperf3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;5201..5209&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  iperf3 &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; -D -p &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ps aux | grep iperf3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkill -9 qperf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;4000..4009&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qperf -lp &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ps aux | grep qperf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#########client&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip2=xx.xx.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iperf3  -c &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; -P 1 -t 36000 -p 5201 &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iperf3  -c &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; -P 1 -t 36000 -p 5202 &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iperf3  -c &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; -P 1 -t 36000 -p 5203 &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qperf  -lp 4000 -t 36000 -oo msg_size:512:4K:*2 &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; tcp_bw &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qperf  -lp 4001 -t 36000 -oo msg_size:512:4K:*2 &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; tcp_bw &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qperf  -lp 4002 -t 36000 -oo msg_size:512:4K:*2 &lt;span class=&quot;variable&quot;&gt;$ip2&lt;/span&gt; tcp_bw &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Kernel&quot;&gt;&lt;a href=&quot;#Kernel&quot; class=&quot;headerlink&quot; title=&quot;Kernel&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnhalo.net/2016/03/13/tcp-accelerate-report/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Kernel&lt;/a&gt;&lt;/h4&gt;&lt;h5 id=&quot;内核4-4-lockless-listener&quot;&gt;&lt;a href=&quot;#内核4-4-lockless-listener&quot; class=&quot;headerlink&quot; title=&quot;内核4.4 lockless listener&quot;&gt;&lt;/a&gt;内核4.4 lockless listener&lt;/h5&gt;&lt;p&gt;老版本的内核，在每个listener里都有一个request队列，每收到一个syn包后都要锁listener并创建一个新的request插入。 4.4版本在listener之外维护了request，使用tcp的ehash表，这样就大幅度减少了listener锁的竞争。&lt;/p&gt;
&lt;h5 id=&quot;Fastsocket&quot;&gt;&lt;a href=&quot;#Fastsocket&quot; class=&quot;headerlink&quot; title=&quot;Fastsocket&quot;&gt;&lt;/a&gt;Fastsocket&lt;/h5&gt;&lt;p&gt;Fastsocket是新浪开源的，并在生产环境部署的一个内核优化版本&lt;br&gt;使用的时候，只需要启动时指定LD_PRELOAD环境变量，使用它的动态库来替换原生socket接口。 容易回滚到原生接口。&lt;br&gt;基于centos-6.5, kernel 2.6.32版本，(对docker支持不好，高版本内核发行版使用systemd管理服务，不容易降级)&lt;br&gt;根据官方报告，跟原生centos-6.5相比，提升260%-620%(24核以上)&lt;/p&gt;
&lt;p&gt;通过在网卡多队列RSS， 使用flow director或者google的rps/rfs/xps把数据包都发送到应用程序所在的cpu上，应用程序启动时也设置cpu亲和性绑定到特定的cpu上，让相同的数据流都在同一个cpu上处理&lt;br&gt;每个cpu维护一份本地的Established表和Local Listen表， 在reuseport的基础上，进一步减少listener锁的竞争。&lt;br&gt;优化VFS文件系统，因为socket不需要inode和dentry，可以忽略一些需要同步的代码路径。&lt;/p&gt;
&lt;h4 id=&quot;Use-dpdk&quot;&gt;&lt;a href=&quot;#Use-dpdk&quot; class=&quot;headerlink&quot; title=&quot;Use dpdk&quot;&gt;&lt;/a&gt;Use dpdk&lt;/h4&gt;&lt;p&gt;DPDK的内存优化&lt;br&gt;所有内存资源启动时一次性分配完毕&lt;br&gt;支持numa， cpu就近分配内存&lt;br&gt;使用hugepage，减少tlb miss的时候，访问多级页表的开销&lt;br&gt;在cache line的基础上，支持多通道和内存条rank级并行优化。一个内存通道一般使用64位数据总线，双通道同时工作提供了128位传输能力。Rank是指DIMM上几个内存颗粒共同提供的64位数据，同一条内存上的不同rank因为共享数据总线而不能被同时访问，但内存可以利用交错的片选信号来访问不同rank中数据。&lt;/p&gt;
&lt;h4 id=&quot;Google-BBR&quot;&gt;&lt;a href=&quot;#Google-BBR&quot; class=&quot;headerlink&quot; title=&quot;Google BBR&quot;&gt;&lt;/a&gt;Google BBR&lt;/h4&gt;&lt;p&gt;google bbr算法已经被merge到linux 4.9中，并且效果不错，并经过Google大规模测试&lt;br&gt;主要的缺点就是新版内核的拥塞框架回调点和旧版本有很大区别，并不容易移植到低版本&lt;/p&gt;
&lt;h4 id=&quot;RPS-RFS-for-not-support-RSS-ethernet-network-apapter&quot;&gt;&lt;a href=&quot;#RPS-RFS-for-not-support-RSS-ethernet-network-apapter&quot; class=&quot;headerlink&quot; title=&quot;RPS/RFS for not support RSS ethernet network apapter&quot;&gt;&lt;/a&gt;RPS/RFS for not support RSS ethernet network apapter&lt;/h4&gt;&lt;h5 id=&quot;Check-the-device-support-RSS&quot;&gt;&lt;a href=&quot;#Check-the-device-support-RSS&quot; class=&quot;headerlink&quot; title=&quot;Check the device support RSS&quot;&gt;&lt;/a&gt;Check the device support RSS&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lspci -v &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 83:00.0 | grep &lt;span class=&quot;string&quot;&gt;&quot;MSI-X: Enable+&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Flags: bus master, fast devsel, latency 0, IRQ 247, NUMA node 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	I/O ports at d020 [size=32]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Capabilities: [50] MSI: Enable- Count=1/1 Maskable+ 64bit+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Capabilities: [70] MSI-X: Enable+ Count=64 Masked-&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;I don’t know why there are some network adapter could not work well in 4 x numa node and in these server, all 25GbE adapter support RSS, some of vendor 4 x numa node is OK, there are the same network chip in each server, except they are the different OEM adapter&lt;br&gt;So I have to enabe RPS to get good performance, I guess it server design problem&lt;br&gt;There are about 10000~30000/s tcp retrans.&lt;br&gt;一些多队列网卡驱动实现的不是太好，在初始化后会出现图4.1中同一个队列的tx、rx中断绑定到不同核上的问题，这样数据在core0与core1之间流动，导致核间数据交互加大，cache命中率降低，降低了效率。&lt;/p&gt;
&lt;p&gt;Here is the script for 4 x numa&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://community.mellanox.com/docs/DOC-2820&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;For interfaces that have a single queue or its number of queues is less than the number of NUMA node cores, it is recommended to configure the rps_cpus mask to the device NUMA node core list to gain the better parallelism of multi queue interfaces&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/class/net/eth7/device/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;_cpus&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0000,000fffc0,00000000,0fffc000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bond=bond0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rfc=16392&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cc=$(grep -c processor /proc/cpuinfo)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rsfe=$((&lt;span class=&quot;variable&quot;&gt;$cc&lt;/span&gt;*&lt;span class=&quot;variable&quot;&gt;$rfc&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -w net.core.rps_sock_flow_entries=&lt;span class=&quot;variable&quot;&gt;$rsfe&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dmidecode -t system | grep -i huawei &amp;amp;&amp;amp; cat /proc/net/bonding/&lt;span class=&quot;variable&quot;&gt;$bond&lt;/span&gt;  | awk &lt;span class=&quot;string&quot;&gt;&#39;$0~/Slave Interface:/ &amp;#123;print $NF&amp;#125;&#39;&lt;/span&gt; | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; nic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node=$(cat /sys/class/net/&lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt;/device/numa_node)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    localcpu=$(cat /sys/class/net/eth7/device/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;_cpus)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [[ -z &lt;span class=&quot;variable&quot;&gt;$node&lt;/span&gt; ]] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; not found numa &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [[ -z &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; ]] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; not found bond &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;the nic is &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; in the node-&lt;span class=&quot;variable&quot;&gt;$node&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    service iptables stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ethtool -G &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx 8192 tx 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ethtool -G &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; rx 8192 tx 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ethtool -K &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; lro on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ethtool -K &lt;span class=&quot;variable&quot;&gt;$bond&lt;/span&gt; lro on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    service irqbalance stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ -n &lt;span class=&quot;variable&quot;&gt;$node&lt;/span&gt; ];&lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;bind int to node &lt;span class=&quot;variable&quot;&gt;$node&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;_irq_affinity_bynode.sh &lt;span class=&quot;variable&quot;&gt;$node&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$nic&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;##### mlnx driver script&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; fileRps &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls /sys/class/net/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;nic&amp;#125;&lt;/span&gt;/queues/rx-*/rps_cpus)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$localcpu&lt;/span&gt; &amp;gt;&lt;span class=&quot;variable&quot;&gt;$fileRps&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; fileR&lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls /sys/class/net/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;nic&amp;#125;&lt;/span&gt;/queues/rx-*/rps_flow_cnt)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$localcpu&lt;/span&gt; &amp;gt;&lt;span class=&quot;variable&quot;&gt;$fileRps&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; fileRps &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls /sys/class/net/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;nic&amp;#125;&lt;/span&gt;/queues/tx-*/xps_cpus)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$localcpu&lt;/span&gt; &amp;gt;&lt;span class=&quot;variable&quot;&gt;$fileRps&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/performance_tuning_guide/network-rfs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFS&lt;/a&gt; is disabled by default. To enable RFS, you must edit two files:&lt;br&gt;/proc/sys/net/core/rps_sock_flow_entries&lt;br&gt;Set the value of this file to the maximum expected number of concurrently active connections. We recommend a value of 32768 for moderate server loads. All values entered are rounded up to the nearest power of 2 in practice.&lt;br&gt;/sys/class/net/device/queues/rx-queue/rps_flow_cnt&lt;br&gt;Replace device with the name of the network device you wish to configure (for example, eth0), and rx-queue with the receive queue you wish to configure (for example, rx-0).&lt;br&gt;Set the value of this file to the value of rps_sock_flow_entries divided by N, where N is the number of receive queues on a device. For example, if rps_flow_entries is set to 32768 and there are 16 configured receive queues, rps_flow_cnt should be set to 2048. For single-queue devices, the value of rps_flow_cnt is the same as the value of rps_sock_flow_entries.&lt;br&gt;Data received from a single sender is not sent to more than one CPU. If the amount of data received from a single sender is greater than a single CPU can handle, configure a larger frame size to reduce the number of interrupts and therefore the amount of processing work for the CPU. Alternatively, consider NIC offload options or faster CPUs.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.simlinux.com/2017/02/28/net-softirq.html#RPS-RFS&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RPS&lt;/a&gt;: 网卡驱动对每一个数据库包根据四元组(SIP,SPORT,DIP,DPORT)生成HASH值,通过HASH值将每个连接和CPU 绑定&lt;br&gt;RFS： 由于RPS只是单纯的把数据包均衡到不同的CPU上，此时如果应用程序所在CPU和中断处理的CPU不在同一个核，将会对CPU Cache影响很大，RFS的作用就是将应用程序和软中断处理分配到同一个CPU&lt;br&gt;XPS: 负载均衡选择网卡多队列发包&lt;br&gt;Data received from a single sender is not sent to more than one CPU. If the amount of data received from a single sender is greater than a single CPU can handle, configure a larger frame size to reduce the number of interrupts and therefore the amount of processing work for the CPU. Alternatively, consider NIC offload options or faster CPUs.&lt;br&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/performance_tuning_guide/network-rfs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Consider using numactl or taskset in conjunction with RFS to pin applications to specific cores, sockets, or NUMA nodes. This can help prevent packets from being processed out of order&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;RHEL-solutions&quot;&gt;&lt;a href=&quot;#RHEL-solutions&quot; class=&quot;headerlink&quot; title=&quot;RHEL solutions&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.com/solutions/21301&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RHEL solutions&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;System dropping network packets&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;High number of drop counters like drop, discard, err or error, fifo, buf or buffer, fail, miss, OOB, full counters in ethtool -S&lt;/li&gt;
&lt;li&gt;High number of dropped, error, overrun, or frame counters in ifconfig&lt;/li&gt;
&lt;li&gt;What is the first thing to try when I see my network interfaces dropping packets?&lt;br&gt;Root Cause&lt;br&gt;Counters like “discard” or “drop” in the output of ethtool -S ethX are caused by the exhaustion of the receive ring buffer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The ring buffer is a block of physical memory on the NIC.&lt;/p&gt;
&lt;p&gt;Each packet received by the NIC is stored in this memory while an interrupt is sent to the kernel to fetch the packet into kernel memory.&lt;/p&gt;
&lt;p&gt;If the available buffer is filling up faster than the kernel can take the packets, there will be discarded packets.&lt;/p&gt;
&lt;p&gt;Verify packet loss with:&lt;br&gt;[root@host]# ip -s -s link&lt;br&gt;Verify discards/drops/etc with:&lt;br&gt;[root@host]# ethtool -S ethX&lt;br&gt;Verify RX ring buffer current and maximum settings with:&lt;br&gt;[root@host]# ethtool -g ethX&lt;/p&gt;
&lt;h5 id=&quot;0-05-packet-drop-rate&quot;&gt;&lt;a href=&quot;#0-05-packet-drop-rate&quot; class=&quot;headerlink&quot; title=&quot;0.05% packet drop rate&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.com/solutions/742043&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;0.05% packet drop rate&lt;/a&gt;&lt;/h5&gt;&lt;p&gt;One of TCP’s main functions is to preserve a reliable data stream for applications by identifying and retrying any lost packets. It is normal operation for an underlying network to lose packets, for many different reasons, and for TCP be used and to hide this fact from application layers. Applications using unreliable transports (the major one being UDP) are expected to not care about the unreliability of the network. Applications which do care should use a reliable transport, eg. TCP (or more recently, SCTP) or implement their own reliability mechanisms.&lt;/p&gt;
&lt;p&gt;The only impact of packet loss in the underlying network (which includes the device-drivers and lower network layer code which is counting the drops you are seeing) is a reduction in performance from the peak network speed. The reduction is dependent, non-linearly, on the packet drop ratio, and also on the traffic type. For bulk transfers (such as file-transfer) over TCP a drop ratio of under 0.1% results in a very small reduction in throughput – assuming that the Select Acknowledgement (SACK) TCP option is enabled on both systems. If SACK is disabled on either system there will be a measurable reduction in throughput if the drop rate exceeds 0.001%. On the other hand, thin stream traffic, where there is often no outstanding data for the transmitter to send, will be affected more as the need to retry lost packets will only be noticed after a time out rather than being detectable when data arrives out-of-order. Examples of thin-stream traffic include request-response and interactive connections.&lt;/p&gt;
&lt;h4 id=&quot;ifconfig-ip&quot;&gt;&lt;a href=&quot;#ifconfig-ip&quot; class=&quot;headerlink&quot; title=&quot;ifconfig/ip&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/184604/whats-the-difference-between-errors-dropped-overruns-and-frame-fiel&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ifconfig/ip&lt;/a&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;RX&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;frame/length counts only misaligned frames, it means frames with a length not divisible by 8. Because of that length is not a valid frame and it is simply discarded (too-short frames and too-long frames)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;overruns/fifo counts that times when there is fifo overruns, caused by the rate at which the buffer gets full and the kernel isn’t able to reclaim the buffer&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No cpu resource, interrupt not balance and not affinity, eg: all nic interrupt in core0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://serverfault.com/questions/528290/ifconfig-eth0-rx-dropped-packets/601186&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;dropped(normal) counts&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Softnet backlog full&lt;/li&gt;
&lt;li&gt;Bad / Unintended VLAN tags&lt;/li&gt;
&lt;li&gt;Unknown / Unregistered protocols&lt;/li&gt;
&lt;li&gt;IPv6 frames when the server is not configured for IPv6&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dropped (in my opinion)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Overloading&lt;/li&gt;
&lt;li&gt;Hardware issue&lt;ul&gt;
&lt;li&gt;NIC ring buffer too slower&lt;/li&gt;
&lt;li&gt;NIC/optical module issue&lt;/li&gt;
&lt;li&gt;PCIE issue&lt;/li&gt;
&lt;li&gt;Bad cable&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://blog.hyfather.com/blog/2013/03/04/ifconfig/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TX&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;aborted transmission&lt;/li&gt;
&lt;li&gt;errors due to carrirer&lt;/li&gt;
&lt;li&gt;fifo err&lt;/li&gt;
&lt;li&gt;heartbeat erros&lt;/li&gt;
&lt;li&gt;window err&lt;/li&gt;
&lt;li&gt;collisions is the number of transmissions terminated due to CSMA/CD (Carrier Sense Multiple Access with Collision Detection).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If NIC driver loss packages, linux don ‘t know, you can’t count it in linux&lt;br&gt;Some overrun(ifconfig) has the same means with dropped(ethtool)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rx_missed_errors&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;real drop = rx_dropped(kernel drop) + rx_missed_errors&lt;ul&gt;
&lt;li&gt;To reduce DMA skb(socket buffer) to test, eg: ethtool -G eth1 rx 48, ethtool -G eth1 tx 48, there are a lot of rx_missed_err &lt;/li&gt;
&lt;li&gt;这样看来rx_no_buffer_count 指的是在网卡通过DMA将设备FIFO中的skb-&amp;gt;data传送到rx_buffer_info时，发现对应的rx_buffer_info还没有unmap，也就无法送到主存。说到底，这其实和软中断处理的速度有关。&lt;br&gt;猜测rx_missed_errors可能与硬中断有关。也就是在DMA传送完，发送硬中断之前，网卡的FIFO缓冲已经满了，导致接收的数据要立即丢掉。这个也可以验证：&lt;br&gt;首先卸载igb模块，然后insmod igb InterruptThrottleRate=10, 只让网卡每秒产生10个中断。关闭流控ethtool -A eth1 autoneg off , ethtool -A eth1 rx off , ethtool -A eth1 tx off ，再把DMA缓冲区调至最大ethtool -G eth1 rx 4096 , ethtool -G eth1 tx 4096。可以发现原来不增长或几乎不增长的rx_missed_errors 开始大幅增长，果然这个就是和网卡硬件的FIFO缓冲区有关。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;About-MPC-and-RNBC&quot;&gt;&lt;a href=&quot;#About-MPC-and-RNBC&quot; class=&quot;headerlink&quot; title=&quot;About MPC and RNBC&quot;&gt;&lt;/a&gt;About MPC and RNBC&lt;/h4&gt;&lt;p&gt;7.19.5 Missed Packets Count – MPC (0x4010; RC)&lt;br&gt;Counts the number of missed packets. Packets are missed when the receive FIFO has insufficient space&lt;br&gt;to store the incoming packet. This can be caused because of too few buffers allocated, or because there&lt;br&gt;is insufficient bandwidth on the PCI bus. Events setting this counter causes ICR.Rx Miss, the Receiver&lt;br&gt;Overrun Interrupt, to be set. This register does not increment if receives are not enabled.&lt;br&gt;These packets are also counted in the Total Packets Received register as well as in Total Octets&lt;br&gt;Received.&lt;/p&gt;
&lt;p&gt;7.19.34 Receive No Buffers Count – RNBC (0x40A0; RC)&lt;br&gt;This register counts the number of times that frames were received when there were no available&lt;br&gt;buffers in host memory to store those frames (receive descriptor head and tail pointers were equal).&lt;br&gt;The packet is still received if there is space in the FIFO. This register only increments if receives are enabled (RCTL.RXEN is set).&lt;br&gt;This register does not increment when flow control packets are received.&lt;/p&gt;
&lt;h4 id=&quot;Tools&quot;&gt;&lt;a href=&quot;#Tools&quot; class=&quot;headerlink&quot; title=&quot;Tools&quot;&gt;&lt;/a&gt;Tools&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://jaseywang.me/2014/08/16/ifconfig-%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%97%E6%AE%B5errors-dropped-overruns/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ethtool&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Physical layer&lt;ul&gt;
&lt;li&gt;Speed&lt;/li&gt;
&lt;li&gt;Duplex&lt;/li&gt;
&lt;li&gt;CRC&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.brendangregg.com/blog/2014-09-06/linux-ftrace-tcp-retransmit-tracing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;tcpretrans&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;11:14:40 0      10.0.19.53:988      R&amp;gt; 10.0.4.143:1022     ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11:14:40 0      10.0.19.53:988      R&amp;gt; 10.0.4.143:1022     ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11:14:40 0      10.0.19.53:988      R&amp;gt; 10.0.4.143:1022     ESTABLISHED&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.brendangregg.com/blog/2014-09-06/linux-ftrace-tcp-retransmit-tracing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;netstat&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;netstat &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; | grep -i retr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    905260805 segments retransmited&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    9599 &lt;span class=&quot;built_in&quot;&gt;times&lt;/span&gt; recovered from packet loss due to fast retransmit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TCPLostRetransmit: 6059087&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    152 timeouts after reno fast retransmit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    737224794 fast retransmits&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    13068581 forward retransmits&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    146850567 retransmits &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; slow start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1015 classic Reno fast retransmits failed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    3214020 SACK retransmits failed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TCPRetransFail: 16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TCPSynRetrans: 61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://techblog.netflix.com/2015/11/linux-performance-analysis-in-60s.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sar&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sar -n TCP,ETCP 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:30 AM  active/s passive/s    iseg/s    oseg/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:31 AM      0.00      0.00      8.51      6.38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:30 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02:47:31 AM      0.00      0.00      0.00      0.00      0.00&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;active/s: Number of locally-initiated TCP connections per second (e.g., via connect()).&lt;br&gt;passive/s: Number of remotely-initiated TCP connections per second (e.g., via accept()).&lt;br&gt;retrans/s: Number of TCP retransmits per second.&lt;br&gt;The active and passive counts are often useful as a rough measure of server load: number of new accepted connections (passive), and number of downstream connections (active). It might help to think of active as outbound, and passive as inbound, but this isn’t strictly true (e.g., consider a localhost to localhost connection). &lt;/p&gt;
&lt;p&gt;Retransmits are a sign of a network or server issue; it may be an unreliable network (e.g., the public Internet), or it may be due a server being overloaded and dropping packets. The example above shows just one new TCP connection per-second. &lt;/p&gt;
&lt;h4 id=&quot;About-TCP-fast-retrans&quot;&gt;&lt;a href=&quot;#About-TCP-fast-retrans&quot; class=&quot;headerlink&quot; title=&quot;About TCP fast retrans&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.ietf.org/rfc/rfc2581.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About TCP fast retrans&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;twice duplicated ACK because package out of order&lt;br&gt;Dropped packages must be triple duplicated ACK&lt;/p&gt;
&lt;p&gt;If A send 4 TCP segments to B, Number is as follow, N-1 reache B because A received ACK(N) of B, As the order, The received ACK number:&lt;br&gt;                  A ———&amp;gt; B&lt;br&gt;A send order was N-1,N,N+1,N+2&lt;/p&gt;
&lt;p&gt;B received order&lt;/p&gt;
&lt;p&gt;N-1，N，N+1，N+2&lt;br&gt;A received single ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N，N+2，N+1&lt;br&gt;A received single ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N+1，N，N+2&lt;br&gt;A received twice ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N+1，N+2，N&lt;br&gt;A received triple ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N+2，N，N+1&lt;br&gt;A received twice ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N+2，N+1，N&lt;br&gt;A received triple ACK (N)&lt;/p&gt;
&lt;p&gt;If N loss, or not reach B&lt;/p&gt;
&lt;p&gt;N-1，N+1，N+2&lt;br&gt;A received triple ACK (N)&lt;/p&gt;
&lt;p&gt;N-1，N+2，N+1&lt;br&gt;A received triple ACK (N)&lt;/p&gt;
&lt;p&gt;TCP segment out of order(乱序) , there are 2/5 = 40% cause A received triple duplicated ACK(N);&lt;br&gt;If N loss, the ratio is 100%&lt;/p&gt;
&lt;p&gt;When A received triple duplicated ACK(N) and start a Fast Retransmit is OK , retransmit N right now, It ‘s need to Fast Recovery, for reduce the package loss problem&lt;/p&gt;
&lt;p&gt;If A receive twice duplicated ACK(N),It ‘s must be out of order that means all packages has reach B, Just re-sort all packages, Dont ‘need to retrans.&lt;/p&gt;
&lt;h5 id=&quot;ABout-TCP-segment-out-of-order&quot;&gt;&lt;a href=&quot;#ABout-TCP-segment-out-of-order&quot; class=&quot;headerlink&quot; title=&quot;ABout TCP segment out of order&quot;&gt;&lt;/a&gt;ABout TCP segment out of order&lt;/h5&gt;&lt;p&gt;TCP segment packing in IP packages，If IP package out of order,also tcp&lt;br&gt;1) ECMP loading balance&lt;/p&gt;
&lt;p&gt;multiple path loading balance, base per-packet load balance，eg: packet 1,3,5 go path1, packet 2,4,6 go to path2, it’s hard to control packet 1 arrived early than packet 2 reach the destination&lt;/p&gt;
&lt;p&gt;Per-session load balance base TCP 5 tuple(source ip,source port,des ip,des port, transfer protocol), the same TCP session will go to a same path&lt;/p&gt;
&lt;p&gt;2) route internal traffic scheduling(路由器内部流量调度)&lt;br&gt;There are multiple traffic process unit in some of route(流量处理单元),eg: packet 1,3,5 process by unit1, packet 2,4,6 process by unit2, it’s hard to control packet 1 arrived early than packet 2 reach the destination&lt;/p&gt;
&lt;p&gt;kernel receive out of order TCP segment, put them to buffer and then all TCP segment has arrived, after re-sort, send all data to application&lt;br&gt;Out of order segment will cause buffer consumption, direct trigger B advertised window size be samller, cause send A window get smaller and smaller,to impact sender’s transmission performance.&lt;/p&gt;
&lt;p&gt;If A not do fast retrans，at last it will be retrans by retransmit timer timeout(超时重传),but at this time there is a little winodow size in A, sender A ‘s transmission speed will be too bad.&lt;/p&gt;
&lt;p&gt;Before there is no fast retransmit/recovery, retrans by sender ‘s retransmit timeout,In timeout range, if sender not receive receiver’s ack hat means the package loss, sender will resend it.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Why package loss&lt;ul&gt;
&lt;li&gt;package checksum error &lt;/li&gt;
&lt;li&gt;Traffic jam/Network congestion&lt;/li&gt;
&lt;li&gt;Network connection loss for some unknow reason&lt;/li&gt;
&lt;li&gt;Some of convergence-algorithm in your route&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But sender don ‘t know what the situation,&lt;br&gt;The stupid way is sender set half of speed(CWND=1/2),It ‘s good at traffic jam,if connection loss, all packages will loss no matter sender slowing down,For checksum erorr,loss packages is a happenstance.If I loss a package, sender will tuning down the speed, So fast retransmit come out because receiver could recevice the ACK ,because connection has not loss,if in timeout range not receive large than 2 duplicated ACK thaat means maybe is out of order,don ‘t need retrans, just re-sort in receiver.&lt;br&gt;But if sender receive &amp;gt;= 3 x duplicated ACK,loss package has the high possibility.&lt;br&gt;That means sender could receive ACK,The network connection not loss,retrans it first,don ‘t slowing down the speed, if got the correct ACK that means there is no problem and drop that package, If still recive duplicated ACK, maybe it ‘s traffic jam, slowing down the speed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/21113846/why-packet-drop-is-not-captured-under-ifconfig&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About iptables&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;This is because iptables and ifconfig statistics refer to different layers in the protocol stack. ifconfig statistics are for the NIC (Physical and MAC layers) while iptables rules execute once frames are received by the NIC and delivered to the kernel (INPUT) or before the packet is delivered to layer 2 in the protocol stack (for OUTPUT)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;About-irqbalance&quot;&gt;&lt;a href=&quot;#About-irqbalance&quot; class=&quot;headerlink&quot; title=&quot;About irqbalance&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://community.mellanox.com/docs/DOC-2123&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About irqbalance&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Irqbalance is a Linux daemon that help to balance the CPU load generated by interrupts across all CPUs. Irqbalance identifies the highest volume interrupt sources, and isolates them to a single CPU, so that load is spread as much as possible over an entire processor set, while minimizing cache hit rates for irq handlers&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#debug irqbalance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;irqbalance &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/sites/default/files/attachments/201501-perf-brief-low-latency-tuning-rhel7-v1.1.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;perf-brief-low-latency-tuning-rhel7&lt;/a&gt;&lt;br&gt;The irqbalance service continues to be enabled by default in Red Hat Enterprise Linux 7. It&lt;br&gt;remains an important service that helps spread IRQ-processing load across multiple processors dynamically.&lt;/p&gt;
&lt;p&gt;For more performance&lt;br&gt;here could be specific workloads or configuration where stopping irqbalance and using mlnx_tune is more optimal and recommended.&lt;/p&gt;
&lt;h4 id=&quot;About-interruptthrottlerate&quot;&gt;&lt;a href=&quot;#About-interruptthrottlerate&quot; class=&quot;headerlink&quot; title=&quot;About interruptthrottlerate&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.kernel.org/doc/Documentation/networking/e1000.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About interruptthrottlerate&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Setting InterruptThrottleRate to a value greater or equal to 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;will program the adapter to send out a maximum of that many interrupts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;per second, even &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; more packets have come in. This reduces interrupt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;load on the system and can lower CPU utilization under heavy load,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;but will increase latency as packets are not processed as quickly.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The default behaviour of the driver previously assumed a static&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;InterruptThrottleRate value of 8000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;About-LRO&quot;&gt;&lt;a href=&quot;#About-LRO&quot; class=&quot;headerlink&quot; title=&quot;About LRO&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://downloadmirror.intel.com/22919/eng/README.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About LRO&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LRO&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;---&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Large Receive Offload (LRO) is a technique &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; increasing inbound throughput&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;of high-bandwidth network connections by reducing CPU overhead. It works by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;aggregating multiple incoming packets from a single stream into a larger &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;buffer before they are passed higher up the networking stack, thus reducing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;the number of packets that have to be processed. LRO combines multiple &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ethernet frames into a single receive &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; the stack, thereby potentially &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;decreasing CPU utilization &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; receives.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Support-for-UDP-RSS&quot;&gt;&lt;a href=&quot;#Support-for-UDP-RSS&quot; class=&quot;headerlink&quot; title=&quot;Support for UDP RSS&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://downloadmirror.intel.com/22919/eng/README.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support for UDP RSS&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Retrieves the &lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt; options &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; the specified network traffic type.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -N --config-nfc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Configures the receive network flow classification.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   m|v|t|s|d|f|n|r...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     Configures the &lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt; options &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; the specified network traffic type.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     udp4    UDP over IPv4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     udp6    UDP over IPv6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     f   Hash on bytes 0 and 1 of the Layer 4 header of the rx packet.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     n   Hash on bytes 2 and 3 of the Layer 4 header of the rx packet.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The following is an example using udp4 (UDP over IPv4):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To include UDP port numbers &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; RSS hashing run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -N ethX rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To exclude UDP port numbers from RSS hashing run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -N ethX rx-flow-hash udp4 sd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  To display UDP hashing current configuration run:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ethtool -n ethX rx-flow-hash udp4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Ethool-S&quot;&gt;&lt;a href=&quot;#Ethool-S&quot; class=&quot;headerlink&quot; title=&quot;Ethool -S&quot;&gt;&lt;/a&gt;Ethool -S&lt;/h3&gt;&lt;h4 id=&quot;rx-tx-ring&quot;&gt;&lt;a href=&quot;#rx-tx-ring&quot; class=&quot;headerlink&quot; title=&quot;rx,tx-ring&quot;&gt;&lt;/a&gt;rx,tx-ring&lt;/h4&gt;&lt;p&gt;ethtool -G $nic rx 4096 tx 4096&lt;/p&gt;
&lt;p&gt;rx_no_buffer_count,there was nowhere to DMA the packet&lt;br&gt;DMA skb-data to rx-buffer-info(linux RAM, soft-interrupt). &lt;/p&gt;
&lt;p&gt;RNBC is a warning sign of a slow drain from the MAC and can be treated by adding more buffers.&lt;br&gt;There will be times when the RNBC will go up, but it will look like the stack and driver have a ton of buffers but work is not being done.  If you have a task that is eating up the CPU, the ISR or polling routines won’t refill the buffers fast enough and RNBC will happen.&lt;/p&gt;
&lt;p&gt;Imagine we have a slow CPU, but a wicked fastbus.  The software is very slow to process the descriptors and return them, but once the descriptors are given to the hardware, it empties the backlog (read the FIFO) faster than the incoming frames are filling the FIFO.  Returning to our kitchen sink analogy, the water is coming in at a fairly constant rate.  But imagine the stopper is down, making the sink fill up.  Just before it over flows, the drain is opened and down it goes.  Once the water doesn’t go down the drain would be the same moment our RNBC would be incremented.  The kitchen sink itself becomes our FIFO and if the FIFO is big enough, it can save frame for quiet some time.  This is 1 Gigabit (or faster) that we’re talking about, so with a good sized FIFO (24K RX for example) that’s only 375 frames at 64 bytes, or 267microseconds of data.  That’s not very much time.  But in a world full of 2 and 3 Gigahertz CPUs that’s long enough.  &lt;/p&gt;
&lt;p&gt;rx_missed_error,rx_no_buffer_count happened enough times that packets were dropped&lt;br&gt;MPC is a failure condition leading to dropped packets and can be treated with more buffers and faster interconnect buses&lt;/p&gt;
&lt;p&gt;Thank goodness things like TCP/IP will tell the applications data has been dropped, but if using a lossy frame type like UDP its just too bad, your frame is lost to the ether. &lt;/p&gt;
&lt;p&gt;Imagine if you will, an interconnect bus that is slow.  Very slow.  Like a PCI 33hz bus.  Now attach that to a full line rate 1 Gigabit 64 byte packet data stream.  At one descriptor per packet, that’s about 1.4 million descriptors per second.  In this case the software is very fast, faster than the bus.  So the number of available descriptors is always kept a level that keeps the buffers available to the hardware to conduct a DMA.  But because the bus is so slow, data backs up into the FIFO.  Now that is what the FIFO is for.  By buffering the packet, it tries to give the packet the best chance at making into host memory alive.  In our slow case, the buffering isn’t enough and the FIFO fills up.  It is draining slower than its filling, its just a like a slow draining kitchen sink.  Eventually it overflows and makes a big mess.  Thank goodness things like TCP/IP will tell the applications data has been dropped, but if using a lossy frame type like UDP its just too bad, your frame is lost to the ether.  If you need to keep track, but need to use UDP, you’ll need to monitor the MPC count and decide what you want to do when it goes up.&lt;/p&gt;
&lt;p&gt;[猜测rx_missed_errors可能与硬中断有关。也就是在DMA传送完，发送硬中断之前，网卡的FIFO缓冲已经满了，导致接收的数据要立即丢掉。这个也可以验证：首先卸载igb模块，然后insmod igb InterruptThrottleRate=10, 只让网卡每秒产生10个中断。关闭流控ethtool -A eth1 autoneg off , ethtool -A eth1 rx off , ethtool -A eth1 tx off ，再把DMA缓冲区调至最大ethtool -G eth1 rx 4096 , ethtool -G eth1 tx 4096。可以发现原来不增长或几乎不增长的rx_missed_errors 开始大幅增长]&lt;br&gt;(&lt;a href=&quot;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://lp007819.wordpress.com/2013/05/23/intel%E7%BD%91%E5%8D%A1%E7%8A%B6%E6%80%81%E7%BB%9F%E8%AE%A1%E7%96%91%E9%97%AE/&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;rx_fifo_errors,&lt;br&gt;rx_over_errors&lt;/p&gt;
&lt;h3 id=&quot;ifconfig&quot;&gt;&lt;a href=&quot;#ifconfig&quot; class=&quot;headerlink&quot; title=&quot;ifconfig&quot;&gt;&lt;/a&gt;ifconfig&lt;/h3&gt;&lt;p&gt;frame counts only misaligned frames, it means frames with a length not divisible by 8. Because of that length is not a valid frame and it is simply discarded.&lt;/p&gt;
&lt;p&gt;Meanwhile errors counts CRC errors, too-short frames and too-long frames.&lt;/p&gt;
&lt;p&gt;overruns counts that times when there is fifo overruns, caused by the rate at which the buffer gets full and the kernel isn’t able to empty it.&lt;/p&gt;
&lt;p&gt;overruns&lt;br&gt;overruns，表示这个数据包还没有被进入到网卡的接收缓存fifo队列就被丢掉，因此此时网卡的fifo是满的。为什么fifo会是满的？因为系统繁忙，来不及响应网卡中断，导致网卡里的数据包没有及时的拷贝到系统内存，fifo是满的就导致后面的数据包进不来，即这个数据包被网卡硬件丢掉。所以，个人觉得遇到overruns非0，需要检测cpu负载与cpu中断情况。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cisco.com/c/en/us/support/docs/dial-access/asynchronous-connections/15286-serial-overruns.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Q. What are overruns on a serial interface?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A. Overruns appear in the output of the show interface Serial 0 command when the serial receiver hardware is unable to hand received data to a hardware buffer because the input rate exceeds the receiver’s ability to handle the data.&lt;br&gt;This occurs due to a limitation of the hardware. Overruns occur when the internal First In, First Out (FIFO) buffer of the chip is full, but is still tries to handle incoming traffic. The serial controller chip has limited internal FIFO.&lt;br&gt;Some chips, for example, have only 256 bytes of buffer space. Data from the network is received into the buffer, whereupon the chip attempts to move the data from the buffer to the router’s shared memory for the CPU to process. If the chip is not able to move the data from its internal FIFO buffer into shared memory faster than the rate at which data is received on the interface, then the internal FIFO buffer is full, incoming data is dropped, and the overrun counter is incremented.&lt;/p&gt;
&lt;p&gt;droppeds&lt;br&gt;dropped，表示这个数据包已经进入到网卡的接收缓存fifo队列，并且开始被系统中断处理准备进行数据包拷贝（从网卡缓存fifo队列拷贝到系统内存），但由于此时的系统原因（比如内存不够等）导致这个数据包被丢掉，即这个数据包被Linux系统丢掉。&lt;/p&gt;
&lt;h4 id=&quot;NFS-hangs&quot;&gt;&lt;a href=&quot;#NFS-hangs&quot; class=&quot;headerlink&quot; title=&quot;NFS hangs&quot;&gt;&lt;/a&gt;NFS hangs&lt;/h4&gt;&lt;p&gt;NFS server tcp zero window problem&lt;/p&gt;
&lt;p&gt;Zero Window is something to investigate. TCP Zero Window is when the Window size in a machine remains at zero for a specified amount of time. This means that a client is not able to receive further information at the moment, and the TCP transmission is halted until it can process the information in its receive buffer.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.wireshark.org/TCP%20ZeroWindow&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Troubleshooting a Zero Window&lt;/a&gt; For one reason or another, the machine alerting the Zero Window will not receive any more data from the host. It could be that the machine is running too many processes at that moment, and its processor is maxed. Or it could be that there is an error in the TCP receiver, like a Windows registry misconfiguration. Try to determine what the client was doing when the TCP Zero Window happened.&lt;/p&gt;
&lt;p&gt;case 2:&lt;br&gt;after modify sysctl.conf, all NFS throughput are interruptted. all TCP state are timewait&lt;br&gt;net.ipv4.tcp_low_latency=0 to net.ipv4.tcp_low_latency=1&lt;br&gt;net.ipv4.tcp_adv_win_scale=0 to net.ipv4.tcp_adv_win_scale=1&lt;/p&gt;
&lt;p&gt;restart service ,it ‘s not work, restart rpcbind ,it ‘s not work, looks like tcp issue.&lt;br&gt;Add net.ipv4.tcp_tw_reuse=1 to sysctl.conf, all TCP state to ESTABLISHED, it ‘s recovery.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_max_backlog = 300000 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.somaxconn=16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_max_syn_backlog = 16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_sack=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_budget=600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_tw_reuse=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#TCP buffer maxinum 64MB&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem = 4096 87380 67108864&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem = 4096 65536 67108864&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### 128M buffer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max = 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max = 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### 256M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max = 268435456 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max = 268435456 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# allow auto-tuning up to 128MB buffers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem = 4096 87380 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem = 4096 65536 134217728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# don&#39;t cache ssthresh from previous connection&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_no_metrics_save = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_adv_win_scale=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_window_scaling = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mtu_probing=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.default_qdisc = fq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.default_qdisc=fq_codel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.default_qdisc = pfifo_fast&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_congestion_control=cubic &lt;span class=&quot;comment&quot;&gt;#htcp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#throughput network env&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_congestion_control=htcp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#bad network env&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_frto=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_congestion_control=bbr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp_frto (&lt;span class=&quot;built_in&quot;&gt;integer&lt;/span&gt;; default: 0; since Linux 2.4.21/2.6)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              Enable  F-RTO,  an enhanced recovery algorithm &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; TCP retrans‐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              mission timeouts (RTOs).   It  is  particularly  beneficial  &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              wireless  environments  &lt;span class=&quot;built_in&quot;&gt;where&lt;/span&gt;  packet  loss is typically due to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              random radio interference rather than intermediate router  con‐&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              gestion.  See RFC 4138 &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; more details.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              This file can have one of the following values:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              0  Disabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              1  The basic version F-RTO algorithm is enabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              2  Enable  SACK-enhanced  F-RTO  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;  flow uses SACK.  The basic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 version can be used also when SACK is &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; use though &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;  that&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; scenario(s) exists &lt;span class=&quot;built_in&quot;&gt;where&lt;/span&gt; F-RTO interacts badly with the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 packet counting of the SACK-enabled TCP flow.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#keepalive for limit no-use client number, save server resource&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#net.ipv4.tcp_keepalive_intvl = 75&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_keepalive_intvl = 30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#net.ipv4.tcp_keepalive_probes = 9&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_keepalive_probes = 25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#net.ipv4.tcp_keepalive_time = 7200&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_keepalive_time = 360&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ netstat -no | grep ESTAB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0      0 10.0.25.57:49128       10.0.19.100:49152      ESTABLISHED keepalive (7.51/0/0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0      0 10.0.25.57:2049        10.2.64.5:883           ESTABLISHED off (0.00/0/0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0    704 172.30.39.156:988      172.30.39.231:1023     ESTABLISHED on (0.20/0/0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0      0 10.10.25.57:2049        10.10.67.6:685           ESTABLISHED off (0.00/0/0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ netstat -n | awk &lt;span class=&quot;string&quot;&gt;&#39;/^tcp/ &amp;#123;++S[$NF]&amp;#125; END &amp;#123;for(a in S) print a, S[a]&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ESTABLISHED 119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TIME_WAIT 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# reduce TIME-WAIT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_syncookies = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_tw_reuse = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_tw_recycle = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_fin_timeout=30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[There are warnings saying that net.ipv4.tcp_tw_reuse and](https://support.hpe.com/hpsc/doc/public/display?docId=emr_na-c00916755) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    net.ipv4.tcp_tw_recycle tunables should not be changed without &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    consulting experts first.  What does this mean and what can go &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wrong &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; they are enabled. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Answer:  Potential problems are not specific to Linux.  Enabling &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    these tunables will not make the host crash or unstable, but it &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    may &lt;span class=&quot;built_in&quot;&gt;break&lt;/span&gt; TCP/IP functionality &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; the host is connected to devices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    such as load-balancers or firewalls.  Some of these devices can &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reject SYN &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; it reuses the same connection (i.e. src/dst IP and &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    src/dst ports are the same) too quickly.  RFC 1122 describes when&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    it is acceptable to recycle the connection when SYN arrives &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    connection &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; TIME_WAIT state.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;THEORETICAL-MAXIMUM-RATE&quot;&gt;&lt;a href=&quot;#THEORETICAL-MAXIMUM-RATE&quot; class=&quot;headerlink&quot; title=&quot;THEORETICAL MAXIMUM RATE&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://support-kb.spirent.com/resources/sites/SPIRENT/content/live/FAQS/10000/FAQ10597/en_US/How_to_Test_10G_Ethernet_WhitePaper_RevB.PDF&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;THEORETICAL MAXIMUM RATE&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;There are two important concepts related to 10GbE performance: frame rate and&lt;br&gt;throughput. The MAC bit rate of 10GbE, defined in the IEEE standard 802.3ae, is&lt;br&gt;10 billion bits per second. Frame rate is a simple arithmetic calculation based on&lt;br&gt;the bit rate and frame format definitions. Throughput, defined in IETF RFC 1242,&lt;br&gt;is the highest rate at which the system under test can forward the offered load,&lt;br&gt;without loss. Manufacturers can claim line-rate throughput only if their switch&lt;br&gt;forwards all the traffic offered at the&lt;br&gt;10Gb/s line rate for the entire duration of the test.&lt;br&gt;The bit rate at which 10GbE Media Access Layer (MAC) operates, 10 billion&lt;br&gt;bits per second, is only one of the parameters in defining the transmission&lt;br&gt;rate for this important new technology. The usual description of true network&lt;br&gt;performance is frame rate, which indicates how many Ethernet frames are&lt;br&gt;moving across the network. The maximum frame rate for 10GbE is determined&lt;br&gt;by a formula that divides the 10 billion bits per second by the preamble, frame&lt;br&gt;length, and inter-frame gap fields, expressed in bits.&lt;br&gt;The maximum frame rate is calculated using the minimum values of the&lt;br&gt;following parameters, as described in the IEEE 802.3ae standard:&lt;br&gt;•     Preamble - 8 bytes &lt;em&gt; 8 = 64 bits&lt;br&gt;•     Frame length - 64 bytes (minimum) &lt;/em&gt; 8 = 512 bits&lt;br&gt;•     Inter-frame gap - 12 bytes (minimum) * 8 = 96 bits&lt;br&gt;Therefore,&lt;br&gt;Maximum Frame Rate =&lt;br&gt;MAC Transmit Bit Rate/&lt;br&gt;(Preamble + Frame Length + Inter-frame Gap)&lt;br&gt;= 10,000,000,000 / (64 + 512 + 96)&lt;br&gt;= 10,000,000,000 / 672&lt;br&gt;= 14,880,952.38 frame per second (fps)&lt;/p&gt;
&lt;h4 id=&quot;About-FEC&quot;&gt;&lt;a href=&quot;#About-FEC&quot; class=&quot;headerlink&quot; title=&quot;About FEC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.qlogic.com/Resources/Documents/WhitePapers/Adapters/Localized/White_Paper-25Gb_Ethernet_SN0530917-05_CN.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About FEC&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;IEEE 标准指定了两个底板和铜接口。这些接口的目标不同，因此接口存在不同。–S 短距离接口旨在支持无需转发纠错（FEC）的高质量电缆，以最大限度地降低延迟。全距离接口旨在实现尽可能低的电缆或背板成本以及尽可能长的距离，这需要使用FEC。FEC 选项包括 BASE-R FEC（也称为 Fire Code）和 RS-FEC（也称为 Reed-Solomon）。RS-FEC 已用于一系列应用，包括数据存储卫星传播。BASE-R FEC 是一种新型技术，特别适合纠正背板通道中由于接收均衡器的错误传播而导致的突发错误。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
    
    </summary>
    
      <category term="network" scheme="http://yoursite.com/categories/network/"/>
    
    
      <category term="nic" scheme="http://yoursite.com/tags/nic/"/>
    
      <category term="ethtool" scheme="http://yoursite.com/tags/ethtool/"/>
    
      <category term="debug" scheme="http://yoursite.com/tags/debug/"/>
    
      <category term="driver" scheme="http://yoursite.com/tags/driver/"/>
    
      <category term="irqbalance" scheme="http://yoursite.com/tags/irqbalance/"/>
    
  </entry>
  
  <entry>
    <title>upgrade hgst JBOD</title>
    <link href="http://yoursite.com/2017/07/31/upgrade-hgst-JBOD/"/>
    <id>http://yoursite.com/2017/07/31/upgrade-hgst-JBOD/</id>
    <published>2017-07-31T09:57:28.000Z</published>
    <updated>2017-12-06T09:41:06.000Z</updated>
    
    <content type="html">&lt;p&gt;get JBOD encolsure firmware version&lt;br&gt;sg_scan  -i | grep -i 1ES0059  -B 1&lt;br&gt;/dev/sg65: scsi14 channel=0 id=58 lun=0&lt;br&gt;HGST 4U60_STOR_ENCL 0210 [rmb=0 cmdq=1 pqual=0 pdev=0xd]&lt;/p&gt;
&lt;p&gt;upgrade firmware&lt;br&gt;[root@testhost1 fw]# ./hgst_upg_tool -d /dev/sg65 -f eros_4.2.5.0_CombinedImage.bin –m 7&lt;/p&gt;
&lt;p&gt;upgrade hdd firmware version&lt;br&gt;rpm -ivh hugo-6.1.2-1.x86_64.rpm&lt;br&gt;HUS726060AL5210 is HDD model&lt;/p&gt;
&lt;p&gt;update -f ./APGNAD05.bin -m HUS726060AL5210 &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;get JBOD encolsure firmware version&lt;br&gt;sg_scan  -i | grep -i 1ES0059  -B 1&lt;br&gt;/dev/sg65: scsi14 channel=0 id=58 lun=0&lt;br&gt;HGST 4U60_STOR_E
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>grubby</title>
    <link href="http://yoursite.com/2017/07/12/grub/"/>
    <id>http://yoursite.com/2017/07/12/grub/</id>
    <published>2017-07-12T09:48:19.000Z</published>
    <updated>2018-05-27T03:35:07.000Z</updated>
    
    <content type="html">&lt;p&gt;CentOS 7 add kernel parameter&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grubby --remove-args=&lt;span class=&quot;string&quot;&gt;&quot;argX argY&quot;&lt;/span&gt; --args=&lt;span class=&quot;string&quot;&gt;&quot;argA argB&quot;&lt;/span&gt; --update-kernel /boot/kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --update-kernel=ALL --args=&lt;span class=&quot;string&quot;&gt;&#39;scsi_mod.use_blk_mq=y dm_mod.use_blk_mq=y&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;set default boot&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grubby --info=ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-3.10.0-514.6.1.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-3.10.0-514.6.1.el7.x86_64.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (3.10.0-514.6.1.el7.x86_64) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-3.10.0-327.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-3.10.0-327.el7.x86_64.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel=/boot/vmlinuz-0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;args=&lt;span class=&quot;string&quot;&gt;&quot;ro crashkernel=auto rd.md.uuid=cc0432b3:6f6f54bf:c2f2b91b:2978ff6a rhgb quiet &quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root=UUID=5b0e60cf-adf9-42a0-b6e3-0304b919dc33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initrd=/boot/initramfs-0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;title=CentOS Linux (0-rescue&lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;614a3c482eb4b21add5ae750b3871bb) 7 (Core)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;index=3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;non linux entry&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --set-default /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grubby --info /boot/vmlinuz-3.10.0-229.4.2.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Making_Persistent_Changes_to_a_GRUB_2_Menu_Using_the_grubby_Tool.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;CentOS 7 add kernel parameter&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span c
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="grub" scheme="http://yoursite.com/tags/grub/"/>
    
  </entry>
  
</feed>
