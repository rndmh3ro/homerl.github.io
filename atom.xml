<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Homer&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-05-24T13:45:28.733Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Homer Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Performance Tuning in centos7</title>
    <link href="http://yoursite.com/2017/05/24/Performance-Tuning-in-centos7/"/>
    <id>http://yoursite.com/2017/05/24/Performance-Tuning-in-centos7/</id>
    <published>2017-05-24T12:30:55.000Z</published>
    <updated>2017-05-24T13:45:28.733Z</updated>
    
    <content type="html">&lt;h5 id=&quot;High-availability-cluster&quot;&gt;&lt;a href=&quot;#High-availability-cluster&quot; class=&quot;headerlink&quot; title=&quot;High availability cluster&quot;&gt;&lt;/a&gt;High availability cluster&lt;/h5&gt;&lt;p&gt;2 x 2U Sever SAS3 connect 4 x 90 bay JBOD&lt;br&gt;&lt;img src=&quot;/img/supermicro-arch17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;Top-sas-throughput-base-32-x-Raidz2-9-2&quot;&gt;&lt;a href=&quot;#Top-sas-throughput-base-32-x-Raidz2-9-2&quot; class=&quot;headerlink&quot; title=&quot;Top sas throughput base 32 x Raidz2 (9+2)&quot;&gt;&lt;/a&gt;Top sas throughput base 32 x Raidz2 (9+2)&lt;/h5&gt;&lt;p&gt;Sinle x86 server thgroughput could be 23GB/s&lt;br&gt;Average throughput about 15~17GB/s&lt;br&gt;&lt;img src=&quot;/img/Single-server-sas-throughput2017-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;BIOS-setting&quot;&gt;&lt;a href=&quot;#BIOS-setting&quot; class=&quot;headerlink&quot; title=&quot;BIOS setting&quot;&gt;&lt;/a&gt;BIOS setting&lt;/h5&gt;&lt;p&gt;Enable X2APIC&lt;/p&gt;
&lt;h5 id=&quot;cpu-setting&quot;&gt;&lt;a href=&quot;#cpu-setting&quot; class=&quot;headerlink&quot; title=&quot;cpu setting&quot;&gt;&lt;/a&gt;cpu setting&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm profile throughput-performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tuned-adm active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower idle-set &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpupower  frequency-set -g performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# for more info /usr/lib/tuned/throughput-performance/tuned.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;sysctl&quot;&gt;&lt;a href=&quot;#sysctl&quot; class=&quot;headerlink&quot; title=&quot;sysctl&quot;&gt;&lt;/a&gt;sysctl&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;kernel.numa_balancing=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_max_backlog = 300000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_sack = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_budget=600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem=16384 349520 16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem=16384 349520 16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mem = 2314209      3085613 4628418&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.somaxconn=2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_adv_win_scale=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_window_scaling = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#UDP buffer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=16777216&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Dual-port-25GbE&quot;&gt;&lt;a href=&quot;#Dual-port-25GbE&quot; class=&quot;headerlink&quot; title=&quot;Dual port 25GbE&quot;&gt;&lt;/a&gt;Dual port 25GbE&lt;/h5&gt;&lt;h6 id=&quot;NIC-settting&quot;&gt;&lt;a href=&quot;#NIC-settting&quot; class=&quot;headerlink&quot; title=&quot;NIC settting&quot;&gt;&lt;/a&gt;NIC settting&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -C enp131s0f0 adaptive-rx off rx-usecs 0 rx-frames 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -G enp131s0f0 rx 8192 tx 8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -G enp131s0f0 rx 8192 tx 8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -N enp131s0f0 rx-flow-hash udp4 sdfn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp131s0f0 txqueuelen 1500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp131s0f1 txqueuelen 1500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev bond0 txqueuelen 3000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MTU=9000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;Bond-info&quot;&gt;&lt;a href=&quot;#Bond-info&quot; class=&quot;headerlink&quot; title=&quot;Bond info&quot;&gt;&lt;/a&gt;Bond info&lt;/h6&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Bonding Mode: IEEE 802.3ad Dynamic link aggregation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Transmit Hash Policy: layer2 (0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Polling Interval (ms): 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Up Delay (ms): 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Down Delay (ms): 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;802.3ad info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LACP rate: slow&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;M&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; links: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator selection policy (ad_select): stable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;System MAC address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Active Aggregator Info:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Number of ports: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Actor Key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Partner Key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Partner Mac Address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave Interface: enp131s0f0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Speed: 25000 Mbps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Duplex: full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Link Failure Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Permanent HW addr: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave queue ID: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details actor lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details partner lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    oper key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave Interface: enp131s0f1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MII Status: up&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Speed: 25000 Mbps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Duplex: full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Link Failure Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Permanent HW addr: 7c:fe:90:de:08:39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Slave queue ID: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Aggregator ID: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churn State: none&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actor Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partner Churned Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details actor lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 7c:fe:90:de:08:38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port key: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;details partner lacp pdu:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system mac address: 38:bc:01:79:33:51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    oper key: 449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port priority: 32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port number: 97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port state: 61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h6 id=&quot;Get-CPU-and-PCIE-adapter-topology&quot;&gt;&lt;a href=&quot;#Get-CPU-and-PCIE-adapter-topology&quot; class=&quot;headerlink&quot; title=&quot;Get CPU and PCIE adapter topology&quot;&gt;&lt;/a&gt;Get CPU and PCIE adapter topology&lt;/h6&gt;&lt;p&gt;Pin different cpu cores to different adapter&lt;br&gt;Disable irqbalance&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Enable HT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0,1,10,11,2,24,25,26,27,28,29,3,30,31,32,33,34,35,4,5,6,7,8,9,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12,13,14,15,16,17,18,19,20,21,22,23,36,37,38,39,40,41,42,43,44,45,46,47,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpu numa node number is: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpu-hex cpu-hex numa_node&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200 200000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40 40000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 8000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 1000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10 10000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 2000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20 20000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80 80000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400 400000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100 100000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4 4000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;800 800000000 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400000 400000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8000 8000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;800000 800000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20000 20000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40000 40000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1000 1000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100000 100000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80000 80000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10000 10000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2000 2000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200000 200000000000 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4000 4000000000 1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;Numa-node0&quot;&gt;&lt;a href=&quot;#Numa-node0&quot; class=&quot;headerlink&quot; title=&quot;Numa node0&quot;&gt;&lt;/a&gt;Numa node0&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;02:00.0 Non-Volatile memory controller: Intel Corporation Device 0a53 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03:00.0 Non-Volatile memory controller: Intel Corporation Device 0a53 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;04:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Numa-node1&quot;&gt;&lt;a href=&quot;#Numa-node1&quot; class=&quot;headerlink&quot; title=&quot;Numa node1&quot;&gt;&lt;/a&gt;Numa node1&lt;/h5&gt;&lt;p&gt;Next time , I will change etheret adapter to numa 0&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;83:00.0 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83:00.1 Ethernet controller: Mellanox Technologies MT27710 Family [ConnectX-4 Lx]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84:00.0 Serial Attached SCSI controller: LSI Logic / Symbios Logic SAS3008 PCI-Express Fusion-MPT SAS-3 (rev 02)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;mpt3sas&quot;&gt;&lt;a href=&quot;#mpt3sas&quot; class=&quot;headerlink&quot; title=&quot;mpt3sas&quot;&gt;&lt;/a&gt;mpt3sas&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/modprobe.d/mpt3sas.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options mpt3sas max_msix_vectors=6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;storage-device-setting&quot;&gt;&lt;a href=&quot;#storage-device-setting&quot; class=&quot;headerlink&quot; title=&quot;storage device setting&quot;&gt;&lt;/a&gt;storage device setting&lt;/h5&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HDD /sys/block/*/queue/scheduler deadline&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSD /sys/block/*/queue/scheduler noop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/queue/nr_requests 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/queue_depth 256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/scsi_disk/*/cache_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; write back &lt;span class=&quot;comment&quot;&gt;#For throughput&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/device/scsi_disk/*/cache_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; write through &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rr_min_io_rq /etc/multipath.conf 1 &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/sys/block/*/queue/nomerges 1 &lt;span class=&quot;comment&quot;&gt;#For latency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/homerl/pin_affinity/blob/master/pin_affinity.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;my scripts&lt;/a&gt;&lt;br&gt;./pin_cpu.sh SAS3008 Mellanox Non-Volatile&lt;/p&gt;
&lt;h5 id=&quot;The-others&quot;&gt;&lt;a href=&quot;#The-others&quot; class=&quot;headerlink&quot; title=&quot;The others&quot;&gt;&lt;/a&gt;The others&lt;/h5&gt;&lt;p&gt;running your app by numactl in single numa node&lt;br&gt;libvma to bypass kernel&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;High-availability-cluster&quot;&gt;&lt;a href=&quot;#High-availability-cluster&quot; class=&quot;headerlink&quot; title=&quot;High availability cluster&quot;&gt;&lt;/a&gt;High availa
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="benchmark" scheme="http://yoursite.com/tags/benchmark/"/>
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="performance" scheme="http://yoursite.com/tags/performance/"/>
    
  </entry>
  
  <entry>
    <title>SMcli monitor raid controller</title>
    <link href="http://yoursite.com/2017/04/13/SMcli-monitor-raid-controller/"/>
    <id>http://yoursite.com/2017/04/13/SMcli-monitor-raid-controller/</id>
    <published>2017-04-13T02:39:34.000Z</published>
    <updated>2017-04-14T08:19:32.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Get-storage-system-name&quot;&gt;&lt;a href=&quot;#Get-storage-system-name&quot; class=&quot;headerlink&quot; title=&quot;Get storage-system-name&quot;&gt;&lt;/a&gt;Get storage-system-name&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-n means storage-system-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli localhost&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-storage-system-status&quot;&gt;&lt;a href=&quot;#Get-storage-system-status&quot; class=&quot;headerlink&quot; title=&quot;Get storage system status&quot;&gt;&lt;/a&gt;Get storage system status&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot; show storagearray healthstatus;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Show-all-info&quot;&gt;&lt;a href=&quot;#Show-all-info&quot; class=&quot;headerlink&quot; title=&quot;Show all info&quot;&gt;&lt;/a&gt;Show all info&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;show allControllers  summary;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;Show allVirtualDisks;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show AllPhysicalDisks summary;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### If no summary , it will output all details for each devices.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show allcontrollers;&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;##NVRAM status, cache mirror&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;Show allphysicalDisks ;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Output-controller-log&quot;&gt;&lt;a href=&quot;#Output-controller-log&quot; class=&quot;headerlink&quot; title=&quot;Output controller log&quot;&gt;&lt;/a&gt;Output controller log&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli  -n ControllerA  -c &lt;span class=&quot;string&quot;&gt;&quot;save storageArray supportdata file=\&quot;/tmp/controller.log\&quot; force=true;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Reset-controller&quot;&gt;&lt;a href=&quot;#Reset-controller&quot; class=&quot;headerlink&quot; title=&quot;Reset controller&quot;&gt;&lt;/a&gt;Reset controller&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n  ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;reset controller 0;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n  ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;reset controller 1;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Blink-the-device&quot;&gt;&lt;a href=&quot;#Blink-the-device&quot; class=&quot;headerlink&quot; title=&quot;Blink the device&quot;&gt;&lt;/a&gt;Blink the device&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;start physicalDisk [1,0,11] blink;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;stop physicalDisk blink;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-battery-status&quot;&gt;&lt;a href=&quot;#Get-battery-status&quot; class=&quot;headerlink&quot; title=&quot;Get battery status&quot;&gt;&lt;/a&gt;Get battery status&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show storageArray batteryage;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Get-battery-status-1&quot;&gt;&lt;a href=&quot;#Get-battery-status-1&quot; class=&quot;headerlink&quot; title=&quot;Get battery status&quot;&gt;&lt;/a&gt;Get battery status&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMcli -n ControllerA -c &lt;span class=&quot;string&quot;&gt;&quot;show storageArray powerInfo;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Get-storage-system-name&quot;&gt;&lt;a href=&quot;#Get-storage-system-name&quot; class=&quot;headerlink&quot; title=&quot;Get storage-system-name&quot;&gt;&lt;/a&gt;Get storage-syste
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="raid" scheme="http://yoursite.com/tags/raid/"/>
    
      <category term="lsi" scheme="http://yoursite.com/tags/lsi/"/>
    
      <category term="smcli" scheme="http://yoursite.com/tags/smcli/"/>
    
      <category term="san" scheme="http://yoursite.com/tags/san/"/>
    
      <category term="monitor" scheme="http://yoursite.com/tags/monitor/"/>
    
  </entry>
  
  <entry>
    <title>Test linux SCSI-Persistent-Reservation (SPC-3)</title>
    <link href="http://yoursite.com/2017/03/21/SCSI-Persistent-Reservations/"/>
    <id>http://yoursite.com/2017/03/21/SCSI-Persistent-Reservations/</id>
    <published>2017-03-21T07:30:36.000Z</published>
    <updated>2017-03-21T08:33:50.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Because-brain-split-zfs-will-corrupt&quot;&gt;&lt;a href=&quot;#Because-brain-split-zfs-will-corrupt&quot; class=&quot;headerlink&quot; title=&quot;Because brain-split, zfs will corrupt&quot;&gt;&lt;/a&gt;Because brain-split, zfs will corrupt&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;which&lt;/span&gt; genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/sbin/genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rpm -qf /usr/sbin/genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;initscripts-9.49.37-1.el7.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ genhostid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist --out --register --param-sark=$(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --out --register --param-sark=$(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# reserve operate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --out --reserve --param-rk=0x$(hostid) --prout-type=1 /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PR generation=0x5c, Reservation follows:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Key=0x7819de15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scope: LU_SCOPE,  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Write Exclusive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0273762 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.145223 s, 72.2 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# get the reservation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist -n -o -A &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4 -K $(hostid) -S 0x7819de15  -T 1 -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Persistent Reservation Out cmd: 5f 05 01 00 00 00 00 00 18 00 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PR out: &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; (Preempt and abort) successful&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PR generation=0x5d, Reservation follows:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Key=0x77f7c343&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scope: LU_SCOPE,  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Write Exclusivea&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.142939 s, 73.4 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0139251 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ sg_persist -n -o -A &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4 -K $(hostid) -S 0x77f7c343 -T 1 -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Persistent Reservation Out cmd: 5f 05 01 00 00 00 00 00 18 00 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PR out: &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; (Preempt and abort) successful&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10485760 bytes (10 MB) copied, 0.149629 s, 70.1 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A $ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/mapper/35000cca2515f34c4 bs=1M count=10 oflag=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd: error writing ‘/dev/mapper/35000cca2515f34c4’: Input/output error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes (0 B) copied, 0.0207658 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Prout-type&quot;&gt;&lt;a href=&quot;#Prout-type&quot; class=&quot;headerlink&quot; title=&quot;Prout-type&quot;&gt;&lt;/a&gt;Prout-type&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1-&amp;gt; write exclusive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3-&amp;gt; exclusive access&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5-&amp;gt; write exclusive - registrants only&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6-&amp;gt; exclusive access - registrants only&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7-&amp;gt; write exclusive - all registrants&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8-&amp;gt; exclusive access - all registrants&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Release-reservation&quot;&gt;&lt;a href=&quot;#Release-reservation&quot; class=&quot;headerlink&quot; title=&quot;Release reservation&quot;&gt;&lt;/a&gt;Release reservation&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --release -K $(hostid) --prout-type=1 /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --in -r --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PR generation=0x5f, there is NO reservation held&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Unregister-key&quot;&gt;&lt;a href=&quot;#Unregister-key&quot; class=&quot;headerlink&quot; title=&quot;Unregister key&quot;&gt;&lt;/a&gt;Unregister key&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --register -K $(hostid) &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HGST      HUH721010AL5200   A21D&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Peripheral device &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --in -k --no-inquiry &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PR generation=0x60, there are NO registered reservation keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Force-mode&quot;&gt;&lt;a href=&quot;#Force-mode&quot; class=&quot;headerlink&quot; title=&quot;Force mode ?&quot;&gt;&lt;/a&gt;Force mode ?&lt;/h3&gt;&lt;p&gt;It releases the persistent reservation (if any) and clears all registrations from the device&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_persist --out --clear -K $(hostid) /dev/mapper/35000cca2515f34c4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;About-multipath&quot;&gt;&lt;a href=&quot;#About-multipath&quot; class=&quot;headerlink&quot; title=&quot;About multipath&quot;&gt;&lt;/a&gt;About multipath&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;no_path_retry queue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;features &lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://dhelios.blogspot.com/2015/04/how-can-i-view-create-and-remove-scsi.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How can I view create and remove scsi&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://lkml.iu.edu/hypermail/linux/kernel/0903.3/02074.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Target_Core_Mod&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://lists.wpkg.org/pipermail/stgt/2010-October/017304.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Support for persistent reservations&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://assets.cdn.sap.com/sapcom/docs/2016/06/84ea994f-767c-0010-82c7-eda71af511fa.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SAP HANA Fiber Channel Storage Connector Admin Guide&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Because-brain-split-zfs-will-corrupt&quot;&gt;&lt;a href=&quot;#Because-brain-split-zfs-will-corrupt&quot; class=&quot;headerlink&quot; title=&quot;Because brain-split,
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="hdd" scheme="http://yoursite.com/tags/hdd/"/>
    
      <category term="ssd" scheme="http://yoursite.com/tags/ssd/"/>
    
      <category term="sas" scheme="http://yoursite.com/tags/sas/"/>
    
      <category term="spc" scheme="http://yoursite.com/tags/spc/"/>
    
      <category term="scsi" scheme="http://yoursite.com/tags/scsi/"/>
    
  </entry>
  
  <entry>
    <title>HA centos 7 configuration</title>
    <link href="http://yoursite.com/2017/03/13/HA-centos7-3-nodes-configuration/"/>
    <id>http://yoursite.com/2017/03/13/HA-centos7-3-nodes-configuration/</id>
    <published>2017-03-13T01:56:08.000Z</published>
    <updated>2017-03-14T12:11:59.518Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Physical-node-OS&quot;&gt;&lt;a href=&quot;#Physical-node-OS&quot; class=&quot;headerlink&quot; title=&quot;Physical node OS&quot;&gt;&lt;/a&gt;Physical node OS&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CentOS Linux release 7.3&lt;br&gt;&lt;img src=&quot;/img/test-arch.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Create-linux-HA-3-x-physical-server&quot;&gt;&lt;a href=&quot;#Create-linux-HA-3-x-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Create linux HA ,3 x physical server&quot;&gt;&lt;/a&gt;Create linux HA ,3 x physical server&lt;/h2&gt;&lt;p&gt;127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4&lt;br&gt;::1         localhost localhost.localdomain localhost6 localhost6.localdomain6&lt;br&gt;192.xx.xx.130 node01&lt;br&gt;192.xx.xx.131 node02&lt;br&gt;192.xx.xx.132 node03&lt;/p&gt;
&lt;h3 id=&quot;Share-strorages&quot;&gt;&lt;a href=&quot;#Share-strorages&quot; class=&quot;headerlink&quot; title=&quot;Share strorages&quot;&gt;&lt;/a&gt;Share strorages&lt;/h3&gt;&lt;p&gt;NFS/Lustre&lt;/p&gt;
&lt;h3 id=&quot;Setup-HA-cluster&quot;&gt;&lt;a href=&quot;#Setup-HA-cluster&quot; class=&quot;headerlink&quot; title=&quot;Setup HA cluster&quot;&gt;&lt;/a&gt;Setup HA cluster&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# yum -y install pacemaker corosync fence-agents-all fence-agents-virsh \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fence-virt pacemaker-remote pcs fence-virtd resource-agents \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fence-virtd-libvirt fence-virtd-multicast&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-nodes-glusterfs-config&quot;&gt;&lt;a href=&quot;#3-nodes-glusterfs-config&quot; class=&quot;headerlink&quot; title=&quot;3 nodes glusterfs config&quot;&gt;&lt;/a&gt;3 nodes glusterfs config&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ zpool create tank -O canmount=on -o ashift=9 -o cachefile=none -O xattr=sa -O compression=lz4 -O acltype=posixacl raidz2 /dev/sd&amp;#123;c..h&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool add tank cache /dev/sda4 /dev/sdb4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool add tank &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; mirror /dev/sda3 /dev/sdb3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ gluster volume create ec-test disperse-data 2 redundancy 1  transport tcp node1:/tank/glusterfs node2:/tank/glusterfs node3:/tank/glusterfs force&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Setup-physical-server&quot;&gt;&lt;a href=&quot;#Setup-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Setup physical server&quot;&gt;&lt;/a&gt;Setup physical server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; hacluster | passwd --stdin hacluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; corosync.service pcaemaker.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl stop corosync.service pcaemaker.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl start pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl is-active pcsd.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster auth node01 node02 node03 &lt;span class=&quot;comment&quot;&gt;##input hacluster password for auth&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster setup --name ha-cluster node01,172.29.xx.xx node02,172.92.xx.xx node03,172.29.xx.xx --transport udpu --rrpmode passive --token 17000 --addr0 172.29.xx.0 --addr1 192.168.101.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster setup --start --name ha-cluster node01 node02 node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## pcs property set no-quorum-policy=stop #don&#39;t need to stop&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;4.1.2 Option no-quorum-policy&lt;/p&gt;
&lt;p&gt;This global option defines what to do when a cluster partition does not have quorum (no majority of nodes is part of the partition).&lt;/p&gt;
&lt;p&gt;Allowed values are:&lt;/p&gt;
&lt;p&gt;ignore&lt;br&gt;The quorum state does not influence the cluster behavior; resource management is continued.&lt;/p&gt;
&lt;p&gt;This setting is useful for the following scenarios:&lt;/p&gt;
&lt;p&gt;Two-node clusters: Since a single node failure would always result in a loss of majority, usually you want the cluster to carry on regardless. Resource integrity is ensured using fencing, which also prevents split brain scenarios.&lt;/p&gt;
&lt;p&gt;Resource-driven clusters: For local clusters with redundant communication channels, a split brain scenario only has a certain probability. Thus, a loss of communication with a node most likely indicates that the node has crashed, and that the surviving nodes should recover and start serving the resources again.&lt;/p&gt;
&lt;p&gt;If no-quorum-policy is set to ignore, a 4-node cluster can sustain concurrent failure of three nodes before service is lost. With the other settings, it would lose quorum after concurrent failure of two nodes.&lt;/p&gt;
&lt;p&gt;freeze&lt;br&gt;If quorum is lost, the cluster partition freezes. Resource management is continued: running resources are not stopped (but possibly restarted in response to monitor events), but no further resources are started within the affected partition.&lt;/p&gt;
&lt;p&gt;This setting is recommended for clusters where certain resources depend on communication with other nodes (for example, OCFS2 mounts). In this case, the default setting no-quorum-policy=stop is not useful, as it would lead to the following scenario: Stopping those resources would not be possible while the peer nodes are unreachable. Instead, an attempt to stop them would eventually time out and cause a stop failure, triggering escalated recovery and fencing.&lt;/p&gt;
&lt;p&gt;stop (default value)&lt;br&gt;If quorum is lost, all resources in the affected cluster partition are stopped in an orderly fashion.&lt;/p&gt;
&lt;p&gt;suicide&lt;br&gt;If quorum is lost, all nodes in the affected cluster partition are fenced.&lt;/p&gt;
&lt;h4 id=&quot;Setting-etc-corosync-corosync-conf-for-every-node&quot;&gt;&lt;a href=&quot;#Setting-etc-corosync-corosync-conf-for-every-node&quot; class=&quot;headerlink&quot; title=&quot;Setting /etc/corosync/corosync.conf for every node&quot;&gt;&lt;/a&gt;Setting /etc/corosync/corosync.conf for every node&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;totem &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    version: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    secauth: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cluster_name: homer-test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transport: udpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rrp_mode: passive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    token: 17000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ringnumber: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bindnetaddr: 192.168.xx.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastaddr: 239.255.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastport: 5405&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ringnumber: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bindnetaddr: 172.29.xx.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastaddr: 239.255.2.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mcastport: 5405&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nodelist &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring0_addr: bgi-sz1-homer-test76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ring1_addr: 172.29.xx.xx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nodeid: 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;quorum &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    provider: corosync_votequorum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;logging &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    to_logfile: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile: /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/cluster/corosync.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    to_syslog: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Start-cluster&quot;&gt;&lt;a href=&quot;#Start-cluster&quot; class=&quot;headerlink&quot; title=&quot;Start cluster&quot;&gt;&lt;/a&gt;Start cluster&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster start --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ corosync-cfgtool &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Printing ring status.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Local node ID 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RING ID 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	id	= 192.168.xx.130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	status	= ring 0 active with no faults&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RING ID 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	id	= 172.29.xx.73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	status	= ring 1 active with no faults&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-stonith-for-physical-server&quot;&gt;&lt;a href=&quot;#Create-stonith-for-physical-server&quot; class=&quot;headerlink&quot; title=&quot;Create stonith for physical server&quot;&gt;&lt;/a&gt;Create stonith for physical server&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node01-fencing fence_ipmilan pcmk_host_list=&quot;nod01&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node1_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node02-fencing fence_ipmilan pcmk_host_list=&quot;node02&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node2_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs stonith create node03-fencing fence_ipmilan pcmk_host_list=&quot;node03&quot; \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ipaddr=&lt;span class=&quot;string&quot;&gt;&quot;node3_ipmi_ipaddr&quot;&lt;/span&gt; login=ADMIN passwd=ADMIN lanplus=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; power_&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;=4 op \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs property set stonith-enabled=true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs status&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cluster name: ha-cluster&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Online: [ node02 node03 node01 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Full list of resources:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node01-fencing	(stonith:fence_ipmilan):	Started node02&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node03-fencing	(stonith:fence_ipmilan):	Started node01&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; node02-fencing	(stonith:fence_ipmilan):	Started node03&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PCSD Status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node03: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node01: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  node02: Online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Daemon Status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  corosync: active/disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pacemaker: active/disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pcsd: active/enabled&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Get-quorum-info&quot;&gt;&lt;a href=&quot;#Get-quorum-info&quot; class=&quot;headerlink&quot; title=&quot;Get quorum info&quot;&gt;&lt;/a&gt;Get quorum info&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ corosync-quorumtool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Date:             Mon Mar 13 22:08:01 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum provider:  corosync_votequorum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Nodes:            3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Node ID:          0x00000001&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring ID:          1/568&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorate:          Yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Votequorum information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;----------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Expected votes:   3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Highest expected: 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Total votes:      3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Quorum:           2  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Flags:            Quorate &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Membership information&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;----------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Nodeid      Votes Name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000001          1 192.168.xx.130 (&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000002          1 192.168.xx.131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000003          1 192.168.xx.132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$  corosync-cmapctl|grep members&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.ip (str) = r(0) ip(192.168.xx.130) r(1) ip(172.29.xx.73) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.1.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.ip (str) = r(0) ip(192.168.xx.131) r(1) ip(172.29.xx.74) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.2.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.config_version (u64) = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.ip (str) = r(0) ip(192.168.xx.132) r(1) ip(172.29.xx.76) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.join_count (u32) = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime.totem.pg.mrp.srp.members.3.status (str) = joined&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;backup-and-restore-configuration&quot;&gt;&lt;a href=&quot;#backup-and-restore-configuration&quot; class=&quot;headerlink&quot; title=&quot;backup and restore configuration&quot;&gt;&lt;/a&gt;backup and restore configuration&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster cib &amp;gt; xx.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs cluster cib-push xx.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs config&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-resources&quot;&gt;&lt;a href=&quot;#Create-resources&quot; class=&quot;headerlink&quot; title=&quot;Create resources&quot;&gt;&lt;/a&gt;Create resources&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create VirtualIP1 ocf:heartbeat:IPaddr2 ip=10.0.0.77 cidr_netmask=8 nic=br0 op monitor interval=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location VirtualIP prefers bgi-sz1-homer-test73=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create ansible-kvm VirtualDomain hypervisor=&lt;span class=&quot;string&quot;&gt;&quot;qemu:///system&quot;&lt;/span&gt; config=&lt;span class=&quot;string&quot;&gt;&quot;/export/glusterfs/vms/kvm/xml/ansible-kvm.xml&quot;&lt;/span&gt; migration_transport=ssh op start timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op stop timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op monitor  timeout=&lt;span class=&quot;string&quot;&gt;&quot;30&quot;&lt;/span&gt; interval=&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;  meta allow-migrate=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; op migrate_from interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120s&quot;&lt;/span&gt; op migrate_to interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# if you want add to group, add --group xxx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource create ansible-kvm VirtualDomain hypervisor=&lt;span class=&quot;string&quot;&gt;&quot;qemu:///system&quot;&lt;/span&gt; config=&lt;span class=&quot;string&quot;&gt;&quot;/export/glusterfs/vms/kvm/xml/ansible-kvm.xml&quot;&lt;/span&gt; migration_transport=ssh op start timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op stop timeout=&lt;span class=&quot;string&quot;&gt;&quot;60s&quot;&lt;/span&gt; op monitor  timeout=&lt;span class=&quot;string&quot;&gt;&quot;30&quot;&lt;/span&gt; interval=&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;  meta allow-migrate=&lt;span class=&quot;string&quot;&gt;&quot;true&quot;&lt;/span&gt; op migrate_from interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120s&quot;&lt;/span&gt; op migrate_to interval=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt; timeout=&lt;span class=&quot;string&quot;&gt;&quot;120&quot;&lt;/span&gt; --group GROUP-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# http&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pcs resource create webres apache configfile=&quot;/etc/httpd/conf/httpd.conf&quot; statusurl=&quot;http://127.0.0.1/server-status&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Create-the-resource-group&quot;&gt;&lt;a href=&quot;#Create-the-resource-group&quot; class=&quot;headerlink&quot; title=&quot;Create the resource group&quot;&gt;&lt;/a&gt;Create the resource group&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs resource group add GROUP-A resource-1 resource-2 resource-3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;monitor&quot;&gt;&lt;a href=&quot;#monitor&quot; class=&quot;headerlink&quot; title=&quot;monitor&quot;&gt;&lt;/a&gt;monitor&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crm_mon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs status nodes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Standby-and-maintance&quot;&gt;&lt;a href=&quot;#Standby-and-maintance&quot; class=&quot;headerlink&quot; title=&quot;Standby and maintance&quot;&gt;&lt;/a&gt;Standby and maintance&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster standby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster unstandby&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster stop --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#BAN&quot; the resource group  in which you would like to stop the cluster services&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs resource ban resource-name node-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#maintenance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; maintenance-mode=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs property &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; maintenance-mode=flase&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-constraint&quot;&gt;&lt;a href=&quot;#Resource-constraint&quot; class=&quot;headerlink&quot; title=&quot;Resource constraint&quot;&gt;&lt;/a&gt;Resource constraint&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test73 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test74 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test76 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Colocation Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ticket Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers nodename=50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Using location constraint, you can also avoid specific node to run a particular resource&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name avoids nodename=50&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-order&quot;&gt;&lt;a href=&quot;#Resource-order&quot; class=&quot;headerlink&quot; title=&quot;Resource order&quot;&gt;&lt;/a&gt;Resource order&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order resource1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; resource2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order resource2 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; resource3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# remove&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order remove resource1 id_output&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# example&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; manager-kvm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Adding VirtualIP1 manager-kvm (kind: Mandatory) (Options: first-action=start &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;-action=start)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test73 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test74 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Resource: VirtualIP3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Enabled on: bgi-sz1-homer-test76 (score:0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  start VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; start manager-kvm (kind:Mandatory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Colocation Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ticket Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  start VirtualIP1 &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt; start manager-kvm (kind:Mandatory) (id:order-VirtualIP1-manager-kvm-mandatory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#input id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order remove VirtualIP1 order-VirtualIP1-manager-kvm-mandatory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint order --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ordering Constraints:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Resource-migration&quot;&gt;&lt;a href=&quot;#Resource-migration&quot; class=&quot;headerlink&quot; title=&quot;Resource migration&quot;&gt;&lt;/a&gt;Resource migration&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update resource-name meta migration-threshold=&lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults migration-threshold=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update resource-name meta failure-timeout=60s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource show resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# show fail-count&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ crm_failcount -r resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# reset the fail-counts &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount reset resource-name node-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource cleanup resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show  resource-name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Not-move-resource-back&quot;&gt;&lt;a href=&quot;#Not-move-resource-back&quot; class=&quot;headerlink&quot; title=&quot;Not move resource back&quot;&gt;&lt;/a&gt;Not move resource back&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults resource-stickiness=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource defaults&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Colocation-constraint&quot;&gt;&lt;a href=&quot;#Colocation-constraint&quot; class=&quot;headerlink&quot; title=&quot;Colocation constraint&quot;&gt;&lt;/a&gt;Colocation constraint&lt;/h4&gt;&lt;p&gt;A colocation constraint determines that the location of one resource depends on the location of another resource&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation add resource1 resource2 INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation add resource1 with resource2 INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#remove&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint colocation remove resource1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Resource-location&quot;&gt;&lt;a href=&quot;#Resource-location&quot; class=&quot;headerlink&quot; title=&quot;Resource location&quot;&gt;&lt;/a&gt;Resource location&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers node1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name avoids node1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint --full&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location remove location-resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs constraint location resource-name prefers node1=INFINITY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ crm_simulate &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;L &lt;span class=&quot;comment&quot;&gt;# get resource score&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Resource pefer node1,node2,node3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node1=200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node2=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pcs constraint location resource-name prefers node3=0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Update-resource-config&quot;&gt;&lt;a href=&quot;#Update-resource-config&quot; class=&quot;headerlink&quot; title=&quot;Update resource config&quot;&gt;&lt;/a&gt;Update resource config&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource update ansible-kvm config=/opt/lustresz/DAS_NFS/vms/HA-kvm/homerl/config/ansible-kvm.xml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Manage-resource&quot;&gt;&lt;a href=&quot;#Manage-resource&quot; class=&quot;headerlink&quot; title=&quot;Manage resource&quot;&gt;&lt;/a&gt;Manage resource&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; resource-name    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; resource-name    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount show resource-name &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource failcount reset resource-name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ pcs resource cleanup resource-name&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Clear-error-output&quot;&gt;&lt;a href=&quot;#Clear-error-output&quot; class=&quot;headerlink&quot; title=&quot;Clear error output&quot;&gt;&lt;/a&gt;Clear error output&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs resource cleanup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Check-cluster-status&quot;&gt;&lt;a href=&quot;#Check-cluster-status&quot; class=&quot;headerlink&quot; title=&quot;Check cluster status&quot;&gt;&lt;/a&gt;Check cluster status&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ crm_verify -L -V&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Destroy-cluster&quot;&gt;&lt;a href=&quot;#Destroy-cluster&quot; class=&quot;headerlink&quot; title=&quot;Destroy cluster&quot;&gt;&lt;/a&gt;Destroy cluster&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pcs cluster destroy --all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#or &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl stop pacemaker corosync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -f /var/lib/pacemaker/cib/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Reference&lt;br&gt;&lt;a href=&quot;http://www.unixarena.com/2016/01/rhel-7-pacemaker-define-the-resource-behaviour.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RHEL 7 – Pacemaker&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Reference/s1-multistateresource-HAAR.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;High_Availability_Add-On_Reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Physical-node-OS&quot;&gt;&lt;a href=&quot;#Physical-node-OS&quot; class=&quot;headerlink&quot; title=&quot;Physical node OS&quot;&gt;&lt;/a&gt;Physical node OS&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;CentOS L
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="ha" scheme="http://yoursite.com/tags/ha/"/>
    
      <category term="cluster" scheme="http://yoursite.com/tags/cluster/"/>
    
      <category term="3 nodes" scheme="http://yoursite.com/tags/3-nodes/"/>
    
      <category term="corosync" scheme="http://yoursite.com/tags/corosync/"/>
    
      <category term="pacemaker" scheme="http://yoursite.com/tags/pacemaker/"/>
    
      <category term="kvm" scheme="http://yoursite.com/tags/kvm/"/>
    
      <category term="virtualization" scheme="http://yoursite.com/tags/virtualization/"/>
    
  </entry>
  
  <entry>
    <title>kvm_tips</title>
    <link href="http://yoursite.com/2017/03/09/kvm-tips/"/>
    <id>http://yoursite.com/2017/03/09/kvm-tips/</id>
    <published>2017-03-09T13:40:11.000Z</published>
    <updated>2017-03-09T13:52:57.302Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Install&quot;&gt;&lt;a href=&quot;#Install&quot; class=&quot;headerlink&quot; title=&quot;Install&quot;&gt;&lt;/a&gt;Install&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install qemu-kvm libvirt virt-install bridge-utils&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;KVM-Multipath&quot;&gt;&lt;a href=&quot;#KVM-Multipath&quot; class=&quot;headerlink&quot; title=&quot;KVM Multipath&quot;&gt;&lt;/a&gt;KVM Multipath&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;device&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;disk&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qemu&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;/kvm/fileA.qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dev&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;sda&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;scsi&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;0002&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;drive&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;controller&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;unit&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;device&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;disk&#39;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;driver&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qemu&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;file&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;/kvm/fileA.qcow2&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;dev&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;sdb&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;scsi&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;0002&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;serial&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;drive&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;controller&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bus&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;unit&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;disk&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Snapshot&quot;&gt;&lt;a href=&quot;#Snapshot&quot; class=&quot;headerlink&quot; title=&quot;Snapshot&quot;&gt;&lt;/a&gt;Snapshot&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# list&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 ...  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot -c first /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# recovery&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; 1 /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Delete&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img snapshot &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; 1 /kvm/fileA.qcow2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Create-convert-base-image&quot;&gt;&lt;a href=&quot;#Create-convert-base-image&quot; class=&quot;headerlink&quot; title=&quot;Create convert base image&quot;&gt;&lt;/a&gt;Create convert base image&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qemu-img create &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; qed vm1.qed 80G&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img convert &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; vmdk -O raw centos7.vmdk centos7.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Base images&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img create -b centos6-base.qed &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt;  qed  centos6-tmp.qed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img rebase  -u -b centos-6.qed ./kvm1.qed&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Virt-manager-show-unreadable-code&quot;&gt;&lt;a href=&quot;#Virt-manager-show-unreadable-code&quot; class=&quot;headerlink&quot; title=&quot;Virt-manager show unreadable code&quot;&gt;&lt;/a&gt;Virt-manager show unreadable code&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install dejavu-sans-fonts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# if you need Chinese&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install ghostscript-chinese-zh_CN&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Install&quot;&gt;&lt;a href=&quot;#Install&quot; class=&quot;headerlink&quot; title=&quot;Install&quot;&gt;&lt;/a&gt;Install&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;
    
    </summary>
    
      <category term="virtualization" scheme="http://yoursite.com/categories/virtualization/"/>
    
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="kvm" scheme="http://yoursite.com/tags/kvm/"/>
    
      <category term="virtualization" scheme="http://yoursite.com/tags/virtualization/"/>
    
      <category term="multipath" scheme="http://yoursite.com/tags/multipath/"/>
    
  </entry>
  
  <entry>
    <title>Ext filesystem recovery</title>
    <link href="http://yoursite.com/2017/01/11/Ext_filesystem_recovery/"/>
    <id>http://yoursite.com/2017/01/11/Ext_filesystem_recovery/</id>
    <published>2017-01-11T14:19:55.000Z</published>
    <updated>2017-03-08T12:48:20.611Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Exclude-packages&quot;&gt;&lt;a href=&quot;#Exclude-packages&quot; class=&quot;headerlink&quot; title=&quot;Exclude packages&quot;&gt;&lt;/a&gt;Exclude packages&lt;/h3&gt;&lt;h4 id=&quot;Cli&quot;&gt;&lt;a href=&quot;#Cli&quot; class=&quot;headerlink&quot; title=&quot;Cli&quot;&gt;&lt;/a&gt;Cli&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=1M count=512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mfks.ext3 -b 4096 /dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mount /dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;0..10000&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;-&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;-&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem cylinder groups approximately 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; is 146688 (36 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..      15:       2576..      2591:     16:             merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1:       16..      16:      33424..     33424:      1:       2592: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   2:       17..      17:      33457..     33457:      1:      33425: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   3:       18..      18:      33490..     33490:      1:      33458: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   4:       19..      19:      33523..     33523:      1:      33491: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   5:       20..      20:      33556..     33556:      1:      33524: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   6:       21..      21:      33589..     33589:      1:      33557: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   7:       22..      22:      33622..     33622:      1:      33590: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   8:       23..      23:      33655..     33655:      1:      33623: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   9:       24..      24:      33688..     33688:      1:      33656: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  10:       25..      25:      33721..     33721:      1:      33689: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  11:       26..      26:      33754..     33754:      1:      33722: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  12:       27..      27:      33787..     33787:      1:      33755: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  13:       28..      28:      33820..     33820:      1:      33788: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  14:       29..      29:      33853..     33853:      1:      33821: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  15:       30..      30:      33886..     33886:      1:      33854: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  16:       31..      31:      33919..     33919:      1:      33887: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  17:       32..      32:      33952..     33952:      1:      33920: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  18:       33..      33:      34017..     34017:      1:      33953: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  19:       34..      34:      34082..     34082:      1:      34018: merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  20:       35..      35:      34147..     34147:      1:      34083: last,merged,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs /dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs 1.42.13 (17-May-2015)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs: &lt;span class=&quot;built_in&quot;&gt;stat&lt;/span&gt; &amp;lt;14&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inode: 14   Type: regular    Mode:  0644   Flags: 0x0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Generation: 3749441442    Version: 0x00000000:00000001&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User:     0   Group:     0   Size: 146688&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File ACL: 0    Directory ACL: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Links: 1   Blockcount: 296&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragment:  Address: 0    Number: 0    Size: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ctime: 0x58763a68:1f1d1ee4 -- Wed Jan 11 22:00:08 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; atime: 0x58763a67:e66e9d44 -- Wed Jan 11 22:00:07 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; mtime: 0x58763a68:1f1d1ee4 -- Wed Jan 11 22:00:08 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;crtime: 0x58763a67:e66e9d44 -- Wed Jan 11 22:00:07 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Size of extra inode fields: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BLOCKS:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(0-11):2576-2587, (IND):1538, (12-15):2588-2591, (16):33424, (17):33457, (18):33490, (19):33523, (20):33556, (21):33589, (22):33622, (23):33655, (24):33688, (25):33721, (26):33754, (27):33787, (28):33820, (29):33853, (30):33886, (31):33919, (32):33952, (33):34017, (34):34082, (35):34147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TOTAL: 37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 bs=4K skip=2576 count=$((2591-2576+1))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 ; wc &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 ;tail &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0-0-0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1-1-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2-2-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3-3-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4-4-4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5-5-5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6-6-6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7-7-7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8-8-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9-9-9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4591 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4582-4582-4582&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4583-4583-4583&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4584-4584-4584&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4585-4585-4585&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4586-4586-4586&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4587-4587-4587&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4588-4588-4588&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4589-4589-4589&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4590-4590-4590&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/shm/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-2 bs=4K skip=33424 count=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4096 bytes (4.1 kB, 4.0 KiB) copied, 0.000193943 s, 21.1 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root@homerl-System-Product-Name:/mnt&lt;span class=&quot;comment&quot;&gt;# head test-2 ; wc -l test-2 ;tail test-2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;591-4591-4591&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4592-4592-4592&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4593-4593-4593&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4594-4594-4594&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4595-4595-4595&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4596-4596-4596&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4597-4597-4597&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4598-4598-4598&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4599-4599-4599&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4600-4600-4600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;273 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4855-4855-4855&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4856-4856-4856&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4857-4857-4857&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4858-4858-4858&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4859-4859-4859&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4860-4860-4860&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4861-4861-4861&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4862-4862-4862&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4863-4863-4863&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root@homerl-System-Product-Name:/mnt&lt;span class=&quot;comment&quot;&gt;# dd if=/dev/shm/test of=test-3 bs=4K skip=33457 count=1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4096 bytes (4.1 kB, 4.0 KiB) copied, 0.000193132 s, 21.2 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root@homerl-System-Product-Name:/mnt&lt;span class=&quot;comment&quot;&gt;# head test-3 ; wc -l test-3 ;tail test-3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64-4864-4864&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4865-4865-4865&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4866-4866-4866&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4867-4867-4867&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4868-4868-4868&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4869-4869-4869&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4870-4870-4870&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4871-4871-4871&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4872-4872-4872&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4873-4873-4873&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;273 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5128-5128-5128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5129-5129-5129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5130-5130-5130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5131-5131-5131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5132-5132-5132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5133-5133-5133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5134-5134-5134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5135-5135-5135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5136-5136-5136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;513&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Exclude-packages&quot;&gt;&lt;a href=&quot;#Exclude-packages&quot; class=&quot;headerlink&quot; title=&quot;Exclude packages&quot;&gt;&lt;/a&gt;Exclude packages&lt;/h3&gt;&lt;h4 id=&quot;Cli&quot;&gt;&lt;a h
    
    </summary>
    
      <category term="filesystem" scheme="http://yoursite.com/categories/filesystem/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ext4" scheme="http://yoursite.com/tags/ext4/"/>
    
  </entry>
  
  <entry>
    <title>Learn openzfs</title>
    <link href="http://yoursite.com/2017/01/03/Learn-openzfs/"/>
    <id>http://yoursite.com/2017/01/03/Learn-openzfs/</id>
    <published>2017-01-03T12:16:44.000Z</published>
    <updated>2017-03-08T13:06:08.893Z</updated>
    
    <content type="html">&lt;p&gt;###&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00003fd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000043c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00020010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00021000  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000210b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000213d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000214b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000217d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000217e0  51 c5 e5 d7 3c d9 79 66  b2 6d 81 67 56 bd 92 df  |Q...&amp;lt;.yf.m.gV...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000217f0  f7 c7 03 02 fa fb 73 8c  2b 8c 9c 74 8a 9e a3 b2  |......s.+..t....|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00021800  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0003ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0003ffe0  4a 12 20 c9 20 33 d9 75  a4 0b 73 a6 7f 7e 7f 06  |J. . 3.u..s..~..|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0003fff0  da 88 65 39 62 62 86 01  75 68 a3 f8 be a3 bf fd  |..e9bb..uh......|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00040000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x3fd0=12240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x1ffd0=131024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x20010=131088&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x213d0=136144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x217d0=137168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x3ffd0=262096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x40000=262144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 12240/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11.9531&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 131024/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127.953&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 131088/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128.016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 136144/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132.953&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 137168/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133.953&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 262096/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255.953&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 262144/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/mnt/disk0 of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=1K count=256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/mnt/disk0 of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;1 bs=1K count=256 skip=256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexdump -C &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;1  | grep &lt;span class=&quot;string&quot;&gt;&quot;11 7a 0c b1&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00003fd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000213d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000217d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0003ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexdump -C &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;  | grep &lt;span class=&quot;string&quot;&gt;&quot;11 7a 0c b1&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00003fd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000213d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000217d0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0003ffd0  00 00 00 00 00 00 00 00  11 7a 0c b1 7a da 10 02  |.........z..z...|&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;zbt_magic: ZIO block tail magic number. The value is&lt;br&gt;0x210da7ab10c7a11 (zio-data-bloc-tail).&lt;br&gt;Why reverse order ?&lt;/p&gt;
&lt;h4 id=&quot;Uberblock&quot;&gt;&lt;a href=&quot;#Uberblock&quot; class=&quot;headerlink&quot; title=&quot;Uberblock&quot;&gt;&lt;/a&gt;Uberblock&lt;/h4&gt;&lt;p&gt;ub_magic&lt;br&gt;The uberblock magic number is a 64 bit integer used to identify a device as containing ZFS data.&lt;br&gt;Big Endian: 0x00bab10c&lt;br&gt;Little Endian: 0x0cb1ba00&lt;/p&gt;
&lt;p&gt;0x21000=135168&lt;br&gt;awk ‘BEGIN{print 135168/1024-128}’&lt;br&gt;4&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexdump -C disk0 | grep &lt;span class=&quot;string&quot;&gt;&quot;0c b1 ba 00&quot;&lt;/span&gt; -i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00021000  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00021400  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00061000  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00061400  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ffa1000  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ffa1400  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ffe1000  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3ffe1400  0c b1 ba 00 00 00 00 00  88 13 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;###&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>A copy about ZFS Internals(p1-p5)</title>
    <link href="http://yoursite.com/2016/12/28/Learn-ZFS-Internals-p1-p5/"/>
    <id>http://yoursite.com/2016/12/28/Learn-ZFS-Internals-p1-p5/</id>
    <published>2016-12-28T02:38:38.000Z</published>
    <updated>2016-12-28T13:38:41.143Z</updated>
    
    <content type="html">&lt;h3 id=&quot;ZFS-Internals-It-‘s-dangerous-operations&quot;&gt;&lt;a href=&quot;#ZFS-Internals-It-‘s-dangerous-operations&quot; class=&quot;headerlink&quot; title=&quot;ZFS Internals It ‘s dangerous operations&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.eall.com.br/blog/?p=312&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZFS Internals&lt;/a&gt; It ‘s dangerous operations&lt;/h3&gt;&lt;p&gt;After 8 years, I ‘m try to study openzfs&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=disk0 bs=1M count=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 bytes (105 MB) copied, 0.0582985 s, 1.8 GB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=disk1 bs=1M count=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 bytes (105 MB) copied, 0.0587067 s, 1.8 GB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool create &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0  /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# I don &#39;t know why only 128M could be used. loss a lot of capacity&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool list &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME        SIZE  ALLOC   FREE  EXPANDSZ   FRAG    CAP  DEDUP  HEALTH  ALTROOT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool   160M   244K   160M         -     1%     0%  1.00x  ONLINE  -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zfs get compression &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       PROPERTY     VALUE     SOURCE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool  compression  off       default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zfs get recordsize &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NAME       PROPERTY    VALUE    SOURCE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool  recordsize  128K     default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ touch /&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/empty &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ du -hs /&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/empty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;512	/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/empty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ashift=0 ?&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool  ashift    0       default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; testfile ;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;0..65535&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; testfile; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -li&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7 -rw-r--r-- 1 root root 382106 12月 28 12:45 testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -dddddddd &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dataset &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool [ZPL], ID 21, cr_txg 1, 404K, 7 objects, rootbp DVA[0]=&amp;lt;0:16600:200&amp;gt; DVA[1]=&amp;lt;1:89200:200&amp;gt; [L0 DMU objset] fletcher4 lz4 LE contiguous unique double size=800L/200P birth=77L/77P fill=7 cksum=b706a1be7:479be3ec2c2:e63cf120702c:1fa949c8882cfd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Object  lvl   iblk   dblk  dsize  lsize   %full  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         7    2    16K   128K   385K   384K  100.00  ZFS plain file (K=inherit) (Z=inherit)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        168   bonus  System attributes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode flags: USED_BYTES USERUSED_ACCOUNTED &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode maxblkid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	path	/testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	uid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	atime	Wed Dec 28 12:45:10 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mtime	Wed Dec 28 12:45:12 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ctime	Wed Dec 28 12:45:12 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	crtime	Wed Dec 28 12:45:10 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gen	77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mode	100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	size	382106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	parent	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	links	1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	pflags	40800000004&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Indirect blocks:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0 L1  0:2400:200 1:2400:200 4000L/200P F=3 B=77/77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0  L0 1:28000:20000 20000L/20000P F=1 B=77/77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           20000  L0 1:48000:20000 20000L/20000P F=1 B=77/77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           40000  L0 1:68000:20000 20000L/20000P F=1 B=77/77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		segment [0000000000000000, 0000000000060000) size  384K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;20000)&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131072&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;0 0 L1  0:2400:200 1:2400:200 4000L/200P F=3 B=77/77&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L1 means two levels of indirection (number of block pointers which need to be traversed to arrive at this data)&lt;/li&gt;
&lt;li&gt;0:2400:200 = disk0 , first raidz volume ?&lt;/li&gt;
&lt;li&gt;the offset from the begining of the disk (2400)&lt;/li&gt;
&lt;li&gt;and the size of the block (0x200 = 512 bytes)&lt;/li&gt;
&lt;li&gt;0:2400 is the Data virtual Address 1 (dva1, Data virtual address )&lt;/li&gt;
&lt;li&gt;F=3  is the fill count, and describes the number of non-zero block pointers under this block pointer&lt;/li&gt;
&lt;li&gt;B=77/77 is the birth time, what is the same as the txg number, or some body said it ‘s a transaction number ?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;0  L0 1:28000:20000 20000L/20000P F=1 B=77/77&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L0 is the block level that holds data (we can have up to six levels)&lt;/li&gt;
&lt;li&gt;the fill count has a little different interpretation. Here the F= means if the block has data or not (0 or 1), what is different from the levels 1 and above, where it means “how many” non-zero block pointers under this block pointer. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Output first 128K of our file&lt;br&gt;16 bytes per line&lt;/p&gt;
&lt;p&gt;-R poolname vdev:offset:size[:flags]&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;20000)&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131072&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 1:28000:20000 | head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1:28000:20000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          0 1 2 3 4 5 6 7   8 9 a b c d e f  0123456789abcdef&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000000:  0a330a320a310a30  0a370a360a350a34  0.1.2.3.4.5.6.7.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000010:  310a30310a390a38  0a33310a32310a31  8.9.10.11.12.13.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000020:  36310a35310a3431  310a38310a37310a  14.15.16.17.18.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000030:  0a31320a30320a39  34320a33320a3232  9.20.21.22.23.24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000040:  320a36320a35320a  0a39320a38320a37  .25.26.27.28.29.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000050:  32330a31330a3033  330a34330a33330a  30.31.32.33.34.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;000060:  0a37330a36330a35  30340a39330a3833  5.36.37.38.39.40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; 1:28000:20000:r | head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 1:28000:20000:r &amp;gt; file1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Found vdev: /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 1:48000:20000:r &amp;gt; file2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Found vdev: /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 1:68000:20000:r &amp;gt; file3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Found vdev: /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -lh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 128K 12月 28 12:51 file1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 128K 12月 28 12:53 file2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 128K 12月 28 12:53 file3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 374K 12月 28 12:45 testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 file1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 file1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23695&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23696&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 file2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23697&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23698&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 file2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45541&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45$ head -n 2 file3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;542&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45543&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 file3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# why output single line ?&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 file3 | hexdump -C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00000000  36 35 35 33 35 0a 00 00  00 00 00 00 00 00 00 00  |65535...........|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00002b60  00 00 00 00 00 00 00 00  00 00 00 00              |............|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00002b6c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 testfile | hexdump -C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00000000  36 35 35 33 34 0a 36 35  35 33 35 0a              |65534.65535.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0000000c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#delete zero last line in file3, you could get same md5sum&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ md5sum  testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43a1b3e2e25c9410daefdaa1d78678bf  testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat file1 file2 file3 | md5sum &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43a1b3e2e25c9410daefdaa1d78678bf  -&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Test-copy-on-write&quot;&gt;&lt;a href=&quot;#Test-copy-on-write&quot; class=&quot;headerlink&quot; title=&quot;Test copy on write&quot;&gt;&lt;/a&gt;Test copy on write&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cp testfile testfile-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -i testfile-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22 testfile-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -dddddddd &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dataset &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool [ZPL], ID 21, cr_txg 1, 1.14M, 11 objects, rootbp DVA[0]=&amp;lt;0:8e00:200&amp;gt; DVA[1]=&amp;lt;1:14e00:200&amp;gt; [L0 DMU objset] fletcher4 lz4 LE contiguous unique double size=800L/200P birth=631L/631P fill=11 cksum=b211ccbf0:3ff67b6c728:bddd89c4f0bb:183789ced23226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Object  lvl   iblk   dblk  dsize  lsize   %full  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        22    2    16K   128K   385K   384K  100.00  ZFS plain file (K=inherit) (Z=inherit)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        168   bonus  System attributes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode flags: USED_BYTES USERUSED_ACCOUNTED &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode maxblkid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	path	/testfile-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	uid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	atime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mtime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ctime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	crtime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gen	631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mode	100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	size	382106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	parent	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	links	1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	pflags	40800000004&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Indirect blocks:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0 L1  0:2600:200 1:2600:200 4000L/200P F=3 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0  L0 1:adc00:20000 20000L/20000P F=1 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           20000  L0 1:cdc00:20000 20000L/20000P F=1 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           40000  L0 1:edc00:20000 20000L/20000P F=1 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		segment [0000000000000000, 0000000000060000) size  384K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; haha &amp;gt;&amp;gt; testfile-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -dddddddd &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dataset &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool [ZPL], ID 21, cr_txg 1, 1.14M, 11 objects, rootbp DVA[0]=&amp;lt;0:5e00:200&amp;gt; DVA[1]=&amp;lt;1:6a00:200&amp;gt; [L0 DMU objset] fletcher4 lz4 LE contiguous unique double size=800L/200P birth=637L/637P fill=11 cksum=bcaba3f58:44283babf90:cb3dd715909e:1a01d96e52&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt;6b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Object  lvl   iblk   dblk  dsize  lsize   %full  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        22    2    16K   128K   385K   384K  100.00  ZFS plain file (K=inherit) (Z=inherit)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        168   bonus  System attributes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode flags: USED_BYTES USERUSED_ACCOUNTED &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode maxblkid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	path	/testfile-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	uid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	atime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mtime	Wed Dec 28 13:31:49 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ctime	Wed Dec 28 13:31:49 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	crtime	Wed Dec 28 13:31:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gen	631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mode	100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	size	382111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	parent	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	links	1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	pflags	40800000004&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Indirect blocks:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0 L1  0:5800:200 1:15400:200 4000L/200P F=3 B=637/637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0  L0 1:adc00:20000 20000L/20000P F=1 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           20000  L0 1:cdc00:20000 20000L/20000P F=1 B=631/631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           40000  L0 0:7ca00:20000 20000L/20000P F=1 B=637/637 &lt;span class=&quot;comment&quot;&gt;### copy on write&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		segment [0000000000000000, 0000000000060000) size  384K&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Find-the-physical-address&quot;&gt;&lt;a href=&quot;#Find-the-physical-address&quot; class=&quot;headerlink&quot; title=&quot;Find the physical address&quot;&gt;&lt;/a&gt;Find the physical address&lt;/h3&gt;&lt;p&gt;Because there are some different with solaris zfs, it ‘s not 4MiB in header.&lt;br&gt;I dd first 5MiB data from disk0.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0  of=/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=1M count=5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Found the data in disk0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump -C /tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; | more&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00418&lt;span class=&quot;built_in&quot;&gt;fc&lt;/span&gt;0  13 00 00 00 00 00 00 80  00 00 00 00 00 00 2e 66  |...............f|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00418fd0  69 6c 65 33 2e 73 77 70  00 00 00 00 00 00 00 00  |ile3.swp........|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00418fe0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00419000  30 0a 31 0a 32 0a 33 0a  34 0a 35 0a 36 0a 37 0a  |0.1.2.3.4.5.6.7.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00419010  38 0a 39 0a 31 30 0a 31  31 0a 31 32 0a 31 33 0a  |8.9.10.11.12.13.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00419020  31 34 0a 31 35 0a 31 36  0a 31 37 0a 31 38 0a 31  |14.15.16.17.18.1|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00419030  39 0a 32 30 0a 32 31 0a  32 32 0a 32 33 0a 32 34  |9.20.21.22.23.24|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00419040  0a 32 35 0a 32 36 0a 32  37 0a 32 38 0a 32 39 0a  |.25.26.27.28.29.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;419000)&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4296704&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ $ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;419000)/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;28000)&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163840&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x&quot;20000)&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131072&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print (4296704-163840)/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4036&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0 of=/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 bs=1k skip=4196 count=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 /tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;which means the offset from the begining of the physical vdev (starting after the vdev labels, plus the boot block), 4036KiB total in openzfs on linux&lt;br&gt;4132864 = 3f100 ?&lt;/p&gt;
&lt;h3 id=&quot;Compare-with-ext3&quot;&gt;&lt;a href=&quot;#Compare-with-ext3&quot; class=&quot;headerlink&quot; title=&quot;Compare with ext3&quot;&gt;&lt;/a&gt;Compare with ext3&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=disk2 bs=1M count=100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 bytes (105 MB) copied, 0.0600031 s, 1.7 GB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mkfs.ext3 -b 4096 /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mke2fs 1.41.12 (17-May-2010)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 is not a block special device.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Proceed anyway? (y,n) y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem label=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OS &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Block size=4096 (&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;=2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragment size=4096 (&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;=2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Stride=0 blocks, Stripe width=0 blocks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25600 inodes, 25600 blocks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1280 blocks (5.00%) reserved &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; the super user&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;First data block=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Maximum filesystem blocks=29360128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 block group&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32768 blocks per group, 32768 fragments per group&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25600 inodes per group&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Writing inode tables: &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;                            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Creating journal (1024 blocks): &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Writing superblocks and filesystem accounting information: &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This filesystem will be automatically checked every 24 mounts or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180 days, whichever comes first.  Use tune2fs -c or -i to override.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mount disk2 /mnt -o loop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ df -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem        Size  Used Avail Use% Mounted on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2   97M  4.5M   88M   5% /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cp &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; /&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/testfile ./&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v /mnt/testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem cylinder groups is approximately 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of /mnt/testfile is 382109 (94 blocks, blocksize 4096)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext logical physical expected length flags&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0       0     1841              12 merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1      12     1854     1853     82 merged,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/mnt/testfile: 2 extents found, perfection would be 1 extent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ umount /mnt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ debugfs /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 1.41.12 (17-May-2010)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs:  stats&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem volume name:   &amp;lt;none&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last mounted on:          &amp;lt;not available&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem UUID:          d6f9c3d7&lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt;56b-433d-9830-69b15553029b&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem magic number:  0xEF53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem revision &lt;span class=&quot;comment&quot;&gt;#:    1 (dynamic)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem features:      has_journal ext_attr resize_inode dir_index filetype sparse_super large_file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem flags:         signed_directory_&lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Default mount options:    (none)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem state:         clean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Errors behavior:          Continue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem OS &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;:       Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inode count:              25600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Block count:              25600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reserved block count:     1280&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Free blocks:              23664&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Free inodes:              25588&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;First block:              0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Block size:               4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragment size:            4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reserved GDT blocks:      6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Blocks per group:         32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragments per group:      32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inodes per group:         25600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inode blocks per group:   800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem created:       Wed Dec 28 16:03:47 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last mount time:          Wed Dec 28 16:04:10 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last write time:          Wed Dec 28 16:04:52 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mount count:              1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Maximum mount count:      24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last checked:             Wed Dec 28 16:03:47 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Check interval:           15552000 (6 months)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Next check after:         Mon Jun 26 16:03:47 2017&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reserved blocks uid:      0 (user root)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reserved blocks gid:      0 (group root)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;First inode:              11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inode size:	          128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Journal inode:            8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Default directory &lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt;:   half_md4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Directory Hash Seed:      58b4c828-2e74-4add-91bb-4007efd5187f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Journal backup:           inode blocks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Directories:              2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Group  0: block bitmap at 8, inode bitmap at 9, inode table at 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           23664 free blocks, 25588 free inodes, 2 used directories&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs:  ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 2  (12) .    2  (12) ..    11  (20) lost+found    12  (4052) testfile  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;debugfs:  show_inode_info testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Inode: 12   Type: regular    Mode:  0644   Flags: 0x0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Generation: 933995507    Version: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User:     0   Group:     0   Size: 382109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File ACL: 0    Directory ACL: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Links: 1   Blockcount: 760&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Fragment:  Address: 0    Number: 0    Size: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ctime: 0x58637206 -- Wed Dec 28 16:04:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;atime: 0x58637206 -- Wed Dec 28 16:04:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mtime: 0x58637206 -- Wed Dec 28 16:04:22 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BLOCKS:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(0-11):1841-1852, (IND):1853, (12-93):1854-1935&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TOTAL: 95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 of=/tmp/file-1 bs=4K count=12 skip=1841&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 /tmp/file-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 /tmp/file-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10042&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1004&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 of=/tmp/file-2 bs=4K count=82 skip=1854&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 2 /tmp/file-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10044&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 2 /tmp/file-2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail -n 3 /tmp/file-2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12 &lt;span class=&quot;comment&quot;&gt;# I have echo 12 &amp;gt;&amp;gt; to testfile.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# delete zero line(last line) in file2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /tmp/file-1 /tmp/file-2 | md5sum &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48688f1bef04b9b59905409e9226ba65  -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ md5sum /mnt/testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48688f1bef04b9b59905409e9226ba65  /mnt/testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Modify file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v /mnt/testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem cylinder groups is approximately 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of /mnt/testfile is 382109 (94 blocks, blocksize 4096)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext logical physical expected length flags&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0       0     4104              12 merged&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1      12     4117     4116     82 merged,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/mnt/testfile: 2 extents found, perfection would be 1 extent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 of=/tmp/disk-2-1 bs=4k count=4105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4105+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4105+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16814080 bytes (17 MB) copied, 0.161878 s, 104 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You have new mail &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/mail/root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail /tmp/disk-2-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1032&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1033&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1034&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1035&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1036&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1037&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1038&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1039&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1040&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;span class=&quot;variable&quot;&gt;$dd&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 of=/tmp/disk-2-2 bs=4k skip=4105 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21495+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21495+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88043520 bytes (88 MB) copied, 0.66258 s, 133 MB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head /tmp/disk-2-2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;041&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1042&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1043&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1044&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1045&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1046&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1047&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1049&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1050&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1111111111 &amp;gt;&amp;gt; /tmp/disk-2-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /tmp/disk-2-1 &amp;gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ du -hs /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17M	/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /tmp/disk-2-2 &amp;gt;&amp;gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ du -hs /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100M	/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ fsck /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fsck from util-linux-ng 2.17.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e2fsck 1.41.12 (17-May-2010)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2: clean, 12/25600 files, 1936/25600 blocks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ mount /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk2 /mnt -o loop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 1042 /mnt/testfile | tail -n 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1040&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11111111111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# got it , file has changed.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Same-with-openzfs&quot;&gt;&lt;a href=&quot;#Same-with-openzfs&quot; class=&quot;headerlink&quot; title=&quot;Same with openzfs&quot;&gt;&lt;/a&gt;Same with openzfs&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-bash-4.1&lt;span class=&quot;comment&quot;&gt;# zpool destroy test-pool&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool create &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool create &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool -o ashift=9 /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; testfile ;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;0..65535&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; testfile; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f6a0  ff ff ff a6 50 00 00 00  00 00 00 00 00 00 00 00  |....P...........|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f6b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f800  30 0a 31 0a 32 0a 33 0a  34 0a 35 0a 36 0a 37 0a  |0.1.2.3.4.5.6.7.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f810  38 0a 39 0a 31 30 0a 31  31 0a 31 32 0a 31 33 0a  |8.9.10.11.12.13.|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f820  31 34 0a 31 35 0a 31 36  0a 31 37 0a 31 38 0a 31  |14.15.16.17.18.1|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0040f830  39 0a 32 30 0a 32 31 0a  32 32 0a 32 33 0a 32 34  |9.20.21.22.23.24|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -li /&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/testfile &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7 -rw-r--r-- 1 root root 382106 12月 28 17:31 /&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -dddddd &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool/ 7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dataset &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool [ZPL], ID 21, cr_txg 1, 404K, 7 objects, rootbp DVA[0]=&amp;lt;0:71c00:200&amp;gt; DVA[1]=&amp;lt;0:71e00:200&amp;gt; [L0 DMU objset] fletcher4 lz4 LE contiguous unique double size=800L/200P birth=7L/7P fill=7 cksum=d25a82905:4fd05e01a15:f9b25d4668de:21890ed460fd11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Object  lvl   iblk   dblk  dsize  lsize   %full  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         7    2    16K   128K   385K   384K  100.00  ZFS plain file (K=inherit) (Z=inherit)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        168   bonus  System attributes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode flags: USED_BYTES USERUSED_ACCOUNTED &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	dnode maxblkid: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	path	/testfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	uid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gid     0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	atime	Wed Dec 28 17:31:11 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mtime	Wed Dec 28 17:31:13 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ctime	Wed Dec 28 17:31:13 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	crtime	Wed Dec 28 17:31:11 2016&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gen	7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mode	100644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	size	382106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	parent	4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	links	1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	pflags	40800000004&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Indirect blocks:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0 L1  0:4800:200 0:4a00:200 4000L/200P F=3 B=7/7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               0  L0 0:f800:20000 20000L/20000P F=1 B=7/7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           20000  L0 0:2f800:20000 20000L/20000P F=1 B=7/7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           40000  L0 0:4f800:20000 20000L/20000P F=1 B=7/7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		segment [0000000000000000, 0000000000060000) size  384K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ 40f800=4257792&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ f800=63488&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print (4257792-63488)/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4096&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Header is 4MiB, and offset 63488 begin to write real data&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print strtonum(&quot;0x40f800&quot;)/1024&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb -R &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool 0:f800:20000:r &amp;gt; /tmp/file1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-bash-4.1&lt;span class=&quot;comment&quot;&gt;# head /tmp/file1 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# modify /tmp/file1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 4 /tmp/file1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0 of=/tmp/disk0-1 bs=1k count=4158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0 of=/tmp/disk0-2 bs=1k skip=4158 count=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0 of=/tmp/disk0-3 bs=1k skip=4159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head /tmp/disk0-2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-bash-4.1&lt;span class=&quot;comment&quot;&gt;# tail /tmp/disk0-2 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;274&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;276&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;278&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;279&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;280&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;281&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;282&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /tmp/disk0-*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root   4257792 12月 28 19:59 /tmp/disk0-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root      1024 12月 28 19:59 /tmp/disk0-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-rw-r--r-- 1 root root 100598784 12月 28 20:03 /tmp/disk0-3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# modify disk0-2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ vi /tmp/disk0-2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-bash-4.1&lt;span class=&quot;comment&quot;&gt;# head -n 2 /tmp/disk0-2 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cp /tmp/disk0-1 /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /tmp/disk0-2 &amp;gt;&amp;gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /tmp/disk0-3 &amp;gt;&amp;gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool import &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/ &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cannot import &lt;span class=&quot;string&quot;&gt;&#39;test-pool&#39;&lt;/span&gt;: I/O error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Destroy and re-create the pool from&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	a backup source.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zdb &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;zdb &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LABEL 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    version: 5000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name: &lt;span class=&quot;string&quot;&gt;&#39;test-pool&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    state: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    txg: 1277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pool_guid: 2913619627256210242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    errata: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hostname: &lt;span class=&quot;string&quot;&gt;&#39;nas-57-11.local&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    top_guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vdev_children: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vdev_tree:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        id: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        path: &lt;span class=&quot;string&quot;&gt;&#39;/tank/test/disk0&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        metaslab_array: 35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        metaslab_&lt;span class=&quot;built_in&quot;&gt;shift&lt;/span&gt;: 24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ashift: 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asize: 100139008&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        is_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        create_txg: 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    features_&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;_&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        com.delphix:hole_birth&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        com.delphix:embedded_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LABEL 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    version: 5000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name: &lt;span class=&quot;string&quot;&gt;&#39;test-pool&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    state: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    txg: 1277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pool_guid: 2913619627256210242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    errata: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hostname: &lt;span class=&quot;string&quot;&gt;&#39;nas-57-11.local&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    top_guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vdev_children: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    vdev_tree:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        id: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        guid: 14729225611287826913&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        path: &lt;span class=&quot;string&quot;&gt;&#39;/tank/test/disk0&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        metaslab_array: 35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        metaslab_&lt;span class=&quot;built_in&quot;&gt;shift&lt;/span&gt;: 24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ashift: 9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        asize: 100139008&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        is_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        create_txg: 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    features_&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;_&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        com.delphix:hole_birth&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        com.delphix:embedded_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LABEL 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;failed to unpack label 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LABEL 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;failed to unpack label 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ zpool import -N -o &lt;span class=&quot;built_in&quot;&gt;readonly&lt;/span&gt;=on &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/ -F -T 1277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   pool: &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     id: 2913619627256210242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  state: FAULTED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; status: The pool metadata is corrupted.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; action: The pool cannot be imported due to damaged devices or data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	The pool may be active on another system, but can be imported using&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	the &lt;span class=&quot;string&quot;&gt;&#39;-f&#39;&lt;/span&gt; flag.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   see: http://zfsonlinux.org/msg/ZFS-8000-72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; config:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-pool           FAULTED  corrupted data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	  /tank/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/disk0  ONLINE&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Raidz-size&quot;&gt;&lt;a href=&quot;#Raidz-size&quot; class=&quot;headerlink&quot; title=&quot;Raidz size&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://blog.gjpvanwesten.nl/2014/08/part-iv-how-much-space-do-you-lose-with.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Raidz size&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 128/7&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18.2857&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 18.2857/20&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.914285&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk &lt;span class=&quot;string&quot;&gt;&#39;BEGIN&amp;#123;print 18.2857/18.5&amp;#125;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.988416&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ZFS-Internals-It-‘s-dangerous-operations&quot;&gt;&lt;a href=&quot;#ZFS-Internals-It-‘s-dangerous-operations&quot; class=&quot;headerlink&quot; title=&quot;ZFS Internal
    
    </summary>
    
      <category term="filesystem" scheme="http://yoursite.com/categories/filesystem/"/>
    
    
      <category term="zfs" scheme="http://yoursite.com/tags/zfs/"/>
    
  </entry>
  
  <entry>
    <title>blk-mq with SAS SSD</title>
    <link href="http://yoursite.com/2016/12/23/blk-mq-with-SAS-SSD/"/>
    <id>http://yoursite.com/2016/12/23/blk-mq-with-SAS-SSD/</id>
    <published>2016-12-23T13:19:55.000Z</published>
    <updated>2016-12-23T13:57:03.785Z</updated>
    
    <content type="html">&lt;h3 id=&quot;blk-mq-in-RHEL-7-2&quot;&gt;&lt;a href=&quot;#blk-mq-in-RHEL-7-2&quot; class=&quot;headerlink&quot; title=&quot;blk-mq in RHEL 7.2&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/7.2_Release_Notes/storage.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;blk-mq in RHEL 7.2&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;It can improve performance by allowing certain device drivers to map I/O requests to multiple hardware or software queues.&lt;br&gt;If the dm_mod.use_blk_mq=y kernel option is specified. The default value is n (disabled).&lt;br&gt;It may be beneficial to set dm_mod.use_blk_mq=y if the underlying SCSI devices are also using blk-mq, as doing so reduces locking overhead at the DM layer.&lt;br&gt;To determine whether DM multipath is using blk-mq on a system, cat the file /sys/block/dm-X/dm/use_blk_mq, where dm-X is replaced by the DM multipath device of interest. This file is read-only and reflects what the global value in /sys/module/dm_mod/parameters/use_blk_mq was at the time the request-based DM multipath device was created.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://events.linuxfoundation.org/sites/events/files/slides/scsi.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;High Performance Storage with blk-mq and scsi-mq&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://events.linuxfoundation.org/sites/events/files/slides/Vault%20-%20scsi-mq%20v2.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Increasing SCSI LLD Driver Performance by Using the SCSI Multiqueue Approach&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.thomas-krenn.com/en/wiki/Linux_Multi-Queue_Block_IO_Queueing_Mechanism_(blk-mq&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Linux Multi-Queue Block IO Queueing Mechanism&lt;/a&gt;)&lt;br&gt;&lt;a href=&quot;http://chuansong.me/n/362178648541&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;blk-mq SCSI performance&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;blk-mq-in-RHEL-7-2&quot;&gt;&lt;a href=&quot;#blk-mq-in-RHEL-7-2&quot; class=&quot;headerlink&quot; title=&quot;blk-mq in RHEL 7.2&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://access.redhat.c
    
    </summary>
    
      <category term="Linux" scheme="http://yoursite.com/categories/Linux/"/>
    
    
      <category term="blk-mq" scheme="http://yoursite.com/tags/blk-mq/"/>
    
      <category term="queue" scheme="http://yoursite.com/tags/queue/"/>
    
  </entry>
  
  <entry>
    <title>Hardware index</title>
    <link href="http://yoursite.com/2016/12/22/Hardware-index/"/>
    <id>http://yoursite.com/2016/12/22/Hardware-index/</id>
    <published>2016-12-22T09:39:27.000Z</published>
    <updated>2017-01-13T02:05:57.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;DAS&quot;&gt;&lt;a href=&quot;#DAS&quot; class=&quot;headerlink&quot; title=&quot;DAS&quot;&gt;&lt;/a&gt;DAS&lt;/h3&gt;&lt;h4 id=&quot;Dual-nodes-redundance-SAS-link&quot;&gt;&lt;a href=&quot;#Dual-nodes-redundance-SAS-link&quot; class=&quot;headerlink&quot; title=&quot;Dual nodes, redundance SAS link&quot;&gt;&lt;/a&gt;Dual nodes, redundance SAS link&lt;/h4&gt;&lt;h5 id=&quot;2U&quot;&gt;&lt;a href=&quot;#2U&quot; class=&quot;headerlink&quot; title=&quot;2U&quot;&gt;&lt;/a&gt;2U&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://www.supermicro.com/solutions/Lustre.cfm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SSG-927R-E2CJB&lt;/a&gt;, Lustre+openzfs 2U 24 2.5” Drive JBOD with shared redundant expander&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;io&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2028R-DE2CR24L&lt;/td&gt;
&lt;td&gt;2x8&lt;/td&gt;
&lt;td&gt;2x3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;X540+LSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SG-2028R-DE2CR24&lt;/td&gt;
&lt;td&gt;2x8&lt;/td&gt;
&lt;td&gt;2x3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;X540+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Inventec U90G3&lt;/td&gt;
&lt;td&gt;16x2&lt;/td&gt;
&lt;td&gt;2x3&lt;/td&gt;
&lt;td&gt;2x2&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;70&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;dual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HPE 4520&lt;/td&gt;
&lt;td&gt;16x2&lt;/td&gt;
&lt;td&gt;2x4&lt;/td&gt;
&lt;td&gt;2x2&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;46&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;dual&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h6 id=&quot;Supermicro-2028R-DE2CR24L&quot;&gt;&lt;a href=&quot;#Supermicro-2028R-DE2CR24L&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 2028R-DE2CR24L&quot;&gt;&lt;/a&gt;Supermicro 2028R-DE2CR24L&lt;/h6&gt;&lt;p&gt;&lt;img src=&quot;https://www.supermicro.com/a_images/products/SuperServer/2U/SSG-2028R-DE2CR24L.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;4U-SBB&quot;&gt;&lt;a href=&quot;#4U-SBB&quot; class=&quot;headerlink&quot; title=&quot;4U (SBB)&quot;&gt;&lt;/a&gt;4U (SBB)&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;io&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;6048R-DE2CR24L&lt;/td&gt;
&lt;td&gt;8x2&lt;/td&gt;
&lt;td&gt;2x3&lt;/td&gt;
&lt;td&gt;2x2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;dual+LSI3008&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;Single-node&quot;&gt;&lt;a href=&quot;#Single-node&quot; class=&quot;headerlink&quot; title=&quot;Single node&quot;&gt;&lt;/a&gt;Single node&lt;/h4&gt;&lt;h5 id=&quot;1U&quot;&gt;&lt;a href=&quot;#1U&quot; class=&quot;headerlink&quot; title=&quot;1U&quot;&gt;&lt;/a&gt;1U&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;io&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;6017R-73HDP+&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2(os)&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;c602&lt;/td&gt;
&lt;td&gt;dual&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1028R-WTR&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;dual+Mezzanine HAB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS-1028U-E1CRTP+&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;10GbE SFP and 1xinternal PCIE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dell R630&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;dual+Daughter card&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h6 id=&quot;Supermicro-6017R-73HDP&quot;&gt;&lt;a href=&quot;#Supermicro-6017R-73HDP&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 6017R-73HDP+&quot;&gt;&lt;/a&gt;Supermicro 6017R-73HDP+&lt;/h6&gt;&lt;p&gt;&lt;img src=&quot;http://www.supermicro.com/a_images/products/SuperServer/1U/SYS-6017R-73THDP__Spec.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;2U-1&quot;&gt;&lt;a href=&quot;#2U-1&quot; class=&quot;headerlink&quot; title=&quot;2U&quot;&gt;&lt;/a&gt;2U&lt;/h5&gt;&lt;p&gt;6xPCI-Express 3+1xPCI-Express 2.0 x4 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;6028R-E1CR12N&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;6xPCI-Express 3&lt;/li&gt;
&lt;li&gt;1xPCI-Express 2&lt;/li&gt;
&lt;li&gt;Lustre OSS&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;6028R-E1CR24N&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;24 x 3.5 inch&lt;/li&gt;
&lt;li&gt;2 x 2.5 inch&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;io&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;6028R-E1CR12N&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;6+1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;4x10GbE BT+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6028R-E1CR16T&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;2x10GbE+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6028R-E1CR24N&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;SIOM flexible+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6028R-E1CR12L&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;2xX540+LSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2028R-E1CR48N&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;48+2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;SIOM flexible+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2028R-E1CR48L&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;48+2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;SIOM flexible+LSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dell R730xd&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;c610&lt;/td&gt;
&lt;td&gt;daughter card+LSI 3008/3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP DL180G9&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;c610&lt;/td&gt;
&lt;td&gt;flexible card&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP 4200 G9&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;54&lt;/td&gt;
&lt;td&gt;28&lt;/td&gt;
&lt;td&gt;c610&lt;/td&gt;
&lt;td&gt;flexible card&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h5 id=&quot;Supermicro-6028R-E1CR12N-lustre-OSS&quot;&gt;&lt;a href=&quot;#Supermicro-6028R-E1CR12N-lustre-OSS&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 6028R-E1CR12N (lustre OSS)&quot;&gt;&lt;/a&gt;Supermicro 6028R-E1CR12N (lustre OSS)&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://www.supermicro.com/a_images/products/superserver/2U/SSG-6028R-E1CR12N.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;Supermicro-6028R-E1CR16T&quot;&gt;&lt;a href=&quot;#Supermicro-6028R-E1CR16T&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 6028R-E1CR16T&quot;&gt;&lt;/a&gt;Supermicro 6028R-E1CR16T&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://www.supermicro.com/a_images/products/superserver/2U/SSG-6028R-E1CR16T.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;Supermicro-6028R-E1CR24N&quot;&gt;&lt;a href=&quot;#Supermicro-6028R-E1CR24N&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 6028R-E1CR24N&quot;&gt;&lt;/a&gt;Supermicro 6028R-E1CR24N&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;http://www.supermicro.com/a_images/products/superserver/2U/SSG-6028R-E1CR24N.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;4U&quot;&gt;&lt;a href=&quot;#4U&quot; class=&quot;headerlink&quot; title=&quot;4U&quot;&gt;&lt;/a&gt;4U&lt;/h5&gt;&lt;h6 id=&quot;2-socket&quot;&gt;&lt;a href=&quot;#2-socket&quot; class=&quot;headerlink&quot; title=&quot;2 socket&quot;&gt;&lt;/a&gt;2 socket&lt;/h6&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;IO&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;6048R-E1CR36L&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;4+2(2.0)&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;36&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;4xi350+LSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6048R-E1CR36L&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;36&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;x540+LSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6048R-E1CR36H&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;36&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;x540+LSI 3108&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6048R-E1CR60L&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;1xLSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6048R-E1CR90L&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;c612&lt;/td&gt;
&lt;td&gt;4x10GbE+2xLSI 3008&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h6 id=&quot;4-socket&quot;&gt;&lt;a href=&quot;#4-socket&quot; class=&quot;headerlink&quot; title=&quot;4 socket&quot;&gt;&lt;/a&gt;4 socket&lt;/h6&gt;&lt;p&gt;8048B-TR4FT 96 x 128G&lt;br&gt;8048B-TRFT 96 x 64G&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;MEM&lt;/th&gt;
&lt;th&gt;PCIE&lt;/th&gt;
&lt;th&gt;socks&lt;/th&gt;
&lt;th&gt;2.5HDD&lt;/th&gt;
&lt;th&gt;3.5HDD&lt;/th&gt;
&lt;th&gt;chip&lt;/th&gt;
&lt;th&gt;IO&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;8048B-TRFT&lt;/td&gt;
&lt;td&gt;96&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;AHCI 2xSATA3&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;td&gt;c602J&lt;/td&gt;
&lt;td&gt;x540&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4048B-TRFT&lt;/td&gt;
&lt;td&gt;96&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;48 +AHCI 2xSATA3&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;c602J&lt;/td&gt;
&lt;td&gt;x540&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h5 id=&quot;Supermicro-8048B-TRFT&quot;&gt;&lt;a href=&quot;#Supermicro-8048B-TRFT&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 8048B-TRFT&quot;&gt;&lt;/a&gt;Supermicro 8048B-TRFT&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://www.supermicro.com/a_images/products/SuperServer/4U/SYS-8048B-TRFT.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;AHCI-SATA-DOM-x10-6Gb-SATA3&quot;&gt;&lt;a href=&quot;#AHCI-SATA-DOM-x10-6Gb-SATA3&quot; class=&quot;headerlink&quot; title=&quot;AHCI SATA DOM x10 6Gb SATA3&quot;&gt;&lt;/a&gt;AHCI SATA DOM x10 6Gb SATA3&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://www.supermicro.com/a_images/products/nfo/SATADOM_x10_connect.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;JBOD&quot;&gt;&lt;a href=&quot;#JBOD&quot; class=&quot;headerlink&quot; title=&quot;JBOD&quot;&gt;&lt;/a&gt;JBOD&lt;/h3&gt;&lt;p&gt;SSG-927R-E2CJB is a 2U JBOD&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;H&lt;/th&gt;
&lt;th&gt;H(mm)&lt;/th&gt;
&lt;th&gt;W&lt;/th&gt;
&lt;th&gt;Depth&lt;/th&gt;
&lt;th&gt;Fans&lt;/th&gt;
&lt;th&gt;3.5 slot&lt;/th&gt;
&lt;th&gt;power(w)&lt;/th&gt;
&lt;th&gt;Weight(max)&lt;/th&gt;
&lt;th&gt;Interface&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;946ED-R2KJBOD&lt;/td&gt;
&lt;td&gt;4U&lt;/td&gt;
&lt;td&gt;178&lt;/td&gt;
&lt;td&gt;447&lt;/td&gt;
&lt;td&gt;906&lt;/td&gt;
&lt;td&gt;4+1&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;4x1000&lt;/td&gt;
&lt;td&gt;102.06kg&lt;/td&gt;
&lt;td&gt;SAS3 SFF-8644&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST JBOD 4U60&lt;/td&gt;
&lt;td&gt;4U&lt;/td&gt;
&lt;td&gt;175&lt;/td&gt;
&lt;td&gt;424&lt;/td&gt;
&lt;td&gt;938&lt;/td&gt;
&lt;td&gt;N+1&lt;/td&gt;
&lt;td&gt;60&lt;/td&gt;
&lt;td&gt;2x1650&lt;/td&gt;
&lt;td&gt;89.81 kg&lt;/td&gt;
&lt;td&gt;SAS3 SFF-8436&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dell MD1280&lt;/td&gt;
&lt;td&gt;5U&lt;/td&gt;
&lt;td&gt;223&lt;/td&gt;
&lt;td&gt;483&lt;/td&gt;
&lt;td&gt;915&lt;/td&gt;
&lt;td&gt;N+1&lt;/td&gt;
&lt;td&gt;84&lt;/td&gt;
&lt;td&gt;2x2800&lt;/td&gt;
&lt;td&gt;130.1 kg&lt;/td&gt;
&lt;td&gt;SAS2 SFF-8088&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;Humidity&lt;/th&gt;
&lt;th&gt;Random Vibration&lt;/th&gt;
&lt;th&gt;Sinusoidal Vibration&lt;/th&gt;
&lt;th&gt;Temperature Range&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;946ED-R2KJBOD&lt;/td&gt;
&lt;td&gt;8%-90%&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;5°C-35°C(air)40°C (helium)       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST JBOD 4U60&lt;/td&gt;
&lt;td&gt;8%-80%&lt;/td&gt;
&lt;td&gt;0.25Grms 5-10Hz&lt;/td&gt;
&lt;td&gt;0.05 g, 10-300Hz&lt;/td&gt;
&lt;td&gt;5°C-35°C(air)40°C (helium)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dell MD1280&lt;/td&gt;
&lt;td&gt;10%-80%&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;1.04 g,2-200Hz(max)&lt;/td&gt;
&lt;td&gt;5°C-35°C(air)40°C (helium)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;Supermicro-946ED-R2KJBOD&quot;&gt;&lt;a href=&quot;#Supermicro-946ED-R2KJBOD&quot; class=&quot;headerlink&quot; title=&quot;Supermicro 946ED-R2KJBOD&quot;&gt;&lt;/a&gt;Supermicro 946ED-R2KJBOD&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.shopify.com/s/files/1/1040/6656/files/CSE-946ED-R2KJBOD_large.jpg?12087391912493687778&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;SFF-8644&quot;&gt;&lt;a href=&quot;#SFF-8644&quot; class=&quot;headerlink&quot; title=&quot;SFF-8644&quot;&gt;&lt;/a&gt;SFF-8644&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/SFF-8644.jpg/200px-SFF-8644.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;SFF-8436&quot;&gt;&lt;a href=&quot;#SFF-8436&quot; class=&quot;headerlink&quot; title=&quot;SFF-8436&quot;&gt;&lt;/a&gt;SFF-8436&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://img.thuexeminhanh.com/pic/z29cc701-200x200-1/40g_qsfp_sff_8436_to_qsfp_passive_copper_cable.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;SFF-8088&quot;&gt;&lt;a href=&quot;#SFF-8088&quot; class=&quot;headerlink&quot; title=&quot;SFF-8088&quot;&gt;&lt;/a&gt;SFF-8088&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSCbG7orrSXih0_w2CbkBAkXnk0tUwaojoyWQ9wltVwhIt0pUR9&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;SAS-HBA-and-Raid&quot;&gt;&lt;a href=&quot;#SAS-HBA-and-Raid&quot; class=&quot;headerlink&quot; title=&quot;SAS HBA and Raid&quot;&gt;&lt;/a&gt;SAS HBA and Raid&lt;/h3&gt;&lt;h4 id=&quot;Raid&quot;&gt;&lt;a href=&quot;#Raid&quot; class=&quot;headerlink&quot; title=&quot;Raid&quot;&gt;&lt;/a&gt;Raid&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;RAID&lt;/th&gt;
&lt;th&gt;SAS chip&lt;/th&gt;
&lt;th&gt;dell&lt;/th&gt;
&lt;th&gt;Cache&lt;/th&gt;
&lt;th&gt;SAS&lt;/th&gt;
&lt;th&gt;SAS port&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;9380-8e&lt;/td&gt;
&lt;td&gt;LSI 3108&lt;/td&gt;
&lt;td&gt;H830&lt;/td&gt;
&lt;td&gt;2GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8644&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9361-8i&lt;/td&gt;
&lt;td&gt;LSI 3108&lt;/td&gt;
&lt;td&gt;H730&lt;/td&gt;
&lt;td&gt;1-2G&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9341-8i&lt;/td&gt;
&lt;td&gt;LSI 3008&lt;/td&gt;
&lt;td&gt;H330&lt;/td&gt;
&lt;td&gt;1GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9260-8i&lt;/td&gt;
&lt;td&gt;LSI 2108&lt;/td&gt;
&lt;td&gt;none&lt;/td&gt;
&lt;td&gt;0.5G&lt;/td&gt;
&lt;td&gt;2x4x6G&lt;/td&gt;
&lt;td&gt;SFF-8087&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9260-8i&lt;/td&gt;
&lt;td&gt;LSI 2208&lt;/td&gt;
&lt;td&gt;H710&lt;/td&gt;
&lt;td&gt;1GB&lt;/td&gt;
&lt;td&gt;2x4x6G&lt;/td&gt;
&lt;td&gt;SFF-8087&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9286-8e&lt;/td&gt;
&lt;td&gt;LSI 2208&lt;/td&gt;
&lt;td&gt;H810&lt;/td&gt;
&lt;td&gt;1GB&lt;/td&gt;
&lt;td&gt;2x4x6G&lt;/td&gt;
&lt;td&gt;SFF-8088&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP P244br&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;1GB&lt;/td&gt;
&lt;td&gt;2x1x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP P440ar&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;2GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP P440&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;2GB&lt;/td&gt;
&lt;td&gt;1x8x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P431-8e&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;4GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8644&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HP P441&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;4GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P741m-8e&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;4GB&lt;/td&gt;
&lt;td&gt;2x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8644&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P841-8e&lt;/td&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;4GB&lt;/td&gt;
&lt;td&gt;4x4x12G&lt;/td&gt;
&lt;td&gt;SFF-8644&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;LSI-Fusion-MPT&quot;&gt;&lt;a href=&quot;#LSI-Fusion-MPT&quot; class=&quot;headerlink&quot; title=&quot;LSI Fusion-MPT&quot;&gt;&lt;/a&gt;LSI Fusion-MPT&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SAS chip&lt;/th&gt;
&lt;th&gt;dell&lt;/th&gt;
&lt;th&gt;LSI&lt;/th&gt;
&lt;th&gt;SAS&lt;/th&gt;
&lt;th&gt;SAS port&lt;/th&gt;
&lt;th&gt;Power&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3008&lt;/td&gt;
&lt;td&gt;HBA12i&lt;/td&gt;
&lt;td&gt;9311-8i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;td&gt;14.5W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3008&lt;/td&gt;
&lt;td&gt;HBA12e&lt;/td&gt;
&lt;td&gt;9300-8e&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8644&lt;/td&gt;
&lt;td&gt;14.5W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3216&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;9305-16e&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8644&lt;/td&gt;
&lt;td&gt;13w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI3008x2&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;9302-16e&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8644&lt;/td&gt;
&lt;td&gt;30W&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3224&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;9305-24i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;td&gt;16.2w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3224&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;9305-24i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;td&gt;16.2w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2008&lt;/td&gt;
&lt;td&gt;HBA6i&lt;/td&gt;
&lt;td&gt;9211-8i&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8087&lt;/td&gt;
&lt;td&gt;7w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2308&lt;/td&gt;
&lt;td&gt;none&lt;/td&gt;
&lt;td&gt;9207-8e&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8088&lt;/td&gt;
&lt;td&gt;9.8w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI2008x2&lt;/td&gt;
&lt;td&gt;none&lt;/td&gt;
&lt;td&gt;9202-16e&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8088&lt;/td&gt;
&lt;td&gt;9.8w&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI2008x2&lt;/td&gt;
&lt;td&gt;HBA6e&lt;/td&gt;
&lt;td&gt;9200-8e&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8088&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;HP H220-8i&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8087&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;HP H221-8e&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;SFF8087&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;HP H240-8i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;H240br-8i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;H240br-8i&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8643&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PMC&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;H241-8e&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;SFF8644&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h5 id=&quot;LSI-ARM-arch-SAS-SATA-NVME&quot;&gt;&lt;a href=&quot;#LSI-ARM-arch-SAS-SATA-NVME&quot; class=&quot;headerlink&quot; title=&quot;LSI ARM arch, SAS, SATA, NVME&quot;&gt;&lt;/a&gt;LSI ARM arch, SAS, SATA, NVME&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SAS chip&lt;/th&gt;
&lt;th&gt;PCIE lanes&lt;/th&gt;
&lt;th&gt;PCIE BW&lt;/th&gt;
&lt;th&gt;SAS BW&lt;/th&gt;
&lt;th&gt;CPU&lt;/th&gt;
&lt;th&gt;DA&lt;/th&gt;
&lt;th&gt;DA&lt;/th&gt;
&lt;th&gt;PCIE devices&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3416&lt;/td&gt;
&lt;td&gt;x8 G3&lt;/td&gt;
&lt;td&gt;16GBps&lt;/td&gt;
&lt;td&gt;19.2GBps&lt;/td&gt;
&lt;td&gt;ARM A15 1.2G&lt;/td&gt;
&lt;td&gt;2xSFF-8639&lt;/td&gt;
&lt;td&gt;4xSFF-8680&lt;/td&gt;
&lt;td&gt;16          &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3408&lt;/td&gt;
&lt;td&gt;x8 G3&lt;/td&gt;
&lt;td&gt;8GBps&lt;/td&gt;
&lt;td&gt;9.6GBps&lt;/td&gt;
&lt;td&gt;ARM A15 1.2G&lt;/td&gt;
&lt;td&gt;2xSFF-8639&lt;/td&gt;
&lt;td&gt;4xSFF-8680&lt;/td&gt;
&lt;td&gt;16          &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Why 3416 and 3408 have the same PCIE lanes (x8 ?)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SFF-8639&lt;ul&gt;
&lt;li&gt;PCIE Gen3 1,2,4 lanes&lt;ul&gt;
&lt;li&gt;3.938 GB/s (if full-duplex, x2)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SAS3 1,2,4 lanes&lt;ul&gt;
&lt;li&gt;4.8GB/s&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SFF-8680&lt;ul&gt;
&lt;li&gt;SAS3 1,2 lanes&lt;ul&gt;
&lt;li&gt;2.4GB/s&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.snia.org/sites/default/education/tutorials/2012/fall/solid/AnilVasudeva_NVMe_NextGen_SSD%20Interface-r1-nc1.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NVME interface&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;LSI-SAS-Chip&quot;&gt;&lt;a href=&quot;#LSI-SAS-Chip&quot; class=&quot;headerlink&quot; title=&quot;LSI SAS Chip&quot;&gt;&lt;/a&gt;LSI SAS Chip&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Fd (Full duplex)&lt;/li&gt;
&lt;li&gt;BW (bandwidth)&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SAS chip&lt;/th&gt;
&lt;th&gt;Power CPU&lt;/th&gt;
&lt;th&gt;16xPCIE3 BW&lt;/th&gt;
&lt;th&gt;SAS3 BW&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3008&lt;/td&gt;
&lt;td&gt;PPC476 1.2G&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;9.6GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3108&lt;/td&gt;
&lt;td&gt;Dual PPC476 1.2G&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;9.6GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3216&lt;/td&gt;
&lt;td&gt;PPC476 1.2G&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;19.2GB/s Fd 16p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 3224&lt;/td&gt;
&lt;td&gt;PPC476 1.2G&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;28.8GB/s Fd 24p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2108&lt;/td&gt;
&lt;td&gt;PPC440 800MHz&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;4.8GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2008&lt;/td&gt;
&lt;td&gt;PPC440 533M&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;4.8GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2308&lt;/td&gt;
&lt;td&gt;PPC440 800M&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;4.8GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LSI 2208&lt;/td&gt;
&lt;td&gt;Dual PPC440 800M&lt;/td&gt;
&lt;td&gt;16GB/s Fd&lt;/td&gt;
&lt;td&gt;4.8GB/s Fd 8p&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;SSD&quot;&gt;&lt;a href=&quot;#SSD&quot; class=&quot;headerlink&quot; title=&quot;SSD&quot;&gt;&lt;/a&gt;SSD&lt;/h3&gt;&lt;h4 id=&quot;SAS&quot;&gt;&lt;a href=&quot;#SAS&quot; class=&quot;headerlink&quot; title=&quot;SAS&quot;&gt;&lt;/a&gt;SAS&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;SIZE(TB)&lt;/th&gt;
&lt;th&gt;DWPD (5y)&lt;/th&gt;
&lt;th&gt;Nand&lt;/th&gt;
&lt;th&gt;R/W(GB/s)&lt;/th&gt;
&lt;th&gt;ios(k)&lt;/th&gt;
&lt;th&gt;interface&lt;/th&gt;
&lt;th&gt;UBER&lt;/th&gt;
&lt;th&gt;MTBF&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SanDisk Optimus MAX&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;0.5&lt;/td&gt;
&lt;td&gt;19nm emlc&lt;/td&gt;
&lt;td&gt;0.4/0.4&lt;/td&gt;
&lt;td&gt;85/11&lt;/td&gt;
&lt;td&gt;6Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SD Lightning Eco GenII&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;0.98/0.6&lt;/td&gt;
&lt;td&gt;195/81&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^18&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SD Lightning Ultra GenII&lt;/td&gt;
&lt;td&gt;0.8&lt;/td&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;0.98/0.74&lt;/td&gt;
&lt;td&gt;199/115&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^19&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST Ultrastar SSD1600MR&lt;/td&gt;
&lt;td&gt;1.9&lt;/td&gt;
&lt;td&gt;2.6&lt;/td&gt;
&lt;td&gt;emlc&lt;/td&gt;
&lt;td&gt;1/0.7&lt;/td&gt;
&lt;td&gt;130/30&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST Ultrastar SS200&lt;/td&gt;
&lt;td&gt;0.48-7.6&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;1.8/1&lt;/td&gt;
&lt;td&gt;250/37&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST Ultrastar SS200&lt;/td&gt;
&lt;td&gt;0.4-6.4&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;1.8/1&lt;/td&gt;
&lt;td&gt;250/86&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HGST s842&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;14~40&lt;/td&gt;
&lt;td&gt;emlc&lt;/td&gt;
&lt;td&gt;0.53/0.38&lt;/td&gt;
&lt;td&gt;84/28&lt;/td&gt;
&lt;td&gt;6Gbps SAS&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1200.2 ST3840FM0003&lt;/td&gt;
&lt;td&gt;3.8&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;1.1/0.77&lt;/td&gt;
&lt;td&gt;180/30&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Samsung PM1635&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;TLC ?&lt;/td&gt;
&lt;td&gt;0.94/0.79&lt;/td&gt;
&lt;td&gt;190/50&lt;/td&gt;
&lt;td&gt;12Gbps SAS&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2.5M&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;SATA&quot;&gt;&lt;a href=&quot;#SATA&quot; class=&quot;headerlink&quot; title=&quot;SATA&quot;&gt;&lt;/a&gt;SATA&lt;/h4&gt;&lt;p&gt;Intel DC S3100 is good choice to install operating system&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;SIZE(TB)&lt;/th&gt;
&lt;th&gt;DWPD (5y)&lt;/th&gt;
&lt;th&gt;Nand&lt;/th&gt;
&lt;th&gt;R/W(GB/s)&lt;/th&gt;
&lt;th&gt;ios(k)&lt;/th&gt;
&lt;th&gt;interface&lt;/th&gt;
&lt;th&gt;UBER&lt;/th&gt;
&lt;th&gt;MTBF&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SD CloudSpeed Eco GenII&lt;/td&gt;
&lt;td&gt;1.92&lt;/td&gt;
&lt;td&gt;0.6&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;0.53,0.46&lt;/td&gt;
&lt;td&gt;75,14&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^18&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SD CloudSpeed Ultra GenII&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;1.8&lt;/td&gt;
&lt;td&gt;15nm emlc&lt;/td&gt;
&lt;td&gt;0.53,0.46&lt;/td&gt;
&lt;td&gt;76,32&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^18&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel DC s3100&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0.06&lt;/td&gt;
&lt;td&gt;16nm tlc&lt;/td&gt;
&lt;td&gt;0.50,0.11&lt;/td&gt;
&lt;td&gt;59,3.9&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^16&lt;/td&gt;
&lt;td&gt;1.6M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel DC s3100&lt;/td&gt;
&lt;td&gt;0.48&lt;/td&gt;
&lt;td&gt;0.84&lt;/td&gt;
&lt;td&gt;16nm tlc&lt;/td&gt;
&lt;td&gt;0.50,0.11&lt;/td&gt;
&lt;td&gt;55,4.7&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^16&lt;/td&gt;
&lt;td&gt;1.6M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel DC s3510&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;0.35&lt;/td&gt;
&lt;td&gt;16nm emlc&lt;/td&gt;
&lt;td&gt;0.50,0.43&lt;/td&gt;
&lt;td&gt;65,15&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel DC s3520&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;0.35&lt;/td&gt;
&lt;td&gt;16 3d emlc&lt;/td&gt;
&lt;td&gt;0.45,0.38&lt;/td&gt;
&lt;td&gt;67,17&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Intel DC s3610&lt;/td&gt;
&lt;td&gt;1.6&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;20nm emlc&lt;/td&gt;
&lt;td&gt;0.55,0.5&lt;/td&gt;
&lt;td&gt;84,27&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;10^17&lt;/td&gt;
&lt;td&gt;2M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Samsung PM863&lt;/td&gt;
&lt;td&gt;3.8&lt;/td&gt;
&lt;td&gt;0.78&lt;/td&gt;
&lt;td&gt;3d TLC&lt;/td&gt;
&lt;td&gt;0.55,0.5&lt;/td&gt;
&lt;td&gt;99,18&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Samsung SM863&lt;/td&gt;
&lt;td&gt;3.8&lt;/td&gt;
&lt;td&gt;3.5&lt;/td&gt;
&lt;td&gt;3d MLC&lt;/td&gt;
&lt;td&gt;0.52,0.48&lt;/td&gt;
&lt;td&gt;97,29&lt;/td&gt;
&lt;td&gt;6Gbps&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;Compute-node&quot;&gt;&lt;a href=&quot;#Compute-node&quot; class=&quot;headerlink&quot; title=&quot;Compute node&quot;&gt;&lt;/a&gt;Compute node&lt;/h3&gt;&lt;p&gt;SYS-4048B-TR4FT-EC028&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;DAS&quot;&gt;&lt;a href=&quot;#DAS&quot; class=&quot;headerlink&quot; title=&quot;DAS&quot;&gt;&lt;/a&gt;DAS&lt;/h3&gt;&lt;h4 id=&quot;Dual-nodes-redundance-SAS-link&quot;&gt;&lt;a href=&quot;#Dual-nodes-redundan
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="raid" scheme="http://yoursite.com/tags/raid/"/>
    
      <category term="hardware" scheme="http://yoursite.com/tags/hardware/"/>
    
      <category term="jbod" scheme="http://yoursite.com/tags/jbod/"/>
    
      <category term="das" scheme="http://yoursite.com/tags/das/"/>
    
      <category term="server" scheme="http://yoursite.com/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>Dump sparse file data segment</title>
    <link href="http://yoursite.com/2016/12/18/dump-sparse-file-data-segment/"/>
    <id>http://yoursite.com/2016/12/18/dump-sparse-file-data-segment/</id>
    <published>2016-12-18T13:31:17.000Z</published>
    <updated>2016-12-26T03:18:09.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Test-file&quot;&gt;&lt;a href=&quot;#Test-file&quot; class=&quot;headerlink&quot; title=&quot;Test file&quot;&gt;&lt;/a&gt;Test file&lt;/h3&gt;&lt;p&gt;ubuntu 16.04&lt;br&gt;ext4 file system&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ rm data-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;1..1500&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; data-A ; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v data-A &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of data-A is 6394 (2 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..       0:    3464588..   3464588:      1:            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1:        1..       1:          0..         0:      1:    3464589: last,unknown_loc,delalloc,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=data-A of=data-A-1 bs=4096 count=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=data-A of=data-A-2 bs=4096 count=1 skip=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head data-A-2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1042&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1043&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1044&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1045&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat data-A-1 data-A-2 | md5sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30ef7f11d29b8ad47542e97ed9d2a398  -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat data-A | md5sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30ef7f11d29b8ad47542e97ed9d2a398  -&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Test-sparse-file&quot;&gt;&lt;a href=&quot;#Test-sparse-file&quot; class=&quot;headerlink&quot; title=&quot;Test sparse file&quot;&gt;&lt;/a&gt;Test sparse file&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ rm ./data-A;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;1..1500&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; data-A ; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v data-A &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of data-A is 6393 (2 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..       1:          0..         1:      2:             last,unknown_loc,delalloc,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data-A: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=4096 count=0 seek=25 &lt;span class=&quot;comment&quot;&gt;#write 100K sparse file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat data-A &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -lhs &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 16K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8.0K -rw-rw-r-- 1 homerl homerl 6.3K 12月 19 14:04 data-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8.0K -rw-rw-r-- 1 homerl homerl 107K 12月 19 14:06 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ df -h / &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem      Size  Used Avail Use% Mounted on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda2       101G   35G   61G  37% /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo dumpe2fs /dev/sda2 | grep -i &lt;span class=&quot;string&quot;&gt;&quot;Block size&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dumpe2fs 1.42.13 (17-May-2015)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Block size:               4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v data-A &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of data-A is 6393 (2 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..       1:    3713508..   3713509:      2:             last,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data-A: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/sda2 of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 bs=4096 count=1 skip=3713508&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1039&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1040&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1 | md5sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27260c41d34d5a01f5fba073f9059a90  -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; is 108793 (27 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:       25..      26:    3713510..   3713511:      2:             last,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/sda2 of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;-1 bs=4096 count=1 skip=3713510&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ md5sum &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27260c41d34d5a01f5fba073f9059a90  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27260c41d34d5a01f5fba073f9059a90  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/sda2 of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;-2 bs=4096 count=1 skip=3713511&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# the checksum difference between test-s-2 and test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;-2 | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0000890 3431 3038 310a 3834 0a31 3431 3238 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008a0 3834 0a33 3431 3438 310a 3834 0a35 3431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008b0 3638 310a 3834 0a37 3431 3838 310a 3834&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008c0 0a39 3431 3039 310a 3934 0a31 3431 3239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008d0 310a 3934 0a33 3431 3439 310a 3934 0a35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008e0 3431 3639 310a 3934 0a37 3431 3839 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00008f0 3934 0a39 3531 3030 000a 0000 0000 0000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0000900 0000 0000 0000 0000 0000 0000 0000 0000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a870 0a33 3431 3437 310a 3734 0a35 3431 3637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a880 310a 3734 0a37 3431 3837 310a 3734 0a39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a890 3431 3038 310a 3834 0a31 3431 3238 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8a0 3834 0a33 3431 3438 310a 3834 0a35 3431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8b0 3638 310a 3834 0a37 3431 3838 310a 3834&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8c0 0a39 3431 3039 310a 3934 0a31 3431 3239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8d0 310a 3934 0a33 3431 3439 310a 3934 0a35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8e0 3431 3639 310a 3934 0a37 3431 3839 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8f0 3934 0a39 3531 3030 000a               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8f9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;There are some of zero fill in the file bottom.&lt;br&gt;astersik (*) !(means same as the line above)[&lt;a href=&quot;http://superuser.com/questions/494245/what-does-an-asterisk-mean-in-hexdump-output&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://superuser.com/questions/494245/what-does-an-asterisk-mean-in-hexdump-output&lt;/a&gt;]&lt;/p&gt;
&lt;h3 id=&quot;dd-update&quot;&gt;&lt;a href=&quot;#dd-update&quot; class=&quot;headerlink&quot; title=&quot;dd update&quot;&gt;&lt;/a&gt;dd update&lt;/h3&gt;&lt;p&gt;operate single byte&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=data-A of=data-A-1Byte bs=1  count=1 ibs=1 obs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=data-A of=data-A-skip-1byte bs=1  skip=2 count=1 ibs=1 obs=1 iflag=count_bytes iflag=skip_bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls | grep -i by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#first column is KiB , 4 is 4KiB&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#sixth column is byte , 1 byte&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  4 -rw-rw-r-- 1 homerl homerl      1 12月 19 15:23 data-A-1Byte&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  4 -rw-rw-r-- 1 homerl homerl      1 12月 19 15:22 data-A-skip-1byte&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat data-A-1Byte&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 $ cat data-A-skip-1byte&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; data-A &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 -rw-rw-r-- 1 homerl homerl   6393 12月 19 14:54 data-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 -rw-rw-r-- 1 homerl homerl 108793 12月 19 15:30 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$  dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-data bs=1 count=6393 skip=102400 iflag=skip_bytes ibs=1 obs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ $ sha1sum   data-A &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-data &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8f8374832cb6536f580eef3b316ad08293a47617  data-A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8f8374832cb6536f580eef3b316ad08293a47617  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;03e31af4c89c9003ee0f43e49a65ad2e24367024  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump data-A | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001870 0a33 3431 3437 310a 3734 0a35 3431 3637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001880 310a 3734 0a37 3431 3837 310a 3734 0a39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001890 3431 3038 310a 3834 0a31 3431 3238 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018a0 3834 0a33 3431 3438 310a 3834 0a35 3431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018b0 3638 310a 3834 0a37 3431 3838 310a 3834&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018c0 0a39 3431 3039 310a 3934 0a31 3431 3239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018d0 310a 3934 0a33 3431 3439 310a 3934 0a35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018e0 3431 3639 310a 3934 0a37 3431 3839 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018f0 3934 0a39 3531 3030 000a               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018f9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-data | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001870 0a33 3431 3437 310a 3734 0a35 3431 3637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001880 310a 3734 0a37 3431 3837 310a 3734 0a39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0001890 3431 3038 310a 3834 0a31 3431 3238 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018a0 3834 0a33 3431 3438 310a 3834 0a35 3431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018b0 3638 310a 3834 0a37 3431 3838 310a 3834&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018c0 0a39 3431 3039 310a 3934 0a31 3431 3239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018d0 310a 3934 0a33 3431 3439 310a 3934 0a35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018e0 3431 3639 310a 3934 0a37 3431 3839 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018f0 3934 0a39 3531 3030 000a               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00018f9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ hexdump &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a870 0a33 3431 3437 310a 3734 0a35 3431 3637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a880 310a 3734 0a37 3431 3837 310a 3734 0a39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a890 3431 3038 310a 3834 0a31 3431 3238 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8a0 3834 0a33 3431 3438 310a 3834 0a35 3431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8b0 3638 310a 3834 0a37 3431 3838 310a 3834&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8c0 0a39 3431 3039 310a 3934 0a31 3431 3239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8d0 310a 3934 0a33 3431 3439 310a 3934 0a35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8e0 3431 3639 310a 3934 0a37 3431 3839 310a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8f0 3934 0a39 3531 3030 000a               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001a8f9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Expand-sparse-file&quot;&gt;&lt;a href=&quot;#Expand-sparse-file&quot; class=&quot;headerlink&quot; title=&quot;Expand sparse file&quot;&gt;&lt;/a&gt;Expand sparse file&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ truncate &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; +256 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_bak&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_bak &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108 -rw-rw-r-- 1 homerl homerl 109049 12月 19 16:36 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_bak&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 -rw-rw-r-- 1 homerl homerl 108793 12月 19 15:30 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; $((109049-108793))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# not sparse&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$fallocate&lt;/span&gt; -o 1M &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; 1M 1M-file&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;About-fallocate&quot;&gt;&lt;a href=&quot;#About-fallocate&quot; class=&quot;headerlink&quot; title=&quot;About fallocate&quot;&gt;&lt;/a&gt;About &lt;a href=&quot;https://pelican.craoc.fr/sparse-file.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;fallocate&lt;/a&gt;&lt;/h3&gt;&lt;h4 id=&quot;collapse-range&quot;&gt;&lt;a href=&quot;#collapse-range&quot; class=&quot;headerlink&quot; title=&quot;collapse-range&quot;&gt;&lt;/a&gt;collapse-range&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ rm &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &amp;#123;0..60000&amp;#125;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl 348896 12月 19 17:03 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cp &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ fallocate --collapse-range --offset 4096 --length 8192  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2 &lt;span class=&quot;comment&quot;&gt;# From 4096, delete length from 4096 delete 8192 length bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-dd-4096-8192 bs=4096 count=2 skip=4096 iflag=skip_bytes &lt;span class=&quot;comment&quot;&gt;# make sure delete length&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-dd-4096-8192 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;041&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1042&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1043&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1044&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1045&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1046&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1047&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1049&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1050&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ tail &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-dd-4096-8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2670&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2671&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2672&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2673&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2674&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2675&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2676&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2677&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2678&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;267&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head -n 1045 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2 | tail&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1035&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1036&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1037&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1038&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1039&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1040&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19   &lt;span class=&quot;comment&quot;&gt;# 1 041 and 267 9&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2680&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2681&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2682&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# test in sparse file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse bs=1M count=0 seek=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -lsh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 344K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344K -rw-rw-r-- 1 homerl homerl 341K 12月 19 17:03 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0 -rw-rw-r-- 1 homerl homerl 1.0M 12月 19 17:23 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 688&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl  348896 12月 19 17:03 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl 1397472 12月 19 17:23 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ fallocate --collapse-range --offset 4096 --length 8192 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ls -ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 688&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl  348896 12月 19 17:03 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl 1389280 12月 19 17:24 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1397472 (342 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:      254..     341:    3803866..   3803953:     88:             last,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1389280 (340 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:      252..     339:    3803866..   3803953:     88:             last,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;zero-range&quot;&gt;&lt;a href=&quot;#zero-range&quot; class=&quot;headerlink&quot; title=&quot;zero-range&quot;&gt;&lt;/a&gt;zero-range&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cp  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse bs=1M count=0 seek=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0+0 records out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 bytes copied, 0.000132755 s, 0.0 kB/s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] 130 $ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1048576 (256 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..       2:     589896..    589898:      3:             last,unwritten&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] $ cat &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] $ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1397472 (342 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:        0..       2:     589896..    589898:      3:             unwritten&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   1:      256..     341:          0..        85:     86:     589899: last,unknown_loc,delalloc,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse: 2 extents found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$  head &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ fallocate --zero-range --offset 1048576 --length 128 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ head &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ fallocate --zero-range --offset 1048576 --length 348896  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# clear all&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;punch-hole&quot;&gt;&lt;a href=&quot;#punch-hole&quot; class=&quot;headerlink&quot; title=&quot;punch-hole&quot;&gt;&lt;/a&gt;punch-hole&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1397472 (342 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:      256..     341:          0..        85:     86:             last,unknown_loc,delalloc,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$cat&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] $ ls -ls&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total 688&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl  348896 12月 19 17:29 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344 -rw-rw-r-- 1 homerl homerl 1397472 12月 19 17:53 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; ((4096*256)=1048576 ;((4096*84))=344064&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$fallocate&lt;/span&gt; --punch-hole --offset 1048576 --length 344064  &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] $ filefrag -v &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; is: ef53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File size of &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse is 1397472 (342 blocks of 4096 bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ext:     logical_offset:        physical_offset: length:   expected: flags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   0:      340..     341:    3802396..   3802397:      2:             last,eof&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse: 1 extent found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1d [homerl:/tmp/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;/&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;2] $ ls -ls &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8 -rw-rw-r-- 1 homerl homerl 1397472 12月 19 17:54 &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;-sparse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# space has recycled&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Test-file&quot;&gt;&lt;a href=&quot;#Test-file&quot; class=&quot;headerlink&quot; title=&quot;Test file&quot;&gt;&lt;/a&gt;Test file&lt;/h3&gt;&lt;p&gt;ubuntu 16.04&lt;br&gt;ext4 file system&lt;br&gt;&lt;figur
    
    </summary>
    
      <category term="file" scheme="http://yoursite.com/categories/file/"/>
    
    
      <category term="sparse file" scheme="http://yoursite.com/tags/sparse-file/"/>
    
  </entry>
  
  <entry>
    <title>Ping test in serial link</title>
    <link href="http://yoursite.com/2016/12/05/Ping-test-in-serial-link/"/>
    <id>http://yoursite.com/2016/12/05/Ping-test-in-serial-link/</id>
    <published>2016-12-05T07:13:14.000Z</published>
    <updated>2016-12-05T07:39:53.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Calculate-upload-download-speed-by-ping&quot;&gt;&lt;a href=&quot;#Calculate-upload-download-speed-by-ping&quot; class=&quot;headerlink&quot; title=&quot;Calculate upload/download speed by ping&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://stackoverflow.com/questions/4575537/calculate-upload-download-speed-by-ping&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Calculate upload/download speed by ping&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ping &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; -c 10000 &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; 1472 10.100.100.100&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;At the end of the result i get: round-trip min/avg/max/stddev = 0.174/0.219/2.078/0.020 ms&lt;br&gt;so in average it takes 0.219 ms to send 1500 bytes and receive 1500 bytes, that’s 24 kb. 24 kb / 0.219 ms = 110 Mb/s&lt;br&gt;If you want to use that to a server on the internet, you need to lower the packet size to something like 1464 (for MTU 1492), drop the -f option and lower the count so it won’t take too long to finish.&lt;/p&gt;
&lt;p&gt;1500 TX Bytes + 1500 RX Bytes= 3000 Bytes = 3000 * 8 = 24000 bits&lt;br&gt;24000 / 0.219 = 109.589 Mb/s&lt;/p&gt;
&lt;p&gt;It ‘s not represent full throughput. just test single link in your ethernet adapter. not parallel.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Calculate-upload-download-speed-by-ping&quot;&gt;&lt;a href=&quot;#Calculate-upload-download-speed-by-ping&quot; class=&quot;headerlink&quot; title=&quot;Calculate uplo
    
    </summary>
    
      <category term="network" scheme="http://yoursite.com/categories/network/"/>
    
    
      <category term="net" scheme="http://yoursite.com/tags/net/"/>
    
      <category term="ethernet" scheme="http://yoursite.com/tags/ethernet/"/>
    
  </entry>
  
  <entry>
    <title>Record and Replay Linux Terminal</title>
    <link href="http://yoursite.com/2016/12/01/Record-and-Replay-Linux-Terminal/"/>
    <id>http://yoursite.com/2016/12/01/Record-and-Replay-Linux-Terminal/</id>
    <published>2016-12-01T05:30:33.000Z</published>
    <updated>2016-12-01T05:35:19.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;script-and-scriptreplay&quot;&gt;&lt;a href=&quot;#script-and-scriptreplay&quot; class=&quot;headerlink&quot; title=&quot;script and scriptreplay&quot;&gt;&lt;/a&gt;script and scriptreplay&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ script --timing=time.txt script.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# record what you do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ scriptreplay --timing=time.txt script.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# replay&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;script-and-scriptreplay&quot;&gt;&lt;a href=&quot;#script-and-scriptreplay&quot; class=&quot;headerlink&quot; title=&quot;script and scriptreplay&quot;&gt;&lt;/a&gt;script and script
    
    </summary>
    
      <category term="Tools" scheme="http://yoursite.com/categories/Tools/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="terminal" scheme="http://yoursite.com/tags/terminal/"/>
    
      <category term="record" scheme="http://yoursite.com/tags/record/"/>
    
  </entry>
  
  <entry>
    <title>kcptun_and_shadowsocks</title>
    <link href="http://yoursite.com/2016/09/04/kcptun-and-shadowsocks/"/>
    <id>http://yoursite.com/2016/09/04/kcptun-and-shadowsocks/</id>
    <published>2016-09-04T11:06:05.000Z</published>
    <updated>2016-09-04T11:30:07.773Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Server-Parameters&quot;&gt;&lt;a href=&quot;#Server-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Server Parameters&quot;&gt;&lt;/a&gt;Server Parameters&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;su &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /bin/bash nobody -c &lt;span class=&quot;string&quot;&gt;&#39;./server_linux_amd64 -l &quot;vps_ip:kcptun_port&quot; -t &quot;serer_ip:shadowsocks_port&quot; -key yourkeyfile -mode fast2 --crypt aes-128 --datashard 10 --parityshard 3&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Client-Parameters&quot;&gt;&lt;a href=&quot;#Client-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Client Parameters&quot;&gt;&lt;/a&gt;Client Parameters&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./client_linux_amd64 -r &lt;span class=&quot;string&quot;&gt;&quot;vps_ip:kcptun_port&quot;&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;:kcptun_client_port&quot;&lt;/span&gt; -key yourkeyfile -mode fast2 --crypt aes-128 --datashard 10 --parityshard 3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Modify-shadowsocks-config&quot;&gt;&lt;a href=&quot;#Modify-shadowsocks-config&quot; class=&quot;headerlink&quot; title=&quot;Modify shadowsocks config&quot;&gt;&lt;/a&gt;Modify shadowsocks config&lt;/h3&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&quot;server&quot;:&quot;127.0.0.1&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&quot;server_port&quot;:kcptun_client_port,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Browser proxy setting no changed (local port of shadowsocks client)&lt;/p&gt;
&lt;h3 id=&quot;Some-of-issues&quot;&gt;&lt;a href=&quot;#Some-of-issues&quot; class=&quot;headerlink&quot; title=&quot;Some of issues&quot;&gt;&lt;/a&gt;Some of issues&lt;/h3&gt;&lt;p&gt;There is no “localhost/127.0.0.1” in openvz envirnoment, you need replace it by ip address&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Server-Parameters&quot;&gt;&lt;a href=&quot;#Server-Parameters&quot; class=&quot;headerlink&quot; title=&quot;Server Parameters&quot;&gt;&lt;/a&gt;Server Parameters&lt;/h3&gt;&lt;figure class
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="shadowsocks" scheme="http://yoursite.com/tags/shadowsocks/"/>
    
  </entry>
  
  <entry>
    <title>Advance reformat 4Kn HDD to 512 Bytes</title>
    <link href="http://yoursite.com/2016/08/10/Advance-reformat-4Kn-HDD-to-512-Bytes/"/>
    <id>http://yoursite.com/2016/08/10/Advance-reformat-4Kn-HDD-to-512-Bytes/</id>
    <published>2016-08-09T16:04:26.000Z</published>
    <updated>2016-12-26T03:17:19.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;4Kn-HDD-to-512-Bytes-sectora&quot;&gt;&lt;a href=&quot;#4Kn-HDD-to-512-Bytes-sectora&quot; class=&quot;headerlink&quot; title=&quot;4Kn HDD to 512 Bytes sectora&quot;&gt;&lt;/a&gt;4Kn HDD to 512 Bytes sectora&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ smartctl &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; scsi /dev/sdd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;smartctl 5.43 2012-06-30 r3573 [x86_64-linux-2.6.32-504.30.3.el6_lustre.x86_64] (&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; build)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2002-12 by Bruce Allen, http://smartmontools.sourceforge.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor:               HGST    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product:              HUH728080AL4200 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Revision:             A7J0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User Capacity:        8,001,563,222,016 bytes [8.00 TB]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical block size:   4096 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ smartctl &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; scsi /dev/sdc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;smartctl 5.43 2012-06-30 r3573 [x86_64-linux-2.6.32-504.30.3.el6_lustre.x86_64] (&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; build)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2002-12 by Bruce Allen, http://smartmontools.sourceforge.net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor:               HGST    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product:              HUH728080AL4200 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Revision:             A7J0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User Capacity:        8,001,563,222,016 bytes [8.00 TB]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Logical block size:   512 bytes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;sg3-utils-format&quot;&gt;&lt;a href=&quot;#sg3-utils-format&quot; class=&quot;headerlink&quot; title=&quot;sg3_utils format&quot;&gt;&lt;/a&gt;sg3_utils format&lt;/h4&gt;&lt;p&gt;Update: If you have a lot of drives to format, it may take a long time with sg_format as it wait until it finished before doing the next one (with a while loop I mean). Useful tip is to use the “-e” flag with sg_format then monitor operations with sg_turs -p but it may hang you tty as well.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_format --format --size=512 /dev/sdc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HGST      HUH728080AL4200   A7J0   peripheral_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: disk [0x0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&amp;lt; supports protection information&amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mode Sense (block descriptor) data, prior to changes:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Number of blocks=1953506646 [0x74702556]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Block size=4096 [0x1000]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A FORMAT will commence &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; 10 seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALL data on /dev/sdc will be DESTROYED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Press control-C to abort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A FORMAT will commence &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; 5 seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALL data on /dev/sdc will be DESTROYED&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Press control-C to abort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Format has started&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FORMAT Complete&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;It ‘s not complete,  just backend operate&lt;br&gt;sdparm ,smartctl, /sys could not access the device, when format complete, it’s ok.&lt;/p&gt;
&lt;h4 id=&quot;Read-cap&quot;&gt;&lt;a href=&quot;#Read-cap&quot; class=&quot;headerlink&quot; title=&quot;Read cap&quot;&gt;&lt;/a&gt;Read cap&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sg_readcap &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; /dev/sdc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read Capacity results:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Protection: prot_en=0, p_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;=0, p_i_exponent=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Thin provisioning: tpe=0, tprz=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Last logical block address=15628053167 (0x3a3812aaf), Number of logical blocks=15628053168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Logical block length=512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Logical blocks per physical block exponent=3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Lowest aligned logical block address=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hence:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Device size: 8001563222016 bytes, 7630885.3 MiB, 8001.56 GB&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Get-HDD-status&quot;&gt;&lt;a href=&quot;#Get-HDD-status&quot; class=&quot;headerlink&quot; title=&quot;Get HDD status&quot;&gt;&lt;/a&gt;Get HDD status&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sg_turs -v /dev/sdb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; unit ready cdb: 00 00 00 00 00 00 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; unit ready:  Descriptor format, current;  Sense key: Not Ready Additional sense: Logical unit not ready, format &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; progress  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Descriptor &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Information    00 00 00 00 00 00 00 00 00 00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Descriptor &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: Command specific    0x0000000000000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   device not ready&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;After 18 hours, format finish , I ‘m not sure what time it complete.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat /sys/class/block/sdc/queue/hw_sector_size &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /sys/class/block/sdd/queue/hw_sector_size &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4096&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Security-erasing-SAS-SATA-SSD&quot;&gt;&lt;a href=&quot;#Security-erasing-SAS-SATA-SSD&quot; class=&quot;headerlink&quot; title=&quot;Security erasing SAS/SATA SSD&quot;&gt;&lt;/a&gt;Security erasing SAS/SATA SSD&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sg_format --format /dev/sdx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hdparm --user-master u --security-set-pass password /dev/sdx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;4Kn-HDD-to-512-Bytes-sectora&quot;&gt;&lt;a href=&quot;#4Kn-HDD-to-512-Bytes-sectora&quot; class=&quot;headerlink&quot; title=&quot;4Kn HDD to 512 Bytes sectora&quot;&gt;&lt;/a&gt;4K
    
    </summary>
    
      <category term="Hardware" scheme="http://yoursite.com/categories/Hardware/"/>
    
    
      <category term="hdd" scheme="http://yoursite.com/tags/hdd/"/>
    
      <category term="ssd" scheme="http://yoursite.com/tags/ssd/"/>
    
      <category term="sas" scheme="http://yoursite.com/tags/sas/"/>
    
  </entry>
  
  <entry>
    <title>Calculate HDD SSD fault ratio</title>
    <link href="http://yoursite.com/2016/07/20/Calculate_HDD_SSD_fault_ratio/"/>
    <id>http://yoursite.com/2016/07/20/Calculate_HDD_SSD_fault_ratio/</id>
    <published>2016-07-20T06:30:04.000Z</published>
    <updated>2017-01-13T09:27:12.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;2017-update&quot;&gt;&lt;a href=&quot;#2017-update&quot; class=&quot;headerlink&quot; title=&quot;2017 update&quot;&gt;&lt;/a&gt;2017 update&lt;/h3&gt;&lt;p&gt;First year failure four HDD at the same time,single HDD fault rate 0.01&lt;br&gt;Third year failure four HDD at the same time,single HDD fault rate 0.03&lt;br&gt;Fifth year failure four HDD at the same time,single HDD fault rate 0.05&lt;/p&gt;
&lt;p&gt;In third year, Raidz3 broken four HDD at the same time&lt;br&gt;$ awk ‘BEGIN{printf “%.12f\n”, 1-(480/(365*24/0.03)+0.03)^4}’&lt;br&gt;0.999998997334&lt;/p&gt;
&lt;p&gt;Real MTBF&lt;br&gt;$ awk ‘BEGIN{printf “%.10f\n”, 365*24/0.03}’&lt;br&gt;292000.0000000000&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wintelguy.com/raidmttdl.pl&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RAID Reliability Calculator&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://evadman.blogspot.com/2010/08/raid-array-failure-probabilities.html?showComment=1337533818123#c7465506102422346169&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The article&lt;/a&gt;&lt;br&gt;It ‘s said&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;You&amp;apos;ve got your probabilities wrong. Probability of failure of RAID 0, 5 and 6 is easily calculated using the binomial probability distribution. Note that because URE during rebuild may be perceived as a disk failure by some hardware/software RAIDs, the probability of an array failing is even higher. So the following probabilities assume no UREs, implying that they are the lowest possible probabilities of failure for a given array. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;If the probability of any single drive failing = p, array size (i.e. no. of disks) = n, and number of drives that fail simultaneously = X, then:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pr(X) = (n&amp;quot;COMBINATION&amp;quot;X) * (p)^X * (1-p)^(n-X)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For p=0.03, n=4 we have&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pr(X) = (4&amp;quot;COMBINATION&amp;quot;X) * 0.03^X * 0.97^(4-X)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;So: X 0 1 2 3 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pr(X) 0.88529281 0.10952076 0.00508086 0.00010476 0.00000081&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For RAID 0, the array fails when X&amp;gt;=1, so Pr(RAID0 failure) = 0.10952076 + 0.00508086 + 0.00010476 + 0.00000081 = 0.11470719 ~ 1 in 9.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For RAID 5, the array fails when X&amp;gt;=2, so Pr(RAID5 failure) = 0.00508086 + 0.00010476 + 0.00000081 = 0.00518643 ~ 1 in 193.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For RAID 6, the array fails when X&amp;gt;=3, so Pr(RAID6 failure) = 0.00010476 + 0.00000081 = 0.00010557 ~ 1 in 9472.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;So for an array 4 disks in size, 1/9 RAID 0 arrays fail, 1/193 RAID 5 arrays fail, and 1/9472 RAID 6 arrays fail. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Similarly, for an array 6 disks in size, 1/6 RAID 0 arrays fail, 1/80 RAID 5 arrays fail, and 1/1982 RAID 6 arrays fail.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Also, for an array 24 disks in size, 1/2 RAID 0 arrays fail, 1/6 RAID 5 arrays fail, and 1/29 RAID 6 arrays fail.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Every year %3 failure rate, 0.03 ,I think it &amp;apos;s contains URE ratio.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 HDD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;BEGIN&amp;#123;printf &amp;quot;%.20f\n&amp;quot;, 11*0.03^2*0.97^(9)&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.00752628748068019399&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3 HDD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;BEGIN&amp;#123;printf &amp;quot;%.20f\n&amp;quot;, 11*0.03^3*0.97^(8)&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.00023277177775299571&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4 HDD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;BEGIN&amp;#123;printf &amp;quot;%.20f\n&amp;quot;, 11*0.03^4*0.97^(7)&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.00000719912714699987&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;BEGIN&amp;#123;printf &amp;quot;%.20f\n&amp;quot;,0.00752628748068019399+0.00023277177775299571+0.00000719912714699987&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.00776625838558018915&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Raidz3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ awk &amp;apos;BEGIN&amp;#123;printf &amp;quot;%.20f\n&amp;quot;,0.00023277177775299571+0.00000719912714699987&amp;#125;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.00023997090489999559&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2M MTBF, 0.44% &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1M MTBF, 0.88%&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;AFR&quot;&gt;&lt;a href=&quot;#AFR&quot; class=&quot;headerlink&quot; title=&quot;AFR&quot;&gt;&lt;/a&gt;AFR&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.hgst.com/sites/default/files/resources/Ultrastar-He8-DS.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.hgst.com/sites/default/files/resources/Ultrastar-He8-DS.pdf&lt;/a&gt;&lt;br&gt;2.5M hours MTBF2 and 0.35% AFR, I think real AFR=0.03&lt;br&gt;356x24=8760&lt;br&gt;$ awk ‘BEGIN{printf “%.2f\n”, 8760/0.004}’&lt;br&gt;2190000.00&lt;br&gt;$ awk ‘BEGIN{printf “%.2f\n”, 8760/0.035}’&lt;br&gt;2502857.14&lt;/p&gt;
&lt;h3 id=&quot;Nonrecoverable-Read-Errors-URE-per-Bits-Read&quot;&gt;&lt;a href=&quot;#Nonrecoverable-Read-Errors-URE-per-Bits-Read&quot; class=&quot;headerlink&quot; title=&quot;Nonrecoverable Read Errors(URE) per Bits Read&quot;&gt;&lt;/a&gt;Nonrecoverable Read Errors(URE) per Bits Read&lt;/h3&gt;&lt;p&gt;1 byte per 10E15 (Enterprise 7.2k HDD 10E15=1000000000000000)&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1e12*8 bytes = 1 (TB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(1e15)/(1e12*8)=125 (TB)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;1 byte per 10E14 (Desktop 5.9k/7.2k HDD)&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(1e14)/(1e12*8)=12.5 (TB)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;1 byte per 10E17 (Enterprise SSD)&lt;br&gt;1 byte per 10E16 (Desktop SSD/SAS 15k HDD)&lt;/p&gt;
&lt;h4 id=&quot;Calculate-failt-ratio-of-unrecoverable-read-error&quot;&gt;&lt;a href=&quot;#Calculate-failt-ratio-of-unrecoverable-read-error&quot; class=&quot;headerlink&quot; title=&quot;Calculate failt ratio of unrecoverable read error&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.high-rely.com/blog/why-raid-5-stops-working-in-2009-not/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Calculate failt ratio of unrecoverable read error&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;The probability equation they use for a successful read of all bits on a drive is&lt;br&gt;(1-1/b)^a&lt;br&gt;“b” = the Bit Error Rate (BER) also known as Unrecoverable Read Error(URE) rate&lt;br&gt;“a” = Number of Bits read (the amount of data on an entire volume or drive)&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;6e12*8=6TB (raidz 5/6 rebuild is that raid of each HDD full scan 6TB data for XOR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I think each device has the same fault ratio,there is no any connection with raid disk number, it &amp;apos;s just talk about &amp;quot;Nonrecoverable Read Errors&amp;quot;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rebuild device fault ratio cause by URE:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6TB (if this byte has read 6TB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1-(1-1e-15)^(6e12*8)=0.046829644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8TB &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.06194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.07682&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.09147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0.14775&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;rebuild-device-error-ratio-by-MTBF&quot;&gt;&lt;a href=&quot;#rebuild-device-error-ratio-by-MTBF&quot; class=&quot;headerlink&quot; title=&quot;rebuild device error ratio by MTBF&quot;&gt;&lt;/a&gt;rebuild device error ratio by MTBF&lt;/h4&gt;&lt;p&gt;Mean Time Between Failures (MTBF) (hours) = 1M&lt;br&gt;You could get running time from smartctl&lt;br&gt;I assumed the raid device had running 1,3,5 years&lt;br&gt;365&lt;em&gt;1&lt;/em&gt;24/1000000=0.00876 in each HDD&lt;br&gt;365&lt;em&gt;3&lt;/em&gt;24/1000000=0.02628 in each HDD&lt;br&gt;365&lt;em&gt;5&lt;/em&gt;24/1000000=0.04380 in each HDD&lt;/p&gt;
&lt;h4 id=&quot;Production-environment-data-read-size&quot;&gt;&lt;a href=&quot;#Production-environment-data-read-size&quot; class=&quot;headerlink&quot; title=&quot;Production environment data read size&quot;&gt;&lt;/a&gt;Production environment data read size&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;smartctl &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; scsi /dev/sdz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;number of hours powered up = 9919.17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       Gigabytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       processed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [10^9 bytes]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;:  366268.989&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Read data:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;366274.390/9921.3*24*356*3/8/1000=118.285 (TB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sort each byte &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; capacity of HDD and get the maximum &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; capacity of the byte ? I don &lt;span class=&quot;string&quot;&gt;&#39;t know how to do.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;If the maximum byte of HDD has been read 23.657 TB (20% hot data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1-(1-1e-15)^(7.88568*8)=0.061089 (1y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1-(1-1e-15)^(23.657e12*8)=0.1723 (3y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1-(1-1e-15)^(39.4284*8)=0.270339 (5y)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;Ratio-of-2-devices-damaged-simultaneously-some-case-could-be-cause-data-loss&quot;&gt;&lt;a href=&quot;#Ratio-of-2-devices-damaged-simultaneously-some-case-could-be-cause-data-loss&quot; class=&quot;headerlink&quot; title=&quot;Ratio of 2 devices damaged simultaneously (some case could be cause data loss)&quot;&gt;&lt;/a&gt;Ratio of 2 devices damaged simultaneously (some case could be cause data loss)&lt;/h5&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(0.00876+0.061089)^2=0.004879 (1 years, 20% hot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(0.02628+0.1723)^2=0.039434 (3 years, 20% hot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(0.04380+0.270339)^2=0.0986833 (5 years, 20% hot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Rebuild speed about 1TB/day&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6TB = 144 hours&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8TB = 192 hours&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10TB = 240 hours&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12TB = 288 hours&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;HDD-DWPD&quot;&gt;&lt;a href=&quot;#HDD-DWPD&quot; class=&quot;headerlink&quot; title=&quot;HDD DWPD&quot;&gt;&lt;/a&gt;HDD DWPD&lt;/h3&gt;&lt;p&gt;ST10000VN0004 10TB&lt;br&gt;Workload Rate Limit (WRL) (TB/year) = 180&lt;br&gt;Warranty, Limited (years) = 3&lt;br&gt;DWPD(5y)=540/365/5=0.29589&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://superuser.com/questions/516949/formula-to-calculate-probability-of-unrecoverable-read-error-during-raid-rebuild&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Formula to calculate probability of unrecoverable read error during RAID rebuild&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://queue.acm.org/detail.cfm?id=1670144&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Triple-Parity RAID and Beyond&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.seagate.com/www-content/product-content/ironwolf/files/ironwolf-ds-1904-1-1606us.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;seagate ironwolf spec&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://math.stackexchange.com/questions/853643/how-to-convert-1e11-into-number&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;how to convert 1e11 into number&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;2017-update&quot;&gt;&lt;a href=&quot;#2017-update&quot; class=&quot;headerlink&quot; title=&quot;2017 update&quot;&gt;&lt;/a&gt;2017 update&lt;/h3&gt;&lt;p&gt;First year failure four HDD at the
    
    </summary>
    
      <category term="tips" scheme="http://yoursite.com/categories/tips/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="hdd" scheme="http://yoursite.com/tags/hdd/"/>
    
      <category term="ssd" scheme="http://yoursite.com/tags/ssd/"/>
    
      <category term="raid" scheme="http://yoursite.com/tags/raid/"/>
    
  </entry>
  
  <entry>
    <title>Install blasr in CentOS6</title>
    <link href="http://yoursite.com/2016/07/05/Install-blasr-in-CentOS6/"/>
    <id>http://yoursite.com/2016/07/05/Install-blasr-in-CentOS6/</id>
    <published>2016-07-05T10:16:11.000Z</published>
    <updated>2016-07-05T10:32:06.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Install-GCC-5-2-0&quot;&gt;&lt;a href=&quot;#Install-GCC-5-2-0&quot; class=&quot;headerlink&quot; title=&quot;Install GCC 5.2.0&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://en.librehat.com/blog/build-gcc-5-dot-2-on-rhel-6/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Install GCC 5.2.0&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget http://ftpmirror.gnu.org/gcc/gcc-5.2.0/gcc-5.2.0.tar.bz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf gcc-5.2.0.tar.bz2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://gmplib.org/download/gmp/gmp-6.0.0a.tar.xz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf gmp-6.0.0a.tar.xz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv gmp-6.0.0 gcc-5.2.0/gmp &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget ftp://ftp.gnu.org/gnu/mpc/mpc-1.0.3.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf mpc-1.0.3.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv mpc-1.0.3 gcc-5.2.0/mpc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://www.mpfr.org/mpfr-current/mpfr-3.1.4.tar.xz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf mpfr-3.1.3.tar.xz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv mpfr-3.1.3 gcc-5.2.0/mpfr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir gcc-5.2.0/gcc-build &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; gcc-5.2.0/gcc-build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;../configure --prefix=&lt;span class=&quot;variable&quot;&gt;$HOME&lt;/span&gt;/gcc5 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --disable-multilib &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --enable-languages=c,c++ &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --enable-libstdcxx-threads &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --enable-libstdcxx-time &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --enable-shared &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --enable-__cxa_atexit &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --disable-libunwind-exceptions &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --disable-libada &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --host x86_64-redhat-linux-gnu &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --build x86_64-redhat-linux-gnu &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --with-default-libstdcxx-abi=gcc4-compatible&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make -j 40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Check-C-11-support&quot;&gt;&lt;a href=&quot;#Check-C-11-support&quot; class=&quot;headerlink&quot; title=&quot;Check C++11 support&quot;&gt;&lt;/a&gt;Check C++11 support&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat test.cpp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int main()&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #if __cplusplus==201402L&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        std::cout &amp;lt;&amp;lt; &amp;quot;C++14&amp;quot; &amp;lt;&amp;lt; std::endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #elif __cplusplus==201103L&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        std::cout &amp;lt;&amp;lt; &amp;quot;C++11&amp;quot; &amp;lt;&amp;lt; std::endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        std::cout &amp;lt;&amp;lt; &amp;quot;C++&amp;quot; &amp;lt;&amp;lt; std::endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;g++ -std=c++11 test.cpp -o test&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;./test&lt;br&gt;C++11&lt;/p&gt;
&lt;h3 id=&quot;Install-blasr&quot;&gt;&lt;a href=&quot;#Install-blasr&quot; class=&quot;headerlink&quot; title=&quot;Install blasr&quot;&gt;&lt;/a&gt;Install blasr&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;blasrpath=/xxxxxx/BLASR/blasr_el6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HDF5=/xxxxxx/BLASR/hdf5-1.8.16-linux-centos6-x86_64-gcc447-shared&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LD_LIBRARY_PATH=&lt;span class=&quot;variable&quot;&gt;$blasrpath&lt;/span&gt;/libcpp/alignment:&lt;span class=&quot;variable&quot;&gt;$blasrpath&lt;/span&gt;/libcpp/hdf:&lt;span class=&quot;variable&quot;&gt;$blasrpath&lt;/span&gt;/libcpp/pbdata:&lt;span class=&quot;variable&quot;&gt;$HDF5&lt;/span&gt;/lib/:/xxxxxx/BLASR/blasr_el6/gcc/gcc5_el6/lib64:LD_LIBRARY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=/xxxxxx/BLASR/blasr_el6/gcc/gcc5_el6/bin:&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure.py --shared --sub --no-pbbam HDF5_INCLUDE=&lt;span class=&quot;variable&quot;&gt;$HDF5&lt;/span&gt;/include/ HDF5_LIB=&lt;span class=&quot;variable&quot;&gt;$HDF5&lt;/span&gt;/lib&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make configure-submodule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make build-submodule&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make blasr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./blasr --version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#benchamrk cpu&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;time ./blasr /xxxxxx/BLASR/error_corrected_reads_7.fa /xxxxxx/BLASR/platypus.v2.fa.gapfilled.fa --sa /xxxxxx/BLASR/platypus.v2.fa.gapfilled.fa.blasr_sa --minMatch 11 --maxAnchorsPerPosition 500 --nproc $(cat /proc/cpuinfo | grep MHz -c) &amp;gt; /dev/zero&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Install-GCC-5-2-0&quot;&gt;&lt;a href=&quot;#Install-GCC-5-2-0&quot; class=&quot;headerlink&quot; title=&quot;Install GCC 5.2.0&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://en.librehat.com/blo
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="bio" scheme="http://yoursite.com/tags/bio/"/>
    
      <category term="software" scheme="http://yoursite.com/tags/software/"/>
    
  </entry>
  
  <entry>
    <title>Monitor ssd device</title>
    <link href="http://yoursite.com/2016/07/04/Monitor-ssd-device/"/>
    <id>http://yoursite.com/2016/07/04/Monitor-ssd-device/</id>
    <published>2016-07-04T02:01:10.000Z</published>
    <updated>2016-07-05T10:35:51.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Monitor-Intel-SATA-SSD&quot;&gt;&lt;a href=&quot;#Monitor-Intel-SATA-SSD&quot; class=&quot;headerlink&quot; title=&quot;Monitor Intel SATA SSD&quot;&gt;&lt;/a&gt;Monitor Intel SATA SSD&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;smartctl &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; /dev/sdaa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233 Media_Wearout_Indicator 0x0032   097   097   000    Old_age   Always       -       0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241 Host_Writes_32MiB       0x0032   100   100   000    Old_age   Always       -       24439&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242 Host_Reads_32MiB        0x0032   100   100   000    Old_age   Always       -       4275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243 NAND_Writes_32MiB       0x0032   100   100   000    Old_age   Always       -       40857&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=1M count=1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241 Host_Writes_32MiB       0x0032   100   100   000    Old_age   Always       -       24471&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242 Host_Reads_32MiB        0x0032   100   100   000    Old_age   Always       -       4275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243 NAND_Writes_32MiB       0x0032   100   100   000    Old_age   Always       -       40857&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;You can see write 32*32=1024M write to ssd. the value is “MB”.&lt;/p&gt;
&lt;h3 id=&quot;Samsung-SATA-SSD&quot;&gt;&lt;a href=&quot;#Samsung-SATA-SSD&quot; class=&quot;headerlink&quot; title=&quot;Samsung SATA SSD&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.smartmontools.org/ticket/661&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Samsung SATA SSD&lt;/a&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;251 NAND_Writes             -O--CK   100   100   000    -    7546253904&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            ||||||_ K auto-keep&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            |||||__ C event count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            ||||___ R error rate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            |||____ S speed/performance&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            ||_____ O updated online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            |______ P prefailure warning&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;NVME-Intel-SSD&quot;&gt;&lt;a href=&quot;#NVME-Intel-SSD&quot; class=&quot;headerlink&quot; title=&quot;NVME Intel SSD&quot;&gt;&lt;/a&gt;NVME Intel SSD&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;isdct  show -smart -intelssd 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description : NAND Bytes Written&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID : F4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Normalized : 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Raw : 6142760&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- F5 -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description : Host Bytes Written&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID : F5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Normalized : 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Raw : 2790072&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt; bs=1M count=1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description : NAND Bytes Written&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID : F4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Normalized : 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Raw : 6142930&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- F5 -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Description : Host Bytes Written&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ID : F5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Normalized : 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Raw : 2790104&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Raw value of Host Bytes Written improved 32&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Monitor-Intel-SATA-SSD&quot;&gt;&lt;a href=&quot;#Monitor-Intel-SATA-SSD&quot; class=&quot;headerlink&quot; title=&quot;Monitor Intel SATA SSD&quot;&gt;&lt;/a&gt;Monitor Intel SATA S
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="ssd" scheme="http://yoursite.com/tags/ssd/"/>
    
  </entry>
  
  <entry>
    <title>Main board SATA port bottle neck</title>
    <link href="http://yoursite.com/2016/06/16/Main-board-SATA-bottle-neck/"/>
    <id>http://yoursite.com/2016/06/16/Main-board-SATA-bottle-neck/</id>
    <published>2016-06-16T07:35:11.000Z</published>
    <updated>2016-06-16T07:41:45.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;/img/Dt9p6.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;DMI 2.0 2 GB/s&lt;br&gt;DMI 3.0 3.93 GB/s&lt;br&gt;SATA SSD 500MB/s x 4/8 = 2000/4000MB/s&lt;br&gt;&lt;a href=&quot;http://electronics.stackexchange.com/questions/219440/why-do-cpus-typically-connect-to-only-one-bus/219446&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/Dt9p6.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;DMI 2.0 2 GB/s&lt;br&gt;DMI 3.0 3.93 GB/s&lt;br&gt;SATA SSD 500MB/s x 4/8 = 2000/4000MB/s&lt;br&gt;&lt;a href=&quot;http://ele
    
    </summary>
    
      <category term="Architecture" scheme="http://yoursite.com/categories/Architecture/"/>
    
    
      <category term="hardware" scheme="http://yoursite.com/tags/hardware/"/>
    
  </entry>
  
  <entry>
    <title>Benchmark ConnectX®-3 Pro VMA</title>
    <link href="http://yoursite.com/2016/06/03/Benchmark_ConnectX%C2%AE_3_Pro/"/>
    <id>http://yoursite.com/2016/06/03/Benchmark_ConnectX®_3_Pro/</id>
    <published>2016-06-03T03:22:42.000Z</published>
    <updated>2016-06-14T08:55:45.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;RDMA-support&quot;&gt;&lt;a href=&quot;#RDMA-support&quot; class=&quot;headerlink&quot; title=&quot;RDMA support&quot;&gt;&lt;/a&gt;RDMA support&lt;/h3&gt;&lt;p&gt;RDMA allows for communication between systems but can bypass the overhead associated with the operating system kernel, so applications have reduced latency and much lower CPU utilization.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Mellanox/libvma&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;libvma&lt;/a&gt;&lt;br&gt;Linux user space library for network socket acceleration based on RDMA compatible network adaptors&lt;/p&gt;
&lt;p&gt;socket ip layer ?&lt;/p&gt;
&lt;h3 id=&quot;Update-driver&quot;&gt;&lt;a href=&quot;#Update-driver&quot; class=&quot;headerlink&quot; title=&quot;Update driver&quot;&gt;&lt;/a&gt;Update driver&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt install module-init-tools dkms&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe -r mlx4_en&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe -r mlx4_core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modprobe mlx4_en mlx4_core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;modinfo mlx4_core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename:       /lib/modules/4.4.0-22-generic/updates/dkms/mlx4_core.ko&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version:        3.3-1.0.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;license:        Dual BSD/GPL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;description:    Mellanox ConnectX HCA low-level driver&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;author:         Roland Dreier&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;srcversion:     E63C21909524B057DF41E97&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;NIC-info&quot;&gt;&lt;a href=&quot;#NIC-info&quot; class=&quot;headerlink&quot; title=&quot;NIC info&quot;&gt;&lt;/a&gt;NIC info&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -i enp5s0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;driver: mlx4_en&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version: 3.3-1.0.0 (31 May 2016)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;firmware-version: 2.36.5000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;expansion-rom-version: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bus-info: 0000:05:00.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-statistics: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-test: yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-eeprom-access: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-register-dump: no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;supports-priv-flags: yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;NIC-offload&quot;&gt;&lt;a href=&quot;#NIC-offload&quot; class=&quot;headerlink&quot; title=&quot;NIC offload&quot;&gt;&lt;/a&gt;NIC offload&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Features&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;TSO (TCP Segmentation Offload)&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GSO (Generic Segmentation Offload)&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GRO (Generic Receive Offload)&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rx-checksumming&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tx-checksumming&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scatter-gather&lt;/td&gt;
&lt;td&gt;on&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool --offload enp5s0 rx on tx on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Actual changes:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-checksumming: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-checksumming: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-checksum-ipv4: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-checksum-ipv6: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp-segmentation-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-tcp-segmentation: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-tcp6-segmentation: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -k enp4s0d1 | grep -v fixed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Features &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; enp4s0d1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-checksumming: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-checksumming: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-checksum-ipv4: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-checksum-ipv6: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scatter-gather: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-scatter-gather: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp-segmentation-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-tcp-segmentation: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tx-tcp6-segmentation: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;generic-segmentation-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;generic-receive-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-vlan-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-vlan-offload: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ntuple-filters: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;receive-hashing: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-nocache-copy: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;loopback: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-fcs: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-vlan-stag-hw-insert: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-vlan-stag-hw-parse: on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#enable TSO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -K enp4s0 tso on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -K enp4s0 gso off&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Transmit:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TSO&lt;/li&gt;
&lt;li&gt;GSO  (software ?)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Receive:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GRO&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Interrupt mitigation or interrupt coalescing&lt;/p&gt;
&lt;p&gt;rx-frames[-irq] rx-usecs[-irq] tx-frames[-irq] tx-usecs[-irq]&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://serverfault.com/questions/278756/interpreting-ethtool-coalesce-output&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The frames parameters specify how many packets are received/transmitted before generating an interrupt. The usecs parameters specify how many microseconds after at least 1 packet is received/transmitted before generating an interrupt. The [-irq] parameters are the corresponding delays in updating the status when the interrupt is disabled.&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -c enp4s0d1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Coalesce parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; enp4s0d1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Adaptive RX: off  TX: off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;stats-block-usecs: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sample-interval: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkt-rate-low: 400000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pkt-rate-high: 450000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-usecs: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-frames: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-usecs-irq: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-frames-irq: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-usecs: 8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-frames: 16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-usecs-irq: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-frames-irq: 256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-usecs-low: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-frame-low: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-usecs-low: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-frame-low: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-usecs-high: 128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rx-frame-high: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-usecs-high: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tx-frame-high: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#reduce lantency,improve cpu usage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -C enp5s0 adaptive-rx off rx-usecs 0 rx-frames 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -C enp5s0d1 adaptive-rx off rx-usecs 0 rx-frames 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;if you need to improve value of rx-usecs, improve latency and througput, and suggestion improve&lt;br&gt;net.ipv4.tcp_tso_win_divisor = 30 (default 3) too.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://digital.ni.com/public.nsf/allkb/65B0708FE161D8C0852563DA00620887&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;What is Scatter-Gather DMA&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://lwn.net/Articles/358910/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Replace LRO with GRO&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Direct_memory_access&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scatter-gather or vectored I/O DMA allows the transfer of data to and from multiple memory areas in a single DMA transaction. It is equivalent to the chaining together of multiple simple DMA requests. The motivation is to off-load multiple input/output interrupt and data copy tasks from the CPU&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;About-GSO&quot;&gt;&lt;a href=&quot;#About-GSO&quot; class=&quot;headerlink&quot; title=&quot;About GSO&quot;&gt;&lt;/a&gt;About GSO&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://lwn.net/Articles/188489/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Many people have observed that a lot of the savings in TSO come from traversing the networking stack once rather than many times for each super-packet.  These savings can be obtained without hardware support.&lt;/a&gt;&lt;br&gt;[GSO like TSO is only effective if the MTU is significantly less than the&lt;br&gt;maximum value of 64K.  So only the case where the MTU was set to 1500 is&lt;br&gt;of interest.&lt;/p&gt;
&lt;p&gt;TSO 是使得网络协议栈能够将大块 buffer 推送至网卡，然后网卡执行分片工作，这样减轻了 CPU 的负荷，但 TSO 需要硬件来实现分片功能；而性能上的提高，主要是因为延缓分片而减轻了 CPU 的负载，因此，可以考虑将 TSO 技术一般化，因为其本质实际是延缓分片，这种技术，在 Linux 中被叫做 GSO(Generic Segmentation Offload)，它比 TSO 更通用，原因在于它不需要硬件的支持分片就可使用，对于支持 TSO 功能的硬件，则先经过 GSO 功能，然后使用网卡的硬件分片能力执行分片；而对于不支持 TSO 功能的网卡，将分片的执行，放在了将数据推送的网卡的前一刻，也就是在调用驱动的 xmit 函数前。(&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/l-cn-network-pt/#icomments&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.ibm.com/developerworks/cn/linux/l-cn-network-pt/#icomments&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;if mtu 1500, kernel will split large data to 1448 bytes per packages , after enable gso (hardware), There are some 2896 bytes packages in tcpdump, and split operation in nic device.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Goodput&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;20 bytes of IPv4 header information and 20 bytes of TCP header information,Linux and Mac OS are further limited to 1448 bytes as they also carry a 12-byte time stamp&lt;/a&gt;&lt;br&gt;1500-20-20-12=1448&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://sandilands.info/sgordon/images/wireshark-capture-1.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://sandilands.info/sgordon/images/wireshark-capture-2.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;a href=&quot;http://sandilands.info/sgordon/segmentation-offloading-with-wireshark-and-ethtool&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Segmentation and Checksum Offloading: Turning Off with ethtool&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;DMA-Ring-Buffer-Sizes-and-statistics&quot;&gt;&lt;a href=&quot;#DMA-Ring-Buffer-Sizes-and-statistics&quot; class=&quot;headerlink&quot; title=&quot;DMA Ring Buffer Sizes and statistics&quot;&gt;&lt;/a&gt;DMA Ring Buffer Sizes and statistics&lt;/h4&gt;&lt;p&gt;The pre-set maximum is 8192 packets. The default is 256 packets. For purposes of LAN testing, using the smallest possible ring size provides the best results&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -S enp5s0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ethtool -S eth0 | grep rx_no_buffer_count&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     rx_no_buffer_count: 100590&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ethtool -S eth0 | grep rx_missed_errors  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     rx_missed_errors: 9188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reduce buffer,&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; this old machine, 4096 is maxinum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#1GbE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -G eth0 rx 2048 tx 2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g eth0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; eth0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		2048&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#10GbE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ethtool -g enp4s0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ring parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; enp4s0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pre-set maximums:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Current hardware settings:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:		1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Mini:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX Jumbo:	0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:		512&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Enable-RSS-RFS&quot;&gt;&lt;a href=&quot;#Enable-RSS-RFS&quot; class=&quot;headerlink&quot; title=&quot;Enable RSS/RFS&quot;&gt;&lt;/a&gt;Enable RSS/RFS&lt;/h4&gt;&lt;p&gt;RSS Contemporary NICs support multiple receive and transmit descriptor queues (multi-queue). you can show it from /etc/interrupt&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Performance_Tuning_Guide/network-rfs.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Receive Flow Steering (RFS) extends RPS behavior to increase the CPU cache hit rate and thereby reduce network latency&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Mellanox_OFED_Linux_User_Manual_v2.2-1.0.1.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Enabling the RFS requires enabling the ‘ntuple’ flag via the ethtool,RFS requires the kernel to be compiled with the CONFIG_RFS_ACCEL option. This options is available in kernels 2.6.39 and above. Furthermore, RFS requires Device Managed Flow Steering support.&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K enp5s0 ntuple on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -K enp5s0d1 ntuple on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;RSS-RFS-XPS&quot;&gt;&lt;a href=&quot;#RSS-RFS-XPS&quot; class=&quot;headerlink&quot; title=&quot;RSS RFS XPS&quot;&gt;&lt;/a&gt;RSS RFS XPS&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Mellanox_OFED_Linux_Release_Notes_3_1-1_0_3.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Added Transmit Packet Steering (XPS) support&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Mellanox_OFED_Linux_Release_Notes_3_1-1_0_3.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFS does not support UDP&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Mellanox_OFED_Linux_Release_Notes_3_1-1_0_3.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RSS support of fragmented IP datagram&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Mellanox_OFED_Linux_User_Manual_v2.2-1.0.1.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;XOR RSS Hash Function&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;Enable-Receive-Packet-Steering&quot;&gt;&lt;a href=&quot;#Enable-Receive-Packet-Steering&quot; class=&quot;headerlink&quot; title=&quot;Enable Receive Packet Steering&quot;&gt;&lt;/a&gt;Enable Receive Packet Steering&lt;/h4&gt;&lt;p&gt;Maybe mellanox not support hardware acceleration&lt;br&gt;Receive Packet Steering (RPS) is logically a software implementation of RSS&lt;/p&gt;
&lt;p&gt;RPS has some advantages over RSS: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it can be used with any NIC,&lt;/li&gt;
&lt;li&gt;software filters can easily be added to hash over new protocols,&lt;/li&gt;
&lt;li&gt;it does not increase hardware device interrupt rate (although it doesintroduce inter-processor interrupts (IPIs)).&lt;br&gt;&lt;a href=&quot;https://www.kernel.org/doc/Documentation/networking/scaling.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;kernel networking scaling&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%x\n&#39;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$((2#10101)&lt;/span&gt;)&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# core 0,2,4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%x\n&#39;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$((2#10101000000)&lt;/span&gt;)&quot;&lt;/span&gt; core 6,8,10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;540&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls /sys/class/net/enp5s0/queues/ | grep rx-);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 15 &amp;gt; /sys/class/net/enp5s0/queues/&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/rps_cpus;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cat /sys/class/net/enp5s0/queues/&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/rps_cpus;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(ls /sys/class/net/enp5s0d1/queues/ | grep rx-);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 540 &amp;gt; /sys/class/net/enp5s0/queues/&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/rps_cpus;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cat /sys/class/net/enp5s0/queues/&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;/rps_cpus;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Enable-autonegotiation&quot;&gt;&lt;a href=&quot;#Enable-autonegotiation&quot; class=&quot;headerlink&quot; title=&quot;Enable autonegotiation&quot;&gt;&lt;/a&gt;Enable autonegotiation&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ethtool -A enp5s0 autoneg on &lt;span class=&quot;comment&quot;&gt;#could not work for mellanox&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Cannot &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; device pause parameters: Invalid argument&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -A enp5s0 rx on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool -A enp5s0 tx on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ethtool &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt;  &lt;span class=&quot;variable&quot;&gt;$nic0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Pause parameters &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; enp5s0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Autonegotiate:  off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RX:             on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TX:             on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;CPU-info&quot;&gt;&lt;a href=&quot;#CPU-info&quot; class=&quot;headerlink&quot; title=&quot;CPU info&quot;&gt;&lt;/a&gt;CPU info&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;root@ubuntu-16:/sys/class/net/enp5s0/device&lt;span class=&quot;comment&quot;&gt;# cat /sys/class/net/enp5s0/device/numa_node &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;root@ubuntu-16:/sys/class/net/enp5s0d1/device&lt;span class=&quot;comment&quot;&gt;# cat /sys/class/net/enp5s0d1/device/numa_node &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/class/net/enp5s0/device/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;_cpus&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0000,00000000,00000000,00000000,00000555&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#same with&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%x\n&#39;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$((2#10101010101)&lt;/span&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;555&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# CPU Tubro mode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3200000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Disable cstate in grub.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;intel_idle.max_cstate=0 processor.max_cstate=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# disable irqbalance&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/irqbalance stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ ok ] Stopping irqbalance (via systemctl): irqbalance.service.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install numactl collectl irqstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt install numactl collectl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/lanceshelton/irqstat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#lscpu&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Architecture:          x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU op-mode(s):        32-bit, 64-bit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Byte Order:            Little Endian&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU(s):                12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;On-line CPU(s) list:   0-11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Thread(s) per core:    1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Core(s) per socket:    6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Socket(s):             2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NUMA node(s):          2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Vendor ID:             GenuineIntel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU family:            6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Model:                 63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Model name:            Intel(R) Xeon(R) CPU E5-2620 v3 @ 2.40GHz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Stepping:              2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU MHz:               1200.187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU max MHz:           3200.0000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CPU min MHz:           1200.0000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BogoMIPS:              4795.72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Virtualization:        VT-x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L1d cache:             32K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L1i cache:             32K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L2 cache:              256K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L3 cache:              15360K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NUMA node0 CPU(s):     0,2,4,6,8,10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NUMA node1 CPU(s):     1,3,5,7,9,11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;That means you ‘d better use cpus in numa node0, I guess, if numa node1 read/write data to the PCIE device, the data has to pass through QPI(Intel QuickPath Interconnect)&lt;br&gt;In my benchmark ,numactl will bind all applications on numa node0.&lt;/p&gt;
&lt;h3 id=&quot;OPS&quot;&gt;&lt;a href=&quot;#OPS&quot; class=&quot;headerlink&quot; title=&quot;OPS&quot;&gt;&lt;/a&gt;OPS&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Disabled hyper thread    &lt;/li&gt;
&lt;li&gt;Enable turbo mode&lt;/li&gt;
&lt;li&gt;Enable numa, preferred each node&lt;/li&gt;
&lt;li&gt;Disabled irqbalance&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;CPU-Affinity&quot;&gt;&lt;a href=&quot;#CPU-Affinity&quot; class=&quot;headerlink&quot; title=&quot;CPU Affinity&quot;&gt;&lt;/a&gt;CPU Affinity&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%x\n&#39;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$((2#10101010101)&lt;/span&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;555 &lt;span class=&quot;comment&quot;&gt;#numa_node0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk -F: &lt;span class=&quot;string&quot;&gt;&#39;$0~/enp5/ || $0~/mlx4/ &amp;#123;print $1&amp;#125;&#39;&lt;/span&gt; /proc/interrupts | &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt; line&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 555 &amp;gt; /proc/irq/&lt;span class=&quot;variable&quot;&gt;$line&lt;/span&gt;/smp_affinity &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;sysctl-conf-for-ipv4&quot;&gt;&lt;a href=&quot;#sysctl-conf-for-ipv4&quot; class=&quot;headerlink&quot; title=&quot;sysctl.conf for ipv4&quot;&gt;&lt;/a&gt;sysctl.conf for ipv4&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_sack = 0 &lt;span class=&quot;comment&quot;&gt;#Disable the TCP timestamps option for better CPU utilization&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_budget = 300 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_timestamps=0 &lt;span class=&quot;comment&quot;&gt;#Disable the TCP timestamps option for better CPU utilization&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.netdev_max_backlog=250000 &lt;span class=&quot;comment&quot;&gt;#Increase the maximum length of processor input queues&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Increase the TCP maximum and default buffer sizes &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.rmem_default=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.wmem_default=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.core.optmem_max=4194304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Increase memory thresholds to prevent packet dropping&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_rmem=&lt;span class=&quot;string&quot;&gt;&quot;4096 87380 4194304&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_wmem=&lt;span class=&quot;string&quot;&gt;&quot;4096 65536 4194304&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_low_latency=1 &lt;span class=&quot;comment&quot;&gt;#Enable low latency mode for TCP&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_adv_win_scale=1  &lt;span class=&quot;comment&quot;&gt;#A value of 1 means the socket buffer will be divided evenly between TCP windows size and application.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;txqueueleng&quot;&gt;&lt;a href=&quot;#txqueueleng&quot; class=&quot;headerlink&quot; title=&quot;txqueueleng&quot;&gt;&lt;/a&gt;txqueueleng&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;https://www.nas.nasa.gov/assets/pdf/papers/NAS_Technical_Report_NAS-2014-01.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;This queue parameter is mostly applicable for high-speed WAN transfers. For low-latency networks, the default setting of 1000 is sufficient. The receiving end is configured with the sysctl setting net.core.netdev_max_backlog. The default for this setting is also 1000 and does not need to be modified unless there is significant latency.&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp5s0 txqueuelen 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev enp5s0d1 txqueuelen 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ip link &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; dev bond0 txqueuelen 2000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;Enable-jumbo-frames&quot;&gt;&lt;a href=&quot;#Enable-jumbo-frames&quot; class=&quot;headerlink&quot; title=&quot;Enable jumbo frames&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://ehealth-aussie.blogspot.com/2011/11/in-depth-look-into-path-mtu-discovery.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Enable jumbo frames&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_mtu_probing = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.tcp_base_mss = 512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;net.ipv4.ip_no_pmtu_disc = 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;https://dl.dropboxusercontent.com/u/4919408/tec/blog/net/net_kernel/tcp_packet_reception.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://dl.dropboxusercontent.com/u/4919408/tec/blog/net/net_kernel/tcp_packet_transmission.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;Configure-libvma&quot;&gt;&lt;a href=&quot;#Configure-libvma&quot; class=&quot;headerlink&quot; title=&quot;Configure libvma&quot;&gt;&lt;/a&gt;Configure libvma&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Mellanox/libvma/wiki/Build-Instruction&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Install libvma in linux&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/Mellanox/libvma/blob/master/src/vma/util/libvma.conf#L22&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;libvma.conf&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://community.mellanox.com/docs/DOC-2431&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Using ConnectX-3 Pro with VMA over Ubuntu 16.04 Inbox Driver&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/page/products_dyn?product_family=26&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mellanox OpenFabrics Enterprise Distribution for Linux MLNX_OFED&lt;/a&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; apt-get install dkms infiniband-diags libibverbs* ibacm librdmacm* libmlx4* libmlx5* mstflint libibcm.* libibmad.* libibumad* opensm srptools libmlx4-dev librdmacm-dev rdmacm-utils ibverbs-utils perftest vlan ibutils&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; apt-get install libnl-3-200 libnl-route-3-200 libnl-route-3-dev libnl-utils&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/Mellanox/libvma.git $ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; libvma &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ./autogen.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ./configure --prefix=/usr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; make -j 12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ldconfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; options mlx4_core &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_num_mgm_entry_size=-1 &amp;gt; /etc/modprobe.d/mlnx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 1000000000 &amp;gt; /proc/sys/kernel/shmmax&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; 800 &amp;gt; /proc/sys/vm/nr_hugepage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; unlimited&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; LD_PRELOAD=libvma.so &amp;lt;&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;_app&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ cat /etc/modprobe.d/mlx4.conf &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mlx4_core gets automatically loaded, load mlx4_en also (LP: #1115710)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;softdep mlx4_core post: mlx4_en&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#options mlx4_en inline_thold=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;options mlx4_core port_&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;_array=2,2 num_vfs=2 probe_vf=0 &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt;_64b_cqe_eqe=0  &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_num_mgm_entry_size=-1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;Benchmark&quot;&gt;&lt;a href=&quot;#Benchmark&quot; class=&quot;headerlink&quot; title=&quot;Benchmark&quot;&gt;&lt;/a&gt;Benchmark&lt;/h3&gt;&lt;h4 id=&quot;Architecture&quot;&gt;&lt;a href=&quot;#Architecture&quot; class=&quot;headerlink&quot; title=&quot;Architecture&quot;&gt;&lt;/a&gt;Architecture&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/img/mellanox_network.jpg&quot; alt=&quot;Network_Arch&quot;&gt;&lt;br&gt;CPU is not bottle neck, 2620 was enough for quad/dual 10GbE&lt;/p&gt;
&lt;h4 id=&quot;sockperf&quot;&gt;&lt;a href=&quot;#sockperf&quot; class=&quot;headerlink&quot; title=&quot;sockperf&quot;&gt;&lt;/a&gt;sockperf&lt;/h4&gt;&lt;p&gt;sockperf: == version #2.7-53.git6f0f32c1fb02 ==&lt;br&gt;MTU 1500&lt;br&gt;single core server/client, single port&lt;/p&gt;
&lt;p&gt;./sockperf server –tcp -p 11111&lt;br&gt;./sockperf server -p 11111 #udp&lt;br&gt;numactl -C 2 /opt/sockperf/bin/sockperf tp -m 256  -i 192.168.12.201 -p 11111 -t 20&lt;br&gt;numactl -C 2 /opt/sockperf/bin/sockperf pp -m 256  -i 192.168.12.201 -p 11111 -t 20&lt;/p&gt;
&lt;p&gt;Throughput (MBps)&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;TCP TP MBps&lt;/th&gt;
&lt;th&gt;TCP TP VMA&lt;/th&gt;
&lt;th&gt;UDP TP&lt;/th&gt;
&lt;th&gt;UDP TP VMA&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;289.160&lt;/td&gt;
&lt;td&gt;695.808&lt;/td&gt;
&lt;td&gt;78.632&lt;/td&gt;
&lt;td&gt;766.952&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;420.863&lt;/td&gt;
&lt;td&gt;1125.157&lt;/td&gt;
&lt;td&gt;154.019&lt;/td&gt;
&lt;td&gt;1055.240&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;1129.297&lt;/td&gt;
&lt;td&gt;1130.277&lt;/td&gt;
&lt;td&gt;301.421&lt;/td&gt;
&lt;td&gt;1119.500&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;1131.170&lt;/td&gt;
&lt;td&gt;1130.346&lt;/td&gt;
&lt;td&gt;381.049&lt;/td&gt;
&lt;td&gt;1123.660&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4096&lt;/td&gt;
&lt;td&gt;1131.160&lt;/td&gt;
&lt;td&gt;1130.387&lt;/td&gt;
&lt;td&gt;564.496&lt;/td&gt;
&lt;td&gt;1141.008&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Package num (msg/s)&lt;br&gt;msg/s=(send+rec msg) per second&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;TCP PP&lt;/th&gt;
&lt;th&gt;TCP PP VMA&lt;/th&gt;
&lt;th&gt;TCP PP 3x&lt;/th&gt;
&lt;th&gt;TCP PP 3x VMA&lt;/th&gt;
&lt;th&gt;Intel X540&lt;/th&gt;
&lt;th&gt;ConnectX-3&lt;/th&gt;
&lt;th&gt;ConnectX-3 VMA&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;61813&lt;/td&gt;
&lt;td&gt;261712&lt;/td&gt;
&lt;td&gt;181845&lt;/td&gt;
&lt;td&gt;702355&lt;/td&gt;
&lt;td&gt;53663&lt;/td&gt;
&lt;td&gt;63698&lt;/td&gt;
&lt;td&gt;258556&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;65832&lt;/td&gt;
&lt;td&gt;225369&lt;/td&gt;
&lt;td&gt;154585&lt;/td&gt;
&lt;td&gt;615563&lt;/td&gt;
&lt;td&gt;53414&lt;/td&gt;
&lt;td&gt;52425&lt;/td&gt;
&lt;td&gt;223479&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;51411&lt;/td&gt;
&lt;td&gt;182045&lt;/td&gt;
&lt;td&gt;158244&lt;/td&gt;
&lt;td&gt;503944&lt;/td&gt;
&lt;td&gt;53067&lt;/td&gt;
&lt;td&gt;56812&lt;/td&gt;
&lt;td&gt;179406&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;40918&lt;/td&gt;
&lt;td&gt;130620&lt;/td&gt;
&lt;td&gt;130946&lt;/td&gt;
&lt;td&gt;353721&lt;/td&gt;
&lt;td&gt;36214&lt;/td&gt;
&lt;td&gt;35772&lt;/td&gt;
&lt;td&gt;127449&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AVG Latency(us)                                                                                                       &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;TCP PP&lt;/th&gt;
&lt;th&gt;TCP PP VMA&lt;/th&gt;
&lt;th&gt;TCP PP 3x&lt;/th&gt;
&lt;th&gt;TCP PP 3x VMA&lt;/th&gt;
&lt;th&gt;Intel X540&lt;/th&gt;
&lt;th&gt;ConnectX-3&lt;/th&gt;
&lt;th&gt;ConnectX-3 VMA&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;14.611&lt;/td&gt;
&lt;td&gt;3.798&lt;/td&gt;
&lt;td&gt;16.7707&lt;/td&gt;
&lt;td&gt;4.268&lt;/td&gt;
&lt;td&gt;17.072&lt;/td&gt;
&lt;td&gt;15.644&lt;/td&gt;
&lt;td&gt;3.845&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;16.162&lt;/td&gt;
&lt;td&gt;4.434&lt;/td&gt;
&lt;td&gt;19.8913&lt;/td&gt;
&lt;td&gt;4.866&lt;/td&gt;
&lt;td&gt;18.667&lt;/td&gt;
&lt;td&gt;19.013&lt;/td&gt;
&lt;td&gt;4.456&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;17.433&lt;/td&gt;
&lt;td&gt;5.455&lt;/td&gt;
&lt;td&gt;30.7607&lt;/td&gt;
&lt;td&gt;5.9526&lt;/td&gt;
&lt;td&gt;18.789&lt;/td&gt;
&lt;td&gt;17.547&lt;/td&gt;
&lt;td&gt;5.576&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;24.768&lt;/td&gt;
&lt;td&gt;7.849&lt;/td&gt;
&lt;td&gt;28.7957&lt;/td&gt;
&lt;td&gt;8.49&lt;/td&gt;
&lt;td&gt;27.556&lt;/td&gt;
&lt;td&gt;27.347&lt;/td&gt;
&lt;td&gt;7.857&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;UDP-performance&quot;&gt;&lt;a href=&quot;#UDP-performance&quot; class=&quot;headerlink&quot; title=&quot;UDP performance&quot;&gt;&lt;/a&gt;UDP performance&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;UDP PP&lt;/th&gt;
&lt;th&gt;UDP PP VMA &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;65921&lt;/td&gt;
&lt;td&gt;311823     &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;68160&lt;/td&gt;
&lt;td&gt;261528     &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;62480&lt;/td&gt;
&lt;td&gt;203539     &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1472&lt;/td&gt;
&lt;td&gt;62233&lt;/td&gt;
&lt;td&gt;171311     &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;49457&lt;/td&gt;
&lt;td&gt;46734      &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;UDP PP&lt;/th&gt;
&lt;th&gt;UDP PP VMA &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;9.474&lt;/td&gt;
&lt;td&gt;3.201       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;9.635&lt;/td&gt;
&lt;td&gt;3.757       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;10.800&lt;/td&gt;
&lt;td&gt;4.822       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1472&lt;/td&gt;
&lt;td&gt;16.016&lt;/td&gt;
&lt;td&gt;5.815           &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;20.161&lt;/td&gt;
&lt;td&gt;19.953      &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;netperf&quot;&gt;&lt;a href=&quot;#netperf&quot; class=&quot;headerlink&quot; title=&quot;netperf&quot;&gt;&lt;/a&gt;netperf&lt;/h4&gt;&lt;p&gt;numactl -C 2 netserver -D  -4 -v 2 -p 5000 -f -L 192.168.12.201&lt;br&gt;numactl -N 0 ./netperf -n 6 -p 5000 -H 192.168.12.201 -c -C -t TCP_STREAM -l 15 -T 2,2 – -m $((2&lt;strong&gt;$i))&lt;br&gt;numactl -N 0 ./netperf -n 6 -p 5000 -H 192.168.12.201 -c -C -t TCP_RR -l 20 -T 2,2 – -m $((2&lt;/strong&gt;$i))&lt;br&gt;numactl -N 0 ./netperf -n 6 -p 5000 -H 192.168.12.201 -c -C -t UDP_RR -l 20 -T 2,2 – -m $((2**$i))&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;msg size bytes&lt;/th&gt;
&lt;th&gt;TCP RR&lt;/th&gt;
&lt;th&gt;TCP RR VMA&lt;/th&gt;
&lt;th&gt;UDP RR&lt;/th&gt;
&lt;th&gt;UDP RR VMA &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;43428.69&lt;/td&gt;
&lt;td&gt;129390.97&lt;/td&gt;
&lt;td&gt;49805.09&lt;/td&gt;
&lt;td&gt;146545.15  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;512&lt;/td&gt;
&lt;td&gt;37705.07&lt;/td&gt;
&lt;td&gt;107808.85&lt;/td&gt;
&lt;td&gt;46393.12&lt;/td&gt;
&lt;td&gt;125839.11  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1024&lt;/td&gt;
&lt;td&gt;35005.28&lt;/td&gt;
&lt;td&gt;90787.06&lt;/td&gt;
&lt;td&gt;39591.57&lt;/td&gt;
&lt;td&gt;98669.99   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2048&lt;/td&gt;
&lt;td&gt;23688.22&lt;/td&gt;
&lt;td&gt;63992.85&lt;/td&gt;
&lt;td&gt;22633.36&lt;/td&gt;
&lt;td&gt;19961.70   &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4096&lt;/td&gt;
&lt;td&gt;22933.14&lt;/td&gt;
&lt;td&gt;51851.17&lt;/td&gt;
&lt;td&gt;20772.47&lt;/td&gt;
&lt;td&gt;18604.53   &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;redis-benchmark&quot;&gt;&lt;a href=&quot;#redis-benchmark&quot; class=&quot;headerlink&quot; title=&quot;redis-benchmark&quot;&gt;&lt;/a&gt;redis-benchmark&lt;/h4&gt;&lt;p&gt;LD_PRELOAD=libvma.so VMA_STATS_FD_NUM=500 redis-server –port 7777  –protected-mode no –maxmemory 12000mb –maxmemory-samples 10 –maxmemory-policy allkeys-lru&lt;br&gt;numactl -C 2 redis-benchmark -r 10000000 -n 20000000 -t get,set,lpush,lpop -P 16 -q -h 192.168.12.201 -p 7777 -d 16&lt;/p&gt;
&lt;p&gt;set/get/lpush/lpop records/s&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;size bytes&lt;/th&gt;
&lt;th&gt;set&lt;/th&gt;
&lt;th&gt;get&lt;/th&gt;
&lt;th&gt;lpush&lt;/th&gt;
&lt;th&gt;lpop&lt;/th&gt;
&lt;th&gt;set vma&lt;/th&gt;
&lt;th&gt;get vma&lt;/th&gt;
&lt;th&gt;lpush vma&lt;/th&gt;
&lt;th&gt;lpop vma   &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;909628.44&lt;/td&gt;
&lt;td&gt;995668.88&lt;/td&gt;
&lt;td&gt;1125492.38&lt;/td&gt;
&lt;td&gt;1092836.38&lt;/td&gt;
&lt;td&gt;1051801.25&lt;/td&gt;
&lt;td&gt;1383604.25&lt;/td&gt;
&lt;td&gt;1427857.50&lt;/td&gt;
&lt;td&gt;1412230.00 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;877077.62&lt;/td&gt;
&lt;td&gt;975181.56&lt;/td&gt;
&lt;td&gt;1126506.75&lt;/td&gt;
&lt;td&gt;1058537.12&lt;/td&gt;
&lt;td&gt;960937.88&lt;/td&gt;
&lt;td&gt;1332001.25&lt;/td&gt;
&lt;td&gt;1403213.38&lt;/td&gt;
&lt;td&gt;1408054.00 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;765814.06&lt;/td&gt;
&lt;td&gt;963205.56&lt;/td&gt;
&lt;td&gt;881834.19&lt;/td&gt;
&lt;td&gt;1040203.94&lt;/td&gt;
&lt;td&gt;785360.88&lt;/td&gt;
&lt;td&gt;1114082.00&lt;/td&gt;
&lt;td&gt;1179384.38&lt;/td&gt;
&lt;td&gt;1258890.88 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;596801.12&lt;/td&gt;
&lt;td&gt;714030.69&lt;/td&gt;
&lt;td&gt;787928.94&lt;/td&gt;
&lt;td&gt;864416.31&lt;/td&gt;
&lt;td&gt;614420.50&lt;/td&gt;
&lt;td&gt;943129.31&lt;/td&gt;
&lt;td&gt;868847.50&lt;/td&gt;
&lt;td&gt;970167.38  &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;size bytes&lt;/th&gt;
&lt;th&gt;set x4&lt;/th&gt;
&lt;th&gt;get x4&lt;/th&gt;
&lt;th&gt;lpush x4&lt;/th&gt;
&lt;th&gt;lpop x4&lt;/th&gt;
&lt;th&gt;set x4 vma&lt;/th&gt;
&lt;th&gt;get x4&lt;/th&gt;
&lt;th&gt;lpush x4&lt;/th&gt;
&lt;th&gt;lpop x4   &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1179965.09&lt;/td&gt;
&lt;td&gt;1580834.26&lt;/td&gt;
&lt;td&gt;2055718.79&lt;/td&gt;
&lt;td&gt;2001333.44&lt;/td&gt;
&lt;td&gt;2432077.24&lt;/td&gt;
&lt;td&gt;3466123.12&lt;/td&gt;
&lt;td&gt;3255039.99&lt;/td&gt;
&lt;td&gt;3349659.25&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;1205777.63&lt;/td&gt;
&lt;td&gt;1656787.75&lt;/td&gt;
&lt;td&gt;1685172.72&lt;/td&gt;
&lt;td&gt;2167017.68&lt;/td&gt;
&lt;td&gt;2212556.32&lt;/td&gt;
&lt;td&gt;3204048.56&lt;/td&gt;
&lt;td&gt;3243653&lt;/td&gt;
&lt;td&gt;3355042&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;1125920.34&lt;/td&gt;
&lt;td&gt;1491794.08&lt;/td&gt;
&lt;td&gt;1603009.35&lt;/td&gt;
&lt;td&gt;2040705.93&lt;/td&gt;
&lt;td&gt;2004204.13&lt;/td&gt;
&lt;td&gt;3079092.74&lt;/td&gt;
&lt;td&gt;2744756.94&lt;/td&gt;
&lt;td&gt;3079859.44&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;1172390.68&lt;/td&gt;
&lt;td&gt;1236795.19&lt;/td&gt;
&lt;td&gt;1024634.36&lt;/td&gt;
&lt;td&gt;1474094.21&lt;/td&gt;
&lt;td&gt;1717803&lt;/td&gt;
&lt;td&gt;2521588&lt;/td&gt;
&lt;td&gt;1659403.82&lt;/td&gt;
&lt;td&gt;2402496.31&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Intel X540&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;size bytes&lt;/th&gt;
&lt;th&gt;set x4&lt;/th&gt;
&lt;th&gt;get x4&lt;/th&gt;
&lt;th&gt;lpush x4&lt;/th&gt;
&lt;th&gt;lpop x4   &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1512821.64&lt;/td&gt;
&lt;td&gt;2118883.93&lt;/td&gt;
&lt;td&gt;1834559.35&lt;/td&gt;
&lt;td&gt;1960360.28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;1449761.53&lt;/td&gt;
&lt;td&gt;1851285.18&lt;/td&gt;
&lt;td&gt;1910151.44&lt;/td&gt;
&lt;td&gt;2017602.97&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;1199011.03&lt;/td&gt;
&lt;td&gt;1773449.28&lt;/td&gt;
&lt;td&gt;1612987.21&lt;/td&gt;
&lt;td&gt;1806331.65&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;1097519.72&lt;/td&gt;
&lt;td&gt;1121691.17&lt;/td&gt;
&lt;td&gt;1145548.86&lt;/td&gt;
&lt;td&gt;1398369.94&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ConnectX-3 &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;size bytes&lt;/th&gt;
&lt;th&gt;set x4 VMA&lt;/th&gt;
&lt;th&gt;get x4 VMA&lt;/th&gt;
&lt;th&gt;lpush x4 VMA&lt;/th&gt;
&lt;th&gt;lpop x4 VMA&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2455271.19&lt;/td&gt;
&lt;td&gt;3476625.19&lt;/td&gt;
&lt;td&gt;3360328.38&lt;/td&gt;
&lt;td&gt;3401881.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;2461504.31&lt;/td&gt;
&lt;td&gt;3309726.63&lt;/td&gt;
&lt;td&gt;3224818.00&lt;/td&gt;
&lt;td&gt;3322884.63&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;1954063.35&lt;/td&gt;
&lt;td&gt;2876987.38&lt;/td&gt;
&lt;td&gt;2729820.24&lt;/td&gt;
&lt;td&gt;3035352.45&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;1498470.37&lt;/td&gt;
&lt;td&gt;2356658.57&lt;/td&gt;
&lt;td&gt;1650766.50&lt;/td&gt;
&lt;td&gt;2362893.44&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Because not enough memory in single node, so I can’ t benchamrk 6xredis-server benchmark with 6xredis-benchmark&lt;br&gt;echo 1024 &amp;gt; /proc/sys/net/core/somaxconn&lt;br&gt;vm.overcommit_memory = 1&lt;br&gt;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled (reduce performance when you enable VMA, cancel)&lt;br&gt;13562:M 10 Jun 01:02:39.054 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.&lt;br&gt;13562:M 10 Jun 01:02:39.054 # Server started, Redis version 3.2.0&lt;br&gt;13562:M 10 Jun 01:02:39.054 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add ‘vm.overcommit_memory = 1’ to /etc/sysctl.conf and then reboot or run the command ‘sysctl vm.overcommit_memory=1’ for this to take effect.&lt;br&gt;13562:M 10 Jun 01:02:39.054 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ‘echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In VMA environment, if you disable Transparent Huge Pages, redis performance will decreased.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;qperf&quot;&gt;&lt;a href=&quot;#qperf&quot; class=&quot;headerlink&quot; title=&quot;qperf&quot;&gt;&lt;/a&gt;qperf&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; VMA PANIC: ib_ctx_handler73:ib_ctx_handler() ibv device 0x1523ee0 pd allocation failure (ibv context 0x15266d0) (errno=13 Permission denied)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;terminate called without an active exception&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; VMA PANIC: ib_ctx_handler73:ib_ctx_handler() ibv device 0x1523ee0 pd allocation failure (ibv context 0x15266d0) (errno=13 Permission denied)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;terminate called without an active exception&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; VMA PANIC: ib_ctx_handler73:ib_ctx_handler() ibv device 0x1523ee0 pd allocation failure (ibv context 0x15266d0) (errno=13 Permission denied)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;terminate called without an active exception&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;###Another function&lt;br&gt;&lt;a href=&quot;http://www.intel.com/content/dam/www/public/us/en/documents/product-briefs/ethernet-x710-brief.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ethernet brief&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.nas.nasa.gov/assets/pdf/papers/NAS_Technical_Report_NAS-2014-01.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Comparison of 40G RDMA and Traditional Ethernet Technologies&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mellanox.com/related-docs/prod_software/Performance_Tuning_Guide_for_Mellanox_Network_Adapters.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Performance Tuning Guidelines for Mellanox Network Adapters&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://jaseywang.me/2013/11/02/10g82599eb-%E7%BD%91%E5%8D%A1%E6%B5%8B%E8%AF%95%E4%BC%98%E5%8C%96ethtool/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;10G 82599EB 网卡测试优化&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;RDMA-support&quot;&gt;&lt;a href=&quot;#RDMA-support&quot; class=&quot;headerlink&quot; title=&quot;RDMA support&quot;&gt;&lt;/a&gt;RDMA support&lt;/h3&gt;&lt;p&gt;RDMA allows for communication 
    
    </summary>
    
      <category term="Linux configuration" scheme="http://yoursite.com/categories/Linux-configuration/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="nic" scheme="http://yoursite.com/tags/nic/"/>
    
      <category term="Ethernet" scheme="http://yoursite.com/tags/Ethernet/"/>
    
      <category term="benchmark" scheme="http://yoursite.com/tags/benchmark/"/>
    
  </entry>
  
</feed>
